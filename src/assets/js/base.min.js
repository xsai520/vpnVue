!
    function() { !
        function(exports, global) {
            define(["jquery", "bootstrap"],
                function() {
                    var base = {};
                    return base.checkboxColor = ["#0387db", "#bbb"],
                        Array.prototype.remove = function(e) {
                            if (isNaN(e) || e > this.length) return ! 1;
                            for (var t = 0,
                                     a = 0; t < this.length; t++) this[t] != this[e] && (this[a++] = this[t]);
                            this.length -= 1
                        },
                        Date.prototype.Format = function(e) {
                            var t = {
                                "M+": this.getMonth() + 1,
                                "d+": this.getDate(),
                                "h+": this.getHours(),
                                "m+": this.getMinutes(),
                                "s+": this.getSeconds(),
                                "q+": Math.floor((this.getMonth() + 3) / 3),
                                S: this.getMilliseconds()
                            };
                            /(y+)/.test(e) && (e = e.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length)));
                            for (var a in t) new RegExp("(" + a + ")").test(e) && (e = e.replace(RegExp.$1, 1 == RegExp.$1.length ? t[a] : ("00" + t[a]).substr(("" + t[a]).length)));
                            return e
                        },
                        String.prototype.trim = function() {
                            return this.replace(/(^\s*)|(\s*$)/g, "")
                        },
                        String.prototype.ltrim = function() {
                            return this.replace(/(^\s*)/g, "")
                        },
                        String.prototype.rtrim = function() {
                            return this.replace(/(\s*$)/g, "")
                        },
                        function(e) {
                            if (!e.browser) {
                                e.browser = {},
                                    e.browser.mozilla = !1,
                                    e.browser.webkit = !1,
                                    e.browser.opera = !1,
                                    e.browser.msie = !1;
                                var t = navigator.userAgent;
                                e.browser.name = navigator.appName,
                                    e.browser.fullVersion = "" + parseFloat(navigator.appVersion),
                                    e.browser.majorVersion = parseInt(navigator.appVersion, 10);
                                var a, n, r; (n = t.indexOf("Opera")) != -1 ? (e.browser.opera = !0, e.browser.name = "Opera", e.browser.fullVersion = t.substring(n + 6), (n = t.indexOf("Version")) != -1 && (e.browser.fullVersion = t.substring(n + 8))) : (n = t.indexOf("MSIE")) != -1 ? (e.browser.msie = !0, e.browser.name = "Microsoft Internet Explorer", e.browser.fullVersion = t.substring(n + 5)) : (n = t.indexOf("Chrome")) != -1 ? (e.browser.webkit = !0, e.browser.name = "Chrome", e.browser.fullVersion = t.substring(n + 7)) : (n = t.indexOf("Safari")) != -1 ? (e.browser.webkit = !0, e.browser.name = "Safari", e.browser.fullVersion = t.substring(n + 7), (n = t.indexOf("Version")) != -1 && (e.browser.fullVersion = t.substring(n + 8))) : (n = t.indexOf("Firefox")) != -1 ? (e.browser.mozilla = !0, e.browser.name = "Firefox", e.browser.fullVersion = t.substring(n + 8)) : (a = t.lastIndexOf(" ") + 1) < (n = t.lastIndexOf("/")) && (e.browser.name = t.substring(a, n), e.browser.fullVersion = t.substring(n + 1), e.browser.name.toLowerCase() == e.browser.name.toUpperCase() && (e.browser.name = navigator.appName)),
                                (r = e.browser.fullVersion.indexOf(";")) != -1 && (e.browser.fullVersion = e.browser.fullVersion.substring(0, r)),
                                (r = e.browser.fullVersion.indexOf(" ")) != -1 && (e.browser.fullVersion = e.browser.fullVersion.substring(0, r)),
                                    e.browser.majorVersion = parseInt("" + e.browser.fullVersion, 10),
                                isNaN(e.browser.majorVersion) && (e.browser.fullVersion = "" + parseFloat(navigator.appVersion), e.browser.majorVersion = parseInt(navigator.appVersion, 10)),
                                    e.browser.version = e.browser.majorVersion
                            }
                        } (jQuery),
                        base.$scope = {},
                        base.IE8 = function() {
                            return ! $.support.opacity
                        },
                        base.IE = function() {
                            return $.support.opacity || $.support.style || void 0 != window.XMLHttpRequest ? $.support.opacity || $.support.style || void 0 == window.window.XMLHttpRequest ? $.support.opacity ? 9 : 8 : 7 : 6
                        } (),
                        base.isIE = function() {
                            return !! document.all
                        } (),
                        base.setProperty = function(e, t) {
                            t && (t.cls && $(e).addClass(t.cls.replace(/,/g, " ")), t.style && $(e).attr("style", t.style.replace(/,/g, ";")), t.id && $(e).attr("id", t.id), t.name && $(e).attr("name", t.name), self.attr && $(self.attr).each(function(t, a) {
                                $(e).attr(a.name, a.value)
                            }))
                        },
                        base.getRandom = function(e, t) {
                            return Math.round(Math.random() * (t - e) + e)
                        },
                        base.getRandomString = function(e) {
                            e = e ? e: 32;
                            var t = "ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",
                                a = t.length,
                                n = "";
                            for (i = 0; i < e; i++) n += t.charAt(Math.floor(Math.random() * a));
                            return n
                        },
                        base.ajax = function(e, t) {
                            var a = {};
                            if (t = !t || t, e) return a.params = e.params ? e.params: {},
                                a.url = e.url ? e.url: "",
                                a.async = 0 != e.async,
                                a.type = e.type ? e.type: "post",
                                a.dataType = e.dataType ? e.dataType: "json",
                                a.success = e.success ? e.success: null,
                                a.error = e.error ? e.error: null,
                                a.beforeSend = e.beforeSend ? e.beforeSend: null,
                                a.complete = e.complete ? e.complete: null,
                                a.timeout = e.timeout ? e.timeout: -1,
                                a.ajaxObj = null,
                                a.isConnect = 0 != a.isConnect,
                                a.beforeSendTip = e.beforeSendTip ? e.beforeSendTip: null,
                                a.successTip = e.successTip ? e.successTip: null,
                                a.errorTip = e.errorTip ? e.errorTip: null,
                                a.contentType = e.contentType ? e.contentType: "application/json; charset=utf-8",
                            "text" == a.dataType && (a.type = "get"),
                                a.connect = function() {
                                    var e = {
                                        type: a.type,
                                        async: a.async,
                                        url: a.url,
                                        contentType: a.contentType,
                                        data: function() {
                                            return "post" == a.type.toLowerCase() ? JSON.stringify(a.params) : a.params
                                        } (),
                                        dataType: a.dataType,
                                        timeout: a.timeout,
                                        success: function(e, t, n) {
                                            a.success && a.success(e, t, n)
                                        },
                                        error: function(e, t, n) {
                                            a.error && a.error()
                                        },
                                        complete: function(e, t) {
                                            a.complete && a.complete(e, t)
                                        },
                                        xhrFields: {
                                            withCredentials: !0
                                        },
                                        beforeSend: function(e) {
                                            a.beforeSend && a.beforeSend(e)
                                        }
                                    };
                                    return a.ajaxObj = $.ajax(e),
                                        a
                                },
                                a.stop = function() {
                                    a.ajaxObj.abort()
                                },
                                a.run = function() {
                                    a.connect()
                                },
                            t && a.url && a.connect(),
                                a
                        },
                        base.ajax.load = function(e) {
                            var t = base.ajax(e, !1);
                            return t.dataType = "text",
                                t.type = "get",
                                t.errorText = e.errorText ? e.errorText: "资源加载出错,请联系管理员!",
                                t.container = e.container ? e.container: null,
                                t.error = function() {
                                    t.container && base.bulletin(t.container, t.errorText)
                                },
                                t.beforeSend = function() {
                                    t.container && base.loading($(t.container))
                                },
                                t.url ? t.connect() : base.bulletin(t.container, t.errorText),
                                t
                        },
                        base.bulletin = function(e, t) {
                            $(e).html("<div style='display:table;width:100%;height:100%;text-align:center;'><div class='theme-bulletin'>" + t + "</div></div>")
                        },
                        base.loading = function(e, t) {
                            t = t ? t: "#aaa",
                                $(e).html("<div class='ui-loading' style='display:table;width:100%;height:100%;text-align:center;'><div style='display: table-cell;vertical-align: middle;'><i class='fa fa-spinner fa-pulse fa-3x fa-fw' style='font-size:24px;color:" + t + "'></i><span style='margin-right:5px;color:" + t + "'>加载中...</span></div></div>")
                        },
                        base.template = function(e) {
                            var t = {};
                            t.data = e.data ? e.data: null,
                                t.container = e.container ? e.container: null,
                                t.templateId = e.templateId ? e.templateId: null,
                                t.callback = e.callback ? e.callback: null,
                                t.loading = !!e.loading && e.loading,
                                t.helper = e.helper ? e.helper: null,
                            t.data && t.container && t.templateId && (t.loading && base.loading(t.container), require(["template"],
                                function(e) {
                                    var a = e.compile($("#" + t.templateId).html());
                                    e.registerHelper("null",
                                        function(e, t) {
                                            return e && "" != e ? t.inverse(this) : t.fn(this)
                                        }),
                                        e.registerHelper("ne",
                                            function(e, t, a) {
                                                return e != t ? a.fn(this) : a.inverse(this)
                                            }),
                                        e.registerHelper("e",
                                            function(e, t, a) {
                                                return e == t ? a.fn(this) : a.inverse(this)
                                            }),
                                        e.registerHelper("g",
                                            function(e, t, a) {
                                                return e > t ? a.fn(this) : a.inverse(this)
                                            }),
                                        e.registerHelper("ge",
                                            function(e, t, a) {
                                                return e >= t ? a.fn(this) : a.inverse(this)
                                            }),
                                        e.registerHelper("le",
                                            function(e, t, a) {
                                                return e <= t ? a.fn(this) : a.inverse(this)
                                            }),
                                        e.registerHelper("l",
                                            function(e, t, a) {
                                                return e < t ? a.fn(this) : a.inverse(this)
                                            }),
                                    t.helper && t.helper.length > 0 && $(t.helper).each(function(t, a) {
                                        e.registerHelper(a.name, a.event)
                                    });
                                    var n = a(t.data);
                                    $(t.container).html(n),
                                    t.callback && t.callback(t)
                                }))
                        },
                        base.modal = function(e) {
                            e || (e = {});
                            var t = {};
                            return t.container = e.container ? e.container: $("body"),
                                t.modalId = e.id ? e.id: "m" + base.getRandom(1e3, 9999),
                                t.label = e.label ? e.label: "新窗口",
                                t.background = e.background ? e.background: "transparent",
                                t.modalLabelId = e.id + "label",
                                t.style = e.style ? e.style: "",
                                t.width = e.width ? e.width: null,
                                t.visible = 1 == e.visible,
                                t.center = 0 != e.center,
                                t.drag = 0 != e.drag,
                                t.url = e.url ? e.url: null,
                                t.height = e.height ? e.height: null,
                                t.radius = e.radius ? e.radius: 5,
                                t.contentStyle = e.contentStyle ? e.contentStyle: "",
                                t.labelStyle = e.labelStyle ? e.labelStyle: "",
                                t.modalEntity = {},
                                t.modal = null,
                                t.modalBody = null,
                                t.modalDialog = null,
                                t.modalContent = null,
                                t.modalHeader = null,
                                t.modalFooter = null,
                                t.modalOption = e.modalOption ? e.modalOption: {},
                                t.callback = e.callback ? e.callback: null,
                                t.customScroll = 0 != e.customScroll,
                                t.context = e.context ? e.context: "",
                                t.rebuilding = !!e.rebuilding && e.rebuilding,
                                t.create = function() {
                                    $("#" + t.modalId).length > 0 ? t.rebuilding ? ($("#" + t.modalId).remove(), t.createModal()) : (t.modal = $("#" + t.modalId), t.setModal(), t.modalDialog = $("#" + t.modalId).find(".modal-dialog"), t.setModalDialog(), t.modalContent = $("#" + t.modalId).find(".modal-content"), t.setModalContent(), t.modalHeader = $("#" + t.modalId).find(".modal-header"), t.setModalHeader(), t.modalBody = $("#" + t.modalId).find(".modal-body"), t.setModalBody(), t.modalFooter = $("#" + t.modalId).find(".modal-footer"), t.setModalFooter()) : t.createModal(),
                                    t.visible || t.show()
                                },
                                t.createModal = function() {
                                    t.modal = document.createElement("div"),
                                        $(t.container).append(t.modal),
                                        t.setModal(),
                                        t.modalDialog = document.createElement("div"),
                                        $(t.modal).append(t.modalDialog),
                                        t.setModalDialog(),
                                        t.modalContent = document.createElement("div"),
                                        $(t.modalDialog).append(t.modalContent),
                                        t.setModalContent(),
                                        t.modalHeader = document.createElement("div"),
                                        $(t.modalContent).append(t.modalHeader),
                                        t.setModalHeader(),
                                        t.modalBody = document.createElement("div"),
                                        $(t.modalContent).append(t.modalBody),
                                        t.setModalBody(),
                                        t.modalFooter = document.createElement("div"),
                                        $(t.modalContent).append(t.modalFooter),
                                        t.setModalFooter()
                                },
                                t.setModal = function() {
                                    $(t.modal).attr("id", t.modalId),
                                        $(t.modal).attr("class", "modal fade"),
                                        $(t.modal).attr("role", "dialog"),
                                        $(t.modal).attr("tabindex", "-1"),
                                        $(t.modal).attr("aria-labelledby", t.modalId + "Label"),
                                        t.visible ? $(t.modal).attr("aria-hidden", "true") : $(t.modal).attr("aria-hidden", "false"),
                                    t.cls && $(t.modal).attr("class", e.cls.replace(/,/g, " ")),
                                    t.style && $(t.modal).attr("style", e.style.replace(/,/g, ";"))
                                },
                                t.setModalDialog = function() {
                                    $(t.modalDialog).attr("class", "modal-dialog"),
                                    t.width && $(t.modalDialog).css("width", t.width),
                                    t.background && $(t.modalDialog).css("background", t.background),
                                        $(t.modalDialog).css("border-radius", t.radius)
                                },
                                t.setModalContent = function() {
                                    $(t.modalContent).attr("class", "modal-content")
                                },
                                t.setModalHeader = function() {
                                    $(t.modalHeader).attr("class", "modal-header"),
                                    t.drag && require(["jqueryUI"],
                                        function() {
                                            $(t.modalDialog).draggable({
                                                handle: ".modal-header",
                                                cursor: "move",
                                                refreshPositions: !1
                                            }),
                                                $(t.modalHeader).css("cursor", "move")
                                        }),
                                        $(t.modalHeader).html("<button class='close' data-dismiss='modal' aria-hidden='true'><i class='fa fa-remove' style='font-weight:normal;font-size:16px;'></i></button><h4 class='modal-title'  id='" + t.modalId + "Label'>" + t.label + "</h4>"),
                                    t.labelStyle && $(t.modalHeader).find("h4").attr("style", t.labelStyle.replace(/,/g, ";"))
                                },
                                t.setModalBody = function() {
                                    $(t.modalBody).attr("class", "modal-body"),
                                    t.height && t.height > 0 && ($(t.modalBody).css("height", t.height), $(t.modalBody).css("overflow", "auto")),
                                    t.contentStyle && $(t.modalBody).attr("style", t.contentStyle.replace(/,/g, ";"))
                                },
                                t.setModalFooter = function() {
                                    $(t.modalFooter).attr("class", "modal-footer"),
                                        $(t.modalFooter).html(""),
                                    e.buttons && e.buttons.length > 0 && $(e.buttons).each(function(e, a) {
                                        a.container = $(t.modalFooter),
                                            base.form.button(a)
                                    })
                                },
                                t.show = function() {
                                    $(t.modal).on("show.bs.modal",
                                        function() {
                                            t.loadContext(),
                                            t.showEvent && t.showEvent()
                                        }),
                                        $(t.modal).on("shown.bs.modal",
                                            function() {
                                                t.shownEvent && t.shownEvent()
                                            }),
                                        $(t.modal).on("hidden.bs.modal",
                                            function() {
                                                $(t.modal).remove()
                                            }),
                                        t.modalOption.show = !0,
                                        t.modalOption.center = t.center,
                                        $(t.modal).modal(t.modalOption)
                                },
                                t.hide = function() {
                                    $(t.modal).on("hide.bs.modal",
                                        function() {
                                            t.hideEvent && t.hideEvent()
                                        }),
                                        $(t.modal).on("hidden.bs.modal",
                                            function() {
                                                t.hiddenEvent && t.hiddenEvent(),
                                                    $(t.modal).remove()
                                            }),
                                        $(t.modal).modal("hide")
                                },
                                t.loadContext = function(a) {
                                    a || (a = e),
                                        $(t.modalBody).html(""),
                                        a.context ? ($(t.modalBody).html(a.context), t.callback && t.callback(t)) : a.url && base.ajax({
                                            url: a.url,
                                            dataType: "text",
                                            success: function(e) {
                                                $(t.modalBody).html(e),
                                                t.callback && t.callback(t),
                                                t.customScroll && base.scroll({
                                                    container: $(t.modalBody)
                                                })
                                            },
                                            beforeSend: function() {
                                                base.loading(t.modalBody)
                                            }
                                        })
                                },
                                t.create(),
                                t
                        },
                        base.glass = function(e) {
                            if (! (base.isIE && base.IE <= 8)) {
                                var t = {};
                                t.radius = e.radius ? e.radius: 15,
                                    t.element = e.element ? e.element: null,
                                    t.canvas = null,
                                    t.img = e.img ? e.img: null;
                                var a = new Image;
                                return $(a).attr("src", $(t.img).attr("src")),
                                    t.fixHeight = e.fixHeight ? e.fixHeight: 0,
                                    t.width = a.width ? a.width: $(t.element).width(),
                                    t.height = a.height ? a.height: $(t.element).height(),
                                    t.top = e.top ? e.top: $(t.element).offset().top,
                                    t.left = e.left ? e.left: $(t.element).offset().left,
                                    t.x = e.x ? e.x: 0,
                                    t.y = e.y ? e.y: 0,
                                    t.cls = e.cls ? e.cls: null,
                                    t.Mu = [512, 512, 456, 512, 328, 456, 335, 512, 405, 328, 271, 456, 388, 335, 292, 512, 454, 405, 364, 328, 298, 271, 496, 456, 420, 388, 360, 335, 312, 292, 273, 512, 482, 454, 428, 405, 383, 364, 345, 328, 312, 298, 284, 271, 259, 496, 475, 456, 437, 420, 404, 388, 374, 360, 347, 335, 323, 312, 302, 292, 282, 273, 265, 512, 497, 482, 468, 454, 441, 428, 417, 405, 394, 383, 373, 364, 354, 345, 337, 328, 320, 312, 305, 298, 291, 284, 278, 271, 265, 259, 507, 496, 485, 475, 465, 456, 446, 437, 428, 420, 412, 404, 396, 388, 381, 374, 367, 360, 354, 347, 341, 335, 329, 323, 318, 312, 307, 302, 297, 292, 287, 282, 278, 273, 269, 265, 261, 512, 505, 497, 489, 482, 475, 468, 461, 454, 447, 441, 435, 428, 422, 417, 411, 405, 399, 394, 389, 383, 378, 373, 368, 364, 359, 354, 350, 345, 341, 337, 332, 328, 324, 320, 316, 312, 309, 305, 301, 298, 294, 291, 287, 284, 281, 278, 274, 271, 268, 265, 262, 259, 257, 507, 501, 496, 491, 485, 480, 475, 470, 465, 460, 456, 451, 446, 442, 437, 433, 428, 424, 420, 416, 412, 408, 404, 400, 396, 392, 388, 385, 381, 377, 374, 370, 367, 363, 360, 357, 354, 350, 347, 344, 341, 338, 335, 332, 329, 326, 323, 320, 318, 315, 312, 310, 307, 304, 302, 299, 297, 294, 292, 289, 287, 285, 282, 280, 278, 275, 273, 271, 269, 267, 265, 263, 261, 259],
                                    t.Sh = [9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24],
                                    t.BlurStack = function() {
                                        this.r = 0,
                                            this.g = 0,
                                            this.b = 0,
                                            this.a = 0,
                                            this.next = null
                                    },
                                    t.draw = function() {
                                        var e = $(t.element).width(),
                                            a = $(t.element).height();
                                        $(t.canvas).css("width", e),
                                            $(t.canvas).css("height", a),
                                            $(t.canvas).css("left", t.left),
                                            $(t.canvas).css("top", t.top),
                                            $(t.canvas).attr("width", e),
                                            $(t.canvas).attr("height", a),
                                            $(t.canvas).css("position", "absolute"),
                                        t.cls && $(t.canvas).addClass(t.cls);
                                        var n = 0;
                                        $(t.element).css("z-index") && (n = Number($(t.element).css("z-index").split("px")[0])),
                                            $(t.canvas).css("zIndex", n + 1);
                                        var r = t.canvas.getContext("2d");
                                        r.clearRect(0, 0, e, a);
                                        var o = 0;
                                        o = $(window).height() < document.documentElement.scrollHeight ? a + Math.floor(window.screen.availHeight / t.height * a) + 10 : a + Math.floor(window.screen.availHeight / t.height * a);
                                        var l = t.width;
                                        r.drawImage($(t.img)[0], t.left, t.top, l, o, t.x, t.y, e, a),
                                            t.stackBlurCanvasRGBA(0, 0, e, a)
                                    },
                                    t.create = function() {
                                        t.canvas = document.createElement("canvas"),
                                            $(t.element).parent().append(t.canvas),
                                            t.draw()
                                    },
                                    t.stackBlurCanvasRGBA = function(e, a, n, r) {
                                        var o, l = t.canvas.getContext("2d");
                                        try {
                                            try {
                                                o = l.getImageData(e, a, n, r)
                                            } catch(t) {
                                                try {
                                                    netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),
                                                        o = l.getImageData(e, a, n, r)
                                                } catch(e) {
                                                    throw new Error("unable to access local image data: " + e)
                                                }
                                            }
                                        } catch(e) {
                                            throw new Error("unable to access image data: " + e)
                                        }
                                        var i, c, s, d, u, p, m, f, h, b, g, v, $, x, y, k, w, C, E, T, I, S, B, A, O = o.data,
                                            j = t.radius + t.radius + 1,
                                            D = n - 1,
                                            P = r - 1,
                                            N = t.radius + 1,
                                            z = N * (N + 1) / 2,
                                            M = new BlurStack,
                                            H = M;
                                        for (s = 1; s < j; s++) if (H = H.next = new BlurStack, s == N) var L = H;
                                        H.next = M;
                                        var R = null,
                                            F = null;
                                        m = p = 0;
                                        var W = mul_table[t.radius],
                                            G = shg_table[t.radius];
                                        for (c = 0; c < r; c++) {
                                            for (k = w = C = E = f = h = b = g = 0, v = N * (T = O[p]), $ = N * (I = O[p + 1]), x = N * (S = O[p + 2]), y = N * (B = O[p + 3]), f += z * T, h += z * I, b += z * S, g += z * B, H = M, s = 0; s < N; s++) H.r = T,
                                                H.g = I,
                                                H.b = S,
                                                H.a = B,
                                                H = H.next;
                                            for (s = 1; s < N; s++) d = p + ((D < s ? D: s) << 2),
                                                f += (H.r = T = O[d]) * (A = N - s),
                                                h += (H.g = I = O[d + 1]) * A,
                                                b += (H.b = S = O[d + 2]) * A,
                                                g += (H.a = B = O[d + 3]) * A,
                                                k += T,
                                                w += I,
                                                C += S,
                                                E += B,
                                                H = H.next;
                                            for (R = M, F = L, i = 0; i < n; i++) O[p + 3] = B = g * W >> G,
                                                0 != B ? (B = 255 / B, O[p] = (f * W >> G) * B, O[p + 1] = (h * W >> G) * B, O[p + 2] = (b * W >> G) * B) : O[p] = O[p + 1] = O[p + 2] = 0,
                                                f -= v,
                                                h -= $,
                                                b -= x,
                                                g -= y,
                                                v -= R.r,
                                                $ -= R.g,
                                                x -= R.b,
                                                y -= R.a,
                                                d = m + ((d = i + t.radius + 1) < D ? d: D) << 2,
                                                k += R.r = O[d],
                                                w += R.g = O[d + 1],
                                                C += R.b = O[d + 2],
                                                E += R.a = O[d + 3],
                                                f += k,
                                                h += w,
                                                b += C,
                                                g += E,
                                                R = R.next,
                                                v += T = F.r,
                                                $ += I = F.g,
                                                x += S = F.b,
                                                y += B = F.a,
                                                k -= T,
                                                w -= I,
                                                C -= S,
                                                E -= B,
                                                F = F.next,
                                                p += 4;
                                            m += n
                                        }
                                        for (i = 0; i < n; i++) {
                                            for (w = C = E = k = h = b = g = f = 0, p = i << 2, v = N * (T = O[p]), $ = N * (I = O[p + 1]), x = N * (S = O[p + 2]), y = N * (B = O[p + 3]), f += z * T, h += z * I, b += z * S, g += z * B, H = M, s = 0; s < N; s++) H.r = T,
                                                H.g = I,
                                                H.b = S,
                                                H.a = B,
                                                H = H.next;
                                            for (u = n, s = 1; s <= t.radius; s++) p = u + i << 2,
                                                f += (H.r = T = O[p]) * (A = N - s),
                                                h += (H.g = I = O[p + 1]) * A,
                                                b += (H.b = S = O[p + 2]) * A,
                                                g += (H.a = B = O[p + 3]) * A,
                                                k += T,
                                                w += I,
                                                C += S,
                                                E += B,
                                                H = H.next,
                                            s < P && (u += n);
                                            for (p = i, R = M, F = L, c = 0; c < r; c++) d = p << 2,
                                                O[d + 3] = B = g * W >> G,
                                                B > 0 ? (B = 255 / B, O[d] = (f * W >> G) * B, O[d + 1] = (h * W >> G) * B, O[d + 2] = (b * W >> G) * B) : O[d] = O[d + 1] = O[d + 2] = 0,
                                                f -= v,
                                                h -= $,
                                                b -= x,
                                                g -= y,
                                                v -= R.r,
                                                $ -= R.g,
                                                x -= R.b,
                                                y -= R.a,
                                                d = i + ((d = c + N) < P ? d: P) * n << 2,
                                                f += k += R.r = O[d],
                                                h += w += R.g = O[d + 1],
                                                b += C += R.b = O[d + 2],
                                                g += E += R.a = O[d + 3],
                                                R = R.next,
                                                v += T = F.r,
                                                $ += I = F.g,
                                                x += S = F.b,
                                                y += B = F.a,
                                                k -= T,
                                                w -= I,
                                                C -= S,
                                                E -= B,
                                                F = F.next,
                                                p += n
                                        }
                                        l.putImageData(o, e, a)
                                    },
                                    t.create(),
                                    t
                            }
                        },
                        base.spreader = function(e) {
                            var t = {};
                            return t.container = e.container ? e.container: null,
                                t.data = e.data ? e.data: null,
                                t.step = e.step ? e.step: 0,
                                t.mapOption = e.mapOption ? e.mapOption: null,
                                t.radius = e.radius ? e.radius: .05,
                                t.offset = e.offset ? e.offset: 10,
                                t.origin = e.origin ? e.origin: [0, 0],
                                t.mapData = {
                                    type: "FeatureCollection",
                                    features: [],
                                    UTF8Encoding: !0
                                },
                                t.markLineData = [],
                                t.markPointData = [],
                                t.geoCoord = {},
                                t.originId = null,
                                t.element = null,
                                t.isMain = !e.isMain || e.isMain,
                                t.create = function() {
                                    return t.data && t.data.length > 0 && (t.isMain ? t.element = t.container: (t.element = document.createElement("div"), $(t.container).append(t.element)), t.setData(t.data), t.draw()),
                                        t
                                },
                                t.draw = function() {
                                    if (t.mapOption) {
                                        base.echartsOld({
                                            container: t.element,
                                            type: "map",
                                            style: "width:100%;height:100%",
                                            option: t.mapOption,
                                            mapData: t.mapData,
                                            mapName: "service",
                                            clickEvent: e.clickEvent ? e.clickEvent: null,
                                            hoverEvent: e.hoverEvent ? e.hoverEvent: null
                                        })
                                    }
                                },
                                t.getPosition = function(e, a, n, r) {
                                    if (!e || !a || !n) return [];
                                    var r = r ? r: t.radius,
                                        o = Number(e) + Math.sin(2 * Math.PI / 360 * n) * r,
                                        l = Number(a) + Math.cos(2 * Math.PI / 360 * n) * r,
                                        i = [o, l];
                                    return i
                                },
                                t.setData = function(e, a) {
                                    $(e).each(function(n, r) {
                                        var o = r.id,
                                            l = [],
                                            i = 0,
                                            c = 0;
                                        if (a) {
                                            if (a.cp[0] == t.origin[0] && a.cp[1] == t.origin[1]) i = t.step > 0 ? 360 / t.step * (n + 1) : 360 / e.length * (n + 1),
                                                c = t.radius;
                                            else {
                                                var s = a.angle;
                                                i = s / 1.5 + 10 * (n + 1),
                                                    c = t.radius
                                            }
                                            l = t.getPosition(a.cp[0], a.cp[1], i, c)
                                        } else l = t.origin;
                                        t.originId && (t.originId = o),
                                            t.geoCoord[r.name] = l,
                                            a ? (t.markLineData.push([{
                                                name: r.name
                                            },
                                                {
                                                    name: a.data.name,
                                                    value: r.value
                                                }]), t.markPointData.push({
                                                name: r.name,
                                                value: r.value
                                            })) : t.markLineData.push([{
                                                name: r.name
                                            },
                                                {
                                                    name: t.data[0].name,
                                                    value: r.value
                                                }]);
                                        var d = {
                                            type: "Feature",
                                            id: o,
                                            properties: {
                                                name: r.name,
                                                cp: l,
                                                childNum: 1
                                            },
                                            geometry: {
                                                type: "Polygon",
                                                coordinates: ["@@DB@DF@@@B@@@@@@@B@B@@@@@@@@@@@D@BAB@@@B@B@@@B@B@BA@@B@B@@BD@@F@B@@@B@@@@@B@B@B@@@B@@@@@@@FD@@CA@@AD@BC@@@A@EB@@CD@@AB@B@R@@@@@@@@@@@@ED@@@@@D@@@@@B@@E@@@BA@@A@@@A@@@A@@@@@@@@@@@A@@@CB@@@@@@@@@@AA@@@@@@@@AF@B@@@B@@@@@@@@@@@@@@AB@@BD@@@@@@@@@A@@@@B@@AB@@@@B@@@@@FBBA@CD@@EAA@@@A@@@@@@B@@@@@@@@@@@BB@@@@B@@@@@@@B@D@@@@@@@@@@@@AB@@@A@@@@A@A@@@@@@@@A@@@AA@@@A@@@A@A@@@@@AA@@A@@@E@@@@@@@A@C@@@@@@@@@@@E@@@@CB@@@@A@@@@@A@AA@@@@@@@@@BA@@@A@@A@@@BE@@IBE@G@C@C@@@@BC@A@@@C@C@A@C@A@A@@B@@@@BB@@@B@B@@@B@B@@@B@B@B@B@B@@@D@@CA@C@@AB@@@@@@@@C@@@A@@@EH@@AD@@@@@@@@AC@@C@@A@A@AB@@@@A@@@A@@AC@@ABG@A@@@@BE@C@A@@@@@AAAAA@@@A@C@@@@@@AA@@@@@@C@KBO@C@@@C@A@@@A@AAA@@@E@@@E@@CD@@@@@@A@@@@@C@@@@B@@AA@@C@@@@@@A@@@A@BGA@@@@@A@@A@@@@@@C@C@CB@@@@C@@@A@@@A@A@@@@@A@@@@@A@@AI@@@B@A@@B@B@B@@@@@@@B@@A@@@@A@@AB@BA@A@@@@@@DE@@@@@@B@@@BEA@@A@A@AAA@A@@@@@A@@B@@@@A@@@@@A@@@@@@@@@B@@B@@@@B@@@@@@@@@B@@D@@@DJ@B@D@@@@@H@NB@B@B@@@L@@@B@@@BAH@J@J@F@@@@@@A@@@A@@@@B@@@@@D@B@JG@@BB@@B@@@@@DA@@@@@@B@@@@B@AD@@@@@B@NJ@@B@@@@@@@@@@@@F@AJ@@@@C@AX@@@@@@AB@@A@@F@N@NMA@F@B"],
                                                encodeOffsets: [[119181, 40920]]
                                            }
                                        };
                                        if (t.mapData.features.push(d), r.items && r.items.length > 0) {
                                            var u = {
                                                cp: l,
                                                data: r,
                                                angle: i
                                            };
                                            t.setData(r.items, u)
                                        }
                                    }),
                                        t.mapOption.series[0].geoCoord = t.geoCoord,
                                        t.mapOption.series[0].markLine.data = t.markLineData,
                                        t.mapOption.series[0].markPoint.data = t.markPointData
                                },
                                t.create(),
                                t
                        },
                        base.echartsOld = function(e) {
                            var t = {};
                            return t.container = null,
                                t.dataOption = null,
                                t.parentOption = e.parentOption,
                                t.chart = null,
                                t.data = null,
                                t.echarts = null,
                                t.theme = null,
                                t.chartEle = null,
                                e.seriesType = e.seriesType ? e.seriesType: "map",
                                t.element = document.createElement("div"),
                                $(t.element).addClass("echarts-chart"),
                                e.show ? $(t.element).hide() : $(t.element).show(),
                                $(e.container).append(t.element),
                                base.setProperty(t.element, e),
                                t.mapSelectFuc = function(a) {
                                    "map" == e.seriesType ? a.on("mapselectchanged",
                                        function(a) {
                                            e.mapSelectedEvent(a, t)
                                        }) : a.on("click",
                                        function(a) {
                                            e.mapSelectedEvent(a, t)
                                        })
                                },
                                t.clickFuc = function(a) {
                                    require(["echartsConfig"],
                                        function(n) {
                                            a.on("click",
                                                function(a) {
                                                    e.clickEvent(a, t)
                                                })
                                        })
                                },
                                t.hoverFuc = function(t) {
                                    require(["echartsConfig"],
                                        function(a) {
                                            t.on("hover",
                                                function(t) {
                                                    e.hoverEvent(t)
                                                })
                                        })
                                },
                                t.create = function() {
                                    e.option && (e.dataOption = e.option, e.setOptionDataEvent && e.setOptionDataEvent(e), "map" == e.type ? require(["echarts2.0"],
                                        function() {
                                            e.mapData && e.mapName ? (echarts.util.mapData.params.params[e.mapName] = {
                                                getGeoJson: function(t) {
                                                    "string" == typeof e.mapData ? $.getJSON(e.mapData,
                                                        function(e) {
                                                            t(echarts.util.mapData.params.decode(e))
                                                        }) : t(echarts.util.mapData.params.decode(e.mapData))
                                                }
                                            },
                                                t.echarts = echarts, t.chart = t.echarts.init(t.element, t.theme), t.chartEle = t.chart.setOption(e.dataOption, !0), $(window).on("resize",
                                                function() {
                                                    t.reDraw()
                                                }), e.mapSelectedEvent && t.mapSelectFuc(t.chart), e.clickEvent && t.clickFuc(t.chart), e.hoverEvent && t.hoverFuc(t.chart)) : (t.echarts = echarts, t.chart = t.echarts.init(t.element, t.theme), t.chartEle = t.chart.setOption(e.dataOption, !0), $(window).on("resize",
                                                function() {
                                                    t.reDraw()
                                                }), e.mapSelectedCallback && t.mapSelectFuc(t.chart), e.clickCallback && t.clickFuc(t.chart), e.hoverCallback && t.hoverFuc(t.chart))
                                        }) : require(["echarts.min", e.theme],
                                        function(a, n) {
                                            t.echarts = a,
                                                t.theme = n,
                                                t.chart = t.echarts.init(t.element, t.theme),
                                                t.chartEle = t.chart.setOption(e.dataOption, !0),
                                                $(window).on("resize",
                                                    function() {
                                                        t.reDraw()
                                                    }),
                                            e.mapSelectedCallback && t.mapSelectFuc(t.chart),
                                            e.clickCallback && t.clickFuc(t.chart),
                                            e.hoverCallback && t.hoverFuc(t.chart)
                                        }))
                                },
                                t.setChartOption = function(t) {
                                    e.dataOption = t
                                },
                                t.getChartOption = function() {
                                    return e.dataOption
                                },
                                t.refresh = function(a) {
                                    t.setChartOption(a),
                                        t.chart.setOption(e.dataOption, !0)
                                },
                                t.reDraw = function() {
                                    t.chart = t.echarts.init(t.element, t.theme),
                                        t.chart.setOption(e.dataOption, !0),
                                    e.mapSelectedEvent && t.mapSelectFuc(t.chart)
                                },
                                t.create(),
                                t
                        },
                        base.carousel = function(e) {
                            var t = {};
                            if (e && (t.container = $(e.container) ? $(e.container) : null, e && t.container)) return t.index = 0,
                                t.data = e.data ? e.data: null,
                                t.remoteData = e.remoteData ? e.remoteData: null,
                                t.step = e.step ? e.step: 4,
                                t.interval = !!e.interval && e.interval,
                                t.carouselBody = $(t.container).find(".carousel-inner"),
                                t.setCarousel = function() {
                                    e.setCarouselEvent && e.setCarouselEvent(t)
                                },
                                t.slid = function() {
                                    e.slidEvent && $(t.container).on("slid.bs.carousel",
                                        function() {
                                            e.slidEvent(t)
                                        })
                                },
                                t.slide = function() {
                                    e.slideEvent && $(t.container).on("slide.bs.carousel",
                                        function() {
                                            e.slideEvent(t)
                                        })
                                },
                                t.next = function() {
                                    $(t.container).carousel("next")
                                },
                                t.prev = function() {
                                    $(t.container).carousel("prev")
                                },
                                t.drawCarousel = function() {
                                    e.slideEvent && $(t.container).on("slide.bs.carousel",
                                        function() {
                                            e.slideEvent(t)
                                        }),
                                    t.data && $(t.container).carousel({
                                        interval: t.interval
                                    })
                                },
                                t.create = function() {
                                    return base.setProperty(t.carouselBody, e),
                                        t.slid(),
                                        t.slide(),
                                        t.drawCarousel(),
                                        t.setCarousel(),
                                        t
                                },
                                t.create(),
                                t
                        },
                        base.highCharts = function(e) {
                            var t = {};
                            return t.container = e.container ? e.container: null,
                                t.chartOption = e.chartOption ? e.chartOption: null,
                                t.theme = e.theme ? e.theme: "dark",
                                t.callback = e.callback ? e.callback: null,
                                t.element = null,
                                t.isMain = !e.isMain || e.isMain,
                                t.create = function() {
                                    return t.container && t.chartOption && (t.isMain ? t.element = t.container: (t.element = document.createElement("div"), $(t.container).append(t.element)), base.setProperty(t.element, e), t.callback ? $(t.element).highcharts(t.chartOption, t.callback) : $(t.element).highcharts(t.chartOption)),
                                        t
                                },
                                t.create(),
                                t
                        },
                        base.progress = function(e) {
                            var t = {};
                            return t.element = null,
                                t.container = e.container ? e.container: null,
                                t.data = e.data.replace("/g", "%"),
                                t.data = Number(t.data) ? Number(t.data) : 0,
                                t.animate = !e.animate || e.animate,
                                t.progressColor = e.progressColor ? e.progressColor: "#0298f7",
                                t.bg = e.bg ? e.bg: "#111",
                                t.radius = e.radius ? e.radius: 5,
                                t.label = null,
                                t.height = e.height ? e.height: 9,
                                t.progress = null,
                                t.labelColor = e.labelColor ? e.labelColor: "#fff",
                                t.progressLine = null,
                                t.timer = e.timer ? e.timer: 1e3,
                                t.create = function() {
                                    return $(t.container).css("height", t.height),
                                        $(t.container).css("float", "left"),
                                        $(t.container).html(""),
                                        e.label ? (e.label.show || "undefined" == e.label.show) && t.setLabel() : t.setLabel(),
                                        t.setProgress(),
                                        base.setProperty(t.element, e),
                                        t
                                },
                                t.setLabel = function() {
                                    t.label = document.createElement("div"),
                                        $(t.label).addClass("progressLabel"),
                                        $(t.label).css("text-align", "center"),
                                        $(t.label).css("position", "relative"),
                                        $(t.label).css("height", t.height),
                                        $(t.label).css("z-index", 3),
                                        t.height > 9 ? $(t.label).css("top", t.height - 9) : $(t.label).css("top", -(9 - t.height + 3)),
                                        $(t.label).css("color", t.labelColor),
                                        $(t.label).css("font-size", t.height),
                                        $(t.label).html("0%"),
                                        $(t.container).append(t.label)
                                },
                                t.progressGlass = null,
                                t.setProgressGlass = function() {
                                    t.progressGlass = document.createElement("div"),
                                        $(t.progressGlass).addClass("progressGlass"),
                                        $(t.progressGlass).css("background-color", "rgba(255,255,255,0.35)"),
                                        $(t.progressGlass).css("height", .4 * t.height),
                                        $(t.progressGlass).css("position", "absolute"),
                                        $(t.progressGlass).css("border-radius", t.radius),
                                        $(t.progressGlass).css("left", 2),
                                        $(t.progressGlass).css("right", 2),
                                        $(t.progressGlass).css("top", 1),
                                        $(t.progress).append(t.progressGlass)
                                },
                                t.setProgress = function() {
                                    t.progress = document.createElement("div"),
                                        $(t.progress).css("border-radius", t.radius),
                                        $(t.progress).css("width", "100%"),
                                        $(t.progress).css("position", "relative"),
                                        $(t.progress).css("z-index", 1),
                                        $(t.progress).css("top", -6),
                                        $(t.progress).css("background", t.bg),
                                        $(t.progress).css("padding", 1),
                                        $(t.progress).css("height", t.height),
                                        $(t.progress).css("font-size", "13px"),
                                        $(t.progress).css("box-shadow", "0 0 5px rgba(0,0,0,0.7)"),
                                        $(t.container).append(t.progress),
                                    base.IE8() || t.setProgressGlass(),
                                        t.setProgressLine()
                                },
                                t.clear = function() {
                                    $(t.progressLine).css("width", 0)
                                },
                                t.timeoutFuc = null,
                                t.animate = function() {
                                    if (t.animate) {
                                        $(t.progressLine).css("width", 0);
                                        var e = 0;
                                        t.timeoutFuc = window.setInterval(function() {
                                                e++,
                                                    $(t.label).html(e + "%"),
                                                e >= t.data && window.clearInterval(t.timeoutFuc)
                                            },
                                            t.timer / t.data),
                                            $(t.progressLine).animate({
                                                    width: $(t.progress).width() * (t.data / 100)
                                                },
                                                t.timer)
                                    } else $(t.label).html(t.data + "%"),
                                        $(t.progressLine).css("width", $(t.progress).width() * (t.data / 100))
                                },
                                t.setProgressLine = function() {
                                    if (t.progressLine = document.createElement("div"), $(t.progressLine).addClass("progressLine"), $(t.progressLine).css("border-radius", t.radius), jQuery.isArray(t.progressColor)) {
                                        var e = null,
                                            a = 0,
                                            n = 0;
                                        if ($(t.progressColor).each(function(r, o) {
                                                o.split(":").length > 1 ? (a = n, n = o.split(":")[1]) : (a = n, n = Math.round(100 / t.progressColor.length * (r + 1))),
                                                t.data >= a && t.data < n && (e = o)
                                            }), e) {
                                            var r = e.split(":")[0];
                                            $(t.progressLine).css("background", r),
                                                $(t.progressLine).css("box-shadow", "0 0 15px " + r)
                                        }
                                    } else $(t.progressLine).css("background", t.progressColor);
                                    $(t.progressLine).css("padding", 0),
                                        $(t.progressLine).css("height", "100%"),
                                        $(t.progress).append(t.progressLine),
                                        t.animate()
                                },
                                t.create(),
                                t
                        },
                        base.roundLoader = function(e) {
                            var t = {};
                            return t.container = e.container ? e.container: null,
                                t.time = e.time ? e.time: null,
                                t.showPercentage = !!e.showPercentage && e.showPercentage,
                                t.element = null,
                                t.value = t.value ? t.value: 0,
                                t.create = function() {
                                    if (!base.IE8()) return e && t.container && require(["radialIndicator"],
                                        function() {
                                            base.setProperty(t.element, e),
                                                t.set()
                                        }),
                                        t
                                },
                                t.set = function() {
                                    t.time ? window.setInterval(function() {
                                            t.value < 100 ? t.value = t.value + 1 : (t.value = 0, e.drawEvent && e.drawEvent(t)),
                                                t.draw()
                                        },
                                        t.time / 100) : t.draw()
                                },
                                t.draw = function() {
                                    $(t.container).html(""),
                                        t.element = $(t.container).radialIndicator({
                                            radius: 12,
                                            showPercentage: t.showPercentage,
                                            displayNumber: !1,
                                            barWidth: 2.5,
                                            roundCorner: !0,
                                            barBgColor: "rgba(0,0,0,0)",
                                            barColor: "#20c6fc",
                                            shadowColor: "#20c6fc",
                                            shadowRadius: 5
                                        }).data("radialIndicator"),
                                        t.element.value(t.value)
                                },
                                t.create(),
                                t
                        },
                        base.scroll = function(e) {
                            var t = {};
                            return t.container = e.container ? e.container: null,
                                t.topEvent = e.topEvent ? e.topEvent: null,
                                t.bottomEvent = e.bottomEvent ? e.bottomEvent: null,
                                t.scrollEvent = e.scrollEvent ? e.scrollEvent: null,
                                t.xScroll = !!e.xScroll && e.xScroll,
                                t.callback = e.callback ? e.callback: null,
                                t.scrollOption =e.scrollOption?e.scrollOption:{
                                    mouseWheel: !0,
                                    scrollInertia: 500,
                                    callbacks: {}
                                },
                            e.scrollStartCallback && (t.scrollOption.callbacks.onScrollStart = e.scrollStartCallback),
                            e.scrollCallback && (t.scrollOption.callbacks.onScroll = e.scrollCallback),
                                t.create = function() {
                                    require(["jqScrollbar"],
                                        function() {
                                            t.destroy(),
                                            t.scrollEvent && (t.scrollOption.callbacks.onScroll = function() {
                                                t.scrollEvent(t)
                                            }),
                                            t.bottomEvent && (t.scrollOption.callbacks.onTotalScroll = function() {
                                                t.bottomEvent(t)
                                            }),
                                            t.topEvent && (t.scrollOption.callbacks.onTotalScrollBack = function() {
                                                t.topEvent(t)
                                            }),
                                            t.xScroll && (t.scrollOption.horizontalScroll = t.xScroll),
                                                $(t.container).mCustomScrollbar(t.scrollOption),
                                            t.callback && t.callback(t)
                                        })
                                },
                                t.destroy = function() {
                                    $(t.container).mCustomScrollbar("destroy")
                                },
                                t.disable = function() {
                                    $(t.container).mCustomScrollbar("disable")
                                },
                                t.position = function(e) {
                                    $(t.container).mCustomScrollbar("scrollTo", e)
                                },
                                t.top = function() {
                                    $(t.container).mCustomScrollbar("scrollTo", "top")
                                },
                                t.bottom = function() {
                                    $(t.container).mCustomScrollbar("scrollTo", "bottom")
                                },
                                t.create(),
                                t
                        },
                        base.grid = function(e) {
                            var t = {};
                            return t.container = e.container ? e.container: null,
                                t.table = null,
                                t.ajaxType = e.ajaxType ? e.ajaxType: "get",
                                t.header = null,
                                t.body = null,
                                t.footer = null,
                                t.params = {},
                                t.columns = null,
                                t.gridOption = e.gridOption ? e.gridOption: null,
                                t.pagination = !e.pagination || e.pagination,
                                t.paginationContainer = null,
                                t.paginationNumber = 5,
                                t.url = e.url ? e.url: null,
                                t.data = e.data ? e.data: null,
                                t.pageSize = e.pageSize ? e.pageSize: 10,
                                t.pageNumber = 1,
                                t.callback = e.callback ? e.callback: null,
                                t.total = 0,
                                t.pageCount = 0,
                                t.pageItemOption = {
                                    first: {
                                        type: "first",
                                        title: "首页",
                                        number: 1,
                                        context: "<i class='fa fa-angle-double-left'></i>"
                                    },
                                    previous: {
                                        type: "previous",
                                        title: "上一页",
                                        number: t.pageNumber - 1,
                                        context: "<i class='fa fa-angle-left'></i>"
                                    },
                                    moreLeft: {
                                        type: "moreLeft",
                                        context: "..."
                                    },
                                    moreRight: {
                                        type: "moreRight",
                                        context: "..."
                                    },
                                    next: {
                                        type: "next",
                                        number: t.pageNumber - 1,
                                        title: "下一页",
                                        context: "<i class='fa fa-angle-right'></i>"
                                    },
                                    last: {
                                        type: "last",
                                        number: t.pageCount,
                                        title: "末页",
                                        context: "<i class='fa fa-angle-double-right'></i>"
                                    },
                                    jump: {
                                        type: "jump",
                                        context: "到第<input type='text' class='pageInput form-control'/>页<button style='margin-left:5px' class='btn btn-primary'>确定</button>"
                                    },
                                    page: {
                                        number: null,
                                        type: "page",
                                        context: null,
                                        cls: "fb-page-item"
                                    }
                                },
                                t.create = function() {
                                    return t.container && t.drawTable(),
                                        t
                                },
                                t.drawTable = function() {
                                    0 == $(t.container).children("table").length ? (t.table = document.createElement("table"), base.setProperty(t.table, t.gridOption.grid), $(t.container).append(t.table)) : (t.table = $(t.container).children("table")[0], base.setProperty(t.table, t.gridOption.grid)),
                                        t.drawHeader(),
                                        t.drawBody(),
                                        t.drawFooter(),
                                    t.pagination && t.query({
                                        isPagination: !0
                                    })
                                },
                                t.drawSort = function(e, a) {
                                    var n = "<div class='btn-group'><a class='dropdown-toggle' data-toggle='dropdown'><span>" + a.columnContext + "</span><i class='fa fa-sort-down'></i></a><ul class='dropdown-menu' role='menu'><li><a type='desc'>降序</a></li><li><a type='asc'>升序</a></li><li><a>正常</a></li></ul>";
                                    $(e).html(n),
                                        $(e).find(".dropdown-menu a").unbind("click").on("click",
                                            function() {
                                                switch ($(this).attr("type")) {
                                                    case "desc":
                                                        t.params.sort = a.columnName + "_desc";
                                                        break;
                                                    case "asc":
                                                        t.params.sort = a.columnName + "_asc";
                                                        break;
                                                    default:
                                                        t.params.sort && delete t.params.sort
                                                }
                                                t.pageNumber = 1,
                                                    t.query({
                                                        isPagination: !0
                                                    })
                                            })
                                },
                                t.drawHeader = function() {
                                    0 == $(t.container).children("thead").length && t.gridOption && t.gridOption.columns && t.gridOption.columns.length > 0 && (t.columns = t.gridOption.columns, t.header = document.createElement("thead"), $(t.table).append(t.header), $(t.columns).each(function(e, a) {
                                        var n = document.createElement("tr");
                                        $(t.header).append(n),
                                            $(a).each(function(e, a) {
                                                var r = document.createElement("th");
                                                base.setProperty(r, a),
                                                    a.sort ? t.drawSort(r, a) : $(r).html(a.columnContext),
                                                    $(n).append(r)
                                            })
                                    }))
                                },
                                t.query = function(e) {
                                    $(t.body).html(""),
                                        t.params.pageSize = t.pageSize,
                                        t.params.pageNumber = t.pageNumber,
                                    t.url && base.ajax({
                                        url: t.url,
                                        params: t.params,
                                        type: t.ajaxType,
                                        success: function(a) {
                                            $(t.body).html("");
                                            var n = a.data;
                                            t.total = a.total,
                                                $(n).each(function(e, a) {
                                                    var n = document.createElement("tr");
                                                    $(t.body).append(n),
                                                        $(t.columns[0]).each(function(e, r) {
                                                            var o = document.createElement("td");
                                                            if (t.gridOption.columnDefine[r.columnName]) {
                                                                var l = t.gridOption.columnDefine[r.columnName];
                                                                l.drawEvent && l.drawEvent(a[r.columnName], o)
                                                            } else $(o).html(a[r.columnName]);
                                                            $(n).append(o)
                                                        })
                                                }),
                                            e && e.isPagination && t.drawPagination(),
                                            t.callback && t.callback()
                                        },
                                        beforeSend: function() {
                                            $(t.body).html("<tr><td class='tb-loadContainer' style='height:200px' colspan='" + $(t.table)[0].rows.item(0).cells.length + "'></td></tr>"),
                                                base.loading($(t.body).find(".tb-loadContainer"))
                                        }
                                    })
                                },
                                t.drawBody = function() {
                                    $(t.table).remove("tbody"),
                                        t.body = document.createElement("tbody"),
                                        $(t.table).append(t.body)
                                },
                                t.drawFooter = function() {
                                    $(t.table).remove("tfoot"),
                                        t.footer = document.createElement("tfoot"),
                                        $(t.table).append(t.footer)
                                },
                                t.drawPagination = function() {
                                    t.paginationContainer ? $(t.paginationContainer).html("") : (t.paginationContainer = document.createElement("ul"), $(t.paginationContainer).addClass("fb-grid-pagination"), $(t.container).append(t.paginationContainer)),
                                        t.total % t.pageSize == 0 ? t.pageCount = t.total / t.pageSize: t.pageCount = Math.floor(t.total / t.pageSize) + 1,
                                        t.drawPaginationItem()
                                },
                                t.setActive = function(e) {
                                    $(t.paginationContainer).find(".active").removeClass("active"),
                                        $(e).addClass("active")
                                },
                                t.drawPaginationItem = function() {
                                    if ($(t.paginationContainer).find("li").remove(), t.createPageItem("info"), t.pageCount <= t.paginationNumber) for (var e = 1; e <= t.pageCount; e++) t.createPageItem("page", e);
                                    else if (t.pageNumber < t.paginationNumber) {
                                        for (var e = 1; e <= t.paginationNumber; e++) t.createPageItem("page", e);
                                        t.createPageItem("moreRight"),
                                            t.createPageItem("next", t.pageNumber + 1),
                                            t.createPageItem("last", t.pageCount)
                                    } else if (t.pageNumber > t.pageCount - t.paginationNumber) {
                                        t.createPageItem("first", 1),
                                            t.createPageItem("previous", t.pageNumber - 1),
                                            t.createPageItem("moreLeft");
                                        for (var e = t.pageCount - t.paginationNumber; e <= t.pageCount; e++) t.createPageItem("page", e)
                                    } else {
                                        t.createPageItem("first", 1),
                                            t.createPageItem("previous", t.pageNumber - 1),
                                            t.createPageItem("moreLeft");
                                        for (var e = t.pageNumber - Math.floor(t.paginationNumber / 2); e <= t.pageNumber + Math.floor(t.paginationNumber / 2); e++) t.createPageItem("page", e);
                                        t.createPageItem("moreRight"),
                                            t.createPageItem("next", t.pageNumber + 1),
                                            t.createPageItem("last", t.pageCount)
                                    }
                                    t.createPageItem("jump")
                                },
                                t.createPageItem = function(e, a) {
                                    var n = document.createElement("li");
                                    switch ($(t.paginationContainer).append(n), $(n).attr("type", e), e) {
                                        case "info":
                                            $(n).html("<div style='letter-spacing:0.5px;padding:0 20px;font-size:13px;'>共" + t.pageCount + "页(" + t.total + "条记录)</div>");
                                            break;
                                        case "first":
                                            $(n).html("<i class='fa fa-angle-double-left'></i>"),
                                                $(n).attr("title", "首页"),
                                                $(n).on("click",
                                                    function() {
                                                        t.pageNumber = a,
                                                            t.drawPaginationItem(),
                                                            t.query()
                                                    });
                                            break;
                                        case "previous":
                                            $(n).html("<i class='fa fa-angle-left'></i>"),
                                                $(n).attr("title", "上一页"),
                                                $(n).on("click",
                                                    function() {
                                                        t.pageNumber = a,
                                                            t.drawPaginationItem(),
                                                            t.query()
                                                    });
                                            break;
                                        case "next":
                                            $(n).html("<i class='fa fa-angle-right'></i>"),
                                                $(n).attr("title", "下一页"),
                                                $(n).on("click",
                                                    function() {
                                                        t.pageNumber = a,
                                                            t.drawPaginationItem(),
                                                            t.query()
                                                    });
                                            break;
                                        case "last":
                                            $(n).html("<i class='fa fa-angle-double-right'></i>"),
                                                $(n).attr("title", "末页"),
                                                $(n).on("click",
                                                    function() {
                                                        t.pageNumber = a,
                                                            t.drawPaginationItem(),
                                                            t.query()
                                                    });
                                            break;
                                        case "page":
                                            $(n).addClass("fb-page-item"),
                                                $(n).html(a),
                                            t.pageNumber == a && $(n).addClass("active"),
                                                $(n).on("click",
                                                    function() {
                                                        t.pageNumber = a,
                                                            t.drawPaginationItem(),
                                                            t.query()
                                                    });
                                            break;
                                        case "moreLeft":
                                        case "moreRight":
                                            $(n).html("...");
                                            break;
                                        case "jump":
                                            $(n).html("到第<input type='number' class='pageInput form-control'/>页<button style='margin-left:5px' class='btn btn-primary'>确定</button>"),
                                                $(n).find("button").on("click",
                                                    function() {
                                                        var e = $(n).find("input").val();
                                                        e && (e < 1 ? (e = 1, $(n).find("input").val(e)) : e > t.pageCount && (e = t.pageCount), t.pageNumber = e, t.query({
                                                            isPagination: !0
                                                        }))
                                                    })
                                    }
                                },
                                t.pageTo = function(e) {
                                    t.pageNumber = e,
                                        t.drawPaginationItem(),
                                        t.query()
                                },
                                t.reset = function() {
                                    t.pageNumber = 1,
                                        t.pageSize = e.pageSize ? e.pageSize: t.pageSize,
                                        t.params = {},
                                        t.query({
                                            isPagination: !0
                                        })
                                },
                                t.search = function(e) {
                                    t.pageNumber = 1,
                                        t.pageSize = e.pageSize ? e.pageSize: t.pageSize,
                                    e && (t.params = e.params ? e.params: t.params),
                                        t.query({
                                            isPagination: !0
                                        })
                                },
                                t.addRow = function(e, a) {
                                    var n = document.createElement("tr");
                                    $(t.body).append(n),
                                        $(e).each(function(e, t) {
                                            var a = document.createElement("td");
                                            a.html(t),
                                                $(n).append(a)
                                        }),
                                    a && a(t)
                                },
                                t.deleteRow = function(e) {
                                    $(e).parents("tr").remove()
                                },
                                t.create(),
                                t
                        },
                        base.getCR = function(e, t) {
                            var a = null,
                                n = "";
                            return "string" == (typeof e).toLowerCase() ? (a = $("input[name='" + e + "']:checked"), t ? ($(a).each(function(e, t) {
                                n += e == $(a).length - 1 ? $(t).val() : $(t).val() + ","
                            }), n) : a) : (a = $("input[name='" + $(e).attr("name") + "']:checked"), t ? void $(a).each(function(e, t) {
                                n += e == $(a).length - 1 ? $(t).val() : $(t).val() + ","
                            }) : a)
                        },
                        base.getChecks = function(e) {
                            var t = $("input[name='" + e + "']"),
                                a = {};
                            return a.val = [],
                                a.obj = [],
                                $(t).each(function(e, t) {
                                    $(t).is(":checked") && (a.val.push($(t).val()), a.obj.push(t))
                                }),
                                a
                        },
                        base.setChecks = function(e, t) {
                            var a = $("input[name='" + t + "']");
                            if ($(a).each(function(e, t) {
                                    $(t).prop("checked", !1)
                                }), e) if ("object" != typeof e.toLowerCase()) $(a).filter("[value='" + e + "']").prop("checked", !0);
                            else for (var n = 0; n < e.length; n++) $(a).filter("[value='" + e[n] + "']").prop("checked", !0)
                        },
                        base.selectAll = function(e, t, a, n) {
                            if (n) {
                                var r = $(e).next(),
                                    o = $(t).next();
                                $(r).unbind("click").on("click",
                                    function() {
                                        $(e).click(),
                                            $(e).is(":checked") ? ($(t).not(":disabled").prop("checked", !0), $(r).attr("class", $(r).attr("activeicon")), $(r).css("color", base.checkboxColor[0]), $(o).attr("class", $(o).attr("activeicon")), $(o).css("color", base.checkboxColor[0])) : ($(t).not(":disabled").prop("checked", !1), $(r).attr("class", $(o).attr("icon")), $(r).css("color", base.checkboxColor[1]), $(o).attr("class", $(o).attr("icon")), $(o).css("color", base.checkboxColor[1])),
                                        a && a(e, t)
                                    }),
                                    $(o).unbind("click").on("click",
                                        function() {
                                            var n = $(this);
                                            n.prev().click();
                                            var o = $(r).attr("activeicon"),
                                                l = $(r).attr("icon");
                                            n.prev().is(":checked") ? (n.attr("class", o), n.css("color", base.checkboxColor[0])) : (n.attr("class", l), n.css("color", base.checkboxColor[1])),
                                                $(t).filter(":checked").length == $(t).length ? ($(e).prop("checked", !0), $(r).css("color", base.checkboxColor[0]), $(r).attr("class", o)) : ($(e).prop("checked", !1), $(r).attr("class", l), $(r).css("color", base.checkboxColor[1])),
                                            a && a(e, t)
                                        })
                            }
                            $(e).unbind("click").on("click",
                                function() {
                                    $(this).is(":checked") ? ($(t).not(":disabled").prop("checked", !0), n && ($(e).next().attr("class", $(r).attr("activeicon")), $(t).next().attr("class", $(r).attr("activeicon")))) : ($(t).not(":disabled").prop("checked", !1), n && ($(e).next().attr("class", $(r).attr("icon")), $(t).next().attr("class", $(r).attr("icon")))),
                                    a && a(e, t)
                                }),
                                $(t).unbind("click").on("click",
                                    function() {
                                        if (n) {
                                            var o = $(this).next();
                                            $(this).is(":checked") ? o.attr("class", o.attr("activeicon")) : o.attr("class", o.attr("icon"))
                                        }
                                        $(t).filter(":checked").length == $(t).length ? ($(e).prop("checked", !0), n && $(e).next().attr("class", $(r).attr("activeicon"))) : ($(e).prop("checked", !1), $(e).next().attr("class", $(r).attr("icon"))),
                                        a && a(e, t)
                                    })
                        },
                        base.clearLastCharacter = function(e) {
                            return e = e.substring(0, e.length - 1)
                        },
                        base.formEntity = function() {
                            var e = this;
                            return e.init = function(e, t, a, n) {
                                n = n ? n: "--";
                                for (var r in e) {
                                    var o = e[r],
                                        l = $(t).find("[name='" + r + "']");
                                    if (0 != l.length) {
                                        var i = l.attr("type");
                                        if (i && (i = i.toLowerCase()), a && a[r]) a[r](l, o);
                                        else switch (i) {
                                            case "checkbox":
                                            case "radio":
                                                base.setChecks(o, l.attr("name"));
                                                break;
                                            case "hidden":
                                            case "text":
                                                o && "" != o ? l.val(o) : l.val("");
                                                break;
                                            default:
                                                var c = l[0].tagName.toLowerCase();
                                                switch (c) {
                                                    case "select":
                                                        o && "" != o && l.val(o);
                                                        break;
                                                    case "textarea":
                                                        o && "" != o ? l.val(o) : l.val("");
                                                        break;
                                                    case "input":
                                                        o && "" != o ? l.val(o) : l.val("");
                                                        break;
                                                    default:
                                                        o && "" != o ? l.text(o) : l.text(n)
                                                }
                                        }
                                    }
                                }
                            },
                                e
                        },
                        base.form = new base.formEntity,
                        base.form.validateFileSize = function(e, t) {
                            var a = $(e)[0],
                                n = a.files[0].fileSize ? a.files[0].fileSize: a.files[0].size;
                            return ! (Math.ceil(n / 1024) > t)
                        },
                        base.form.getFileName = function(e) {
                            var t = $(e).val();
                            return t.replace(/.*(\/|\\)/, "")
                        },
                        base.form.getFileExtname = function(e) {
                            var t = ($(e).val(), base.form.getFileName(e));
                            return /[.]/.exec(t) ? /[^.]+$/.exec(t.toLowerCase()) : ""
                        },
                        base.form.validateFileExtname = function(e, t) {
                            var a = base.form.getFileExtname(e),
                                n = !1;
                            return $(t.split(",")).each(function(e, t) {
                                if (t == a) return n = !0,
                                    !1
                            }),
                                !!n
                        },
                        base.form.autoForm = function(e) {
                            var t = {};
                            if (t.container = e.container ? e.container: null, t.data = e.data ? e.data: null, t.columnSize = e.columnSize ? e.columnSize: 3, t.layoutType = e.layoutType ? e.layoutType: "table", t.layoutContainer = null, t.layoutContainerBody = null, t.layoutOption = e.layoutOption ? e.layoutOption: null, t.rowOption = e.rowOption ? e.rowOption: null, t.columnOption = e.columnOption ? e.columnOption: null, t.buttons = e.buttons ? e.buttons: null, t.container && t.data && 0 != t.data.length) return t.create = function() {
                                return "table" == t.layoutType ? t.createTable() : t.createDivGroup(),
                                t.buttons && t.createButtons(),
                                    t
                            },
                                t.createButtons = function() {
                                    var e = document.createElement("div");
                                    $(e).css("clear", "over"),
                                        $(e).css("margin", "5px"),
                                        $(e).css("float", "right"),
                                        $(t.buttons).each(function(t, a) {
                                            switch (a.container = e, a.type) {
                                                case "submit":
                                                    a.cls = "btn btn-info",
                                                        a.label = "提交",
                                                        a.clickEvent = function() {
                                                            base.form.reset($(e).parents("form"))
                                                        };
                                                    break;
                                                case "reset":
                                                    a.cls = "btn btn-warning",
                                                        a.label = "重置",
                                                        a.clickEvent = function() {
                                                            base.form.reset($(e).parents("form"))
                                                        }
                                            }
                                            base.form.button(a)
                                        }),
                                        $(t.container).append(e)
                                },
                                t.createTable = function() {
                                    t.layoutContainer = document.createElement("table"),
                                    t.layoutOption && base.setProperty(t.layoutContainer, t.layoutOption),
                                        $(t.container).append(t.layoutContainer),
                                        t.layoutContainerBody = document.createElement("tbody"),
                                        $(t.layoutContainer).append(t.layoutContainerBody);
                                    var e = 0,
                                        a = null;
                                    $(t.data).each(function(n, r) {
                                        var o = 1;
                                        r.columnSize ? r.columnSize > t.columnSize ? (e += t.columnSize, o = t.columnSize) : r.columnSize <= 0 ? (e++, o = 1) : (e += r.columnSize, o = r.columnSize) : e++,
                                            e > t.columnSize ? (e = o, a = document.createElement("tr"), t.rowOption && base.setProperty(a, t.rowOption), t.layoutContainerBody.append(a), t.createColumn(a, r, o)) : 1 == e ? (a = document.createElement("tr"), t.rowOption && base.setProperty(a, t.rowOption), t.layoutContainerBody.append(a), t.createColumn(a, r, o)) : t.createColumn(a, r, o)
                                    }),
                                        t.autoFill()
                                },
                                t.autoFill = function() {
                                    var e = t.layoutContainer.rows;
                                    $(e).each(function(e, a) {
                                        var n = a.cells,
                                            r = 0;
                                        if ($(n).each(function(e, t) {
                                                r += Number($(t).attr("colspan") ? $(t).attr("colspan") : 1)
                                            }), r < 2 * t.columnSize) for (var o = 0; o < 2 * t.columnSize - r; o++) if (o % 2 == 0) {
                                            var l = $("<td></td>");
                                            t.columnOption && t.columnOption.label && base.setProperty(l, t.columnOption.label),
                                                $(a).append(l)
                                        } else {
                                            var i = $("<td></td>");
                                            t.columnOption && t.columnOption.content && base.setProperty(i, t.columnOption.content),
                                                $(a).append(i)
                                        }
                                    })
                                },
                                t.createColumn = function(e, a, n) {
                                    var r = document.createElement("td");
                                    t.columnOption && t.columnOption.label && base.setProperty(r, t.columnOption.label),
                                        $(e).append(r),
                                    a.label && (a.role && a.role.required ? $(r).html("<span style='font-size:15px;color:red'>*</span>" + a.label) : $(r).text(a.label));
                                    var o = document.createElement("td");
                                    t.columnOption && t.columnOption.content && base.setProperty(o, t.columnOption.content),
                                    n > 1 && $(o).attr("colspan", 2 * n - 1),
                                        $(e).append(o),
                                        a.container = o,
                                        base.form.element(a)
                                },
                                t.createElementToDivGroup = function() {},
                                t.createElementToDiv = function() {},
                                t.create(),
                                t
                        },
                        base.form.filterBox = function(e) {
                            var t = {};
                            return t.data = e.data ? e.data: null,
                                t.container = e.container ? e.container: null,
                                t.callback = e.callback ? e.callback: null,
                                t.leftBox = null,
                                t.rightBox = null,
                                t.leftBoxContainer = null,
                                t.rightBoxContainer = null,
                                t.handlerBox = null,
                                t.handlerBoxContainer = null,
                                t.handlerWidth = 50,
                                t.boxMinWidth = 150,
                                t.shadow = 0 != e.shadow,
                                t.height = e.height ? e.height: $(t.container).height(),
                                t.unique = 0 != e.unique,
                                t.isTree = 0 != e.isTree,
                                t.tree = null,
                                t.treeNode = null,
                                t.resultData = [],
                                t.url = e.url ? e.url: null,
                                t.params = e.params ? e.params: null,
                                t.type = e.type ? e.type: "get",
                                t.create = function() {
                                    return t.createLeftBox(),
                                        t.createHandler(),
                                        t.createRightBox(),
                                        t
                                },
                                t.treeContainerId = base.getRandom(1e3, 9999) + "filterBoxTree",
                                t.createLeftBox = function() {
                                    var e = ($(t.container).width() - t.handlerWidth) / 2;
                                    e < t.boxMinWidth && (e = t.boxMinWidth),
                                        t.leftBox = document.createElement("div"),
                                        $(t.leftBox).css("float", "left"),
                                        $(t.leftBox).css("width", e),
                                        $(t.leftBox).css("padding", "10px"),
                                        $(t.container).append(t.leftBox),
                                        t.leftBoxContainer = document.createElement("div"),
                                        $(t.leftBoxContainer).attr("id", t.treeContainerId),
                                        $(t.leftBoxContainer).css("height", t.height),
                                        $(t.leftBoxContainer).css("overflow", "auto"),
                                        $(t.leftBoxContainer).css("padding", "5px"),
                                    t.shadow && $(t.leftBoxContainer).css("box-shadow", "0 0 10px #ddd inset"),
                                        $(t.leftBoxContainer).css("border", "1px solid #ccc"),
                                        $(t.leftBox).append(t.leftBoxContainer),
                                        t.createLeftItems()
                                },
                                t.treeClickEvent = function(e, a, n) {
                                    t.treeNode = n
                                },
                                t.createLeftItems = function() {
                                    $(t.leftBoxContainer).addClass("ztree"),
                                        t.url ? base.ajax({
                                            url: t.url,
                                            type: t.type,
                                            params: t.params,
                                            success: function(e) {
                                                t.tree = base.tree({
                                                    container: $(t.leftBoxContainer),
                                                    data: e,
                                                    setting: {
                                                        data: {
                                                            simpleData: {
                                                                enable: !0
                                                            }
                                                        },
                                                        callback: {
                                                            onClick: t.treeClickEvent
                                                        }
                                                    }
                                                })
                                            }
                                        }) : t.data && t.data.length > 0 && (t.tree = base.tree({
                                            container: $(t.leftBoxContainer),
                                            data: t.data,
                                            setting: {
                                                data: {
                                                    simpleData: {
                                                        enable: !0
                                                    }
                                                },
                                                callback: {
                                                    onClick: t.treeClickEvent
                                                }
                                            }
                                        }))
                                },
                                t.createRightBox = function() {
                                    var e = ($(t.container).width() - t.handlerWidth) / 2;
                                    e < t.boxMinWidth && (e = t.boxMinWidth),
                                        t.rightBox = document.createElement("div"),
                                        $(t.rightBox).css("float", "left"),
                                        $(t.rightBox).css("width", e),
                                        $(t.rightBox).css("padding", "10px"),
                                        $(t.container).append(t.rightBox),
                                        t.rightBoxContainer = document.createElement("div"),
                                        $(t.rightBoxContainer).css("height", t.height),
                                    t.shadow && $(t.rightBoxContainer).css("box-shadow", "0 0 10px #ddd inset"),
                                        $(t.rightBoxContainer).css("overflow", "auto"),
                                        $(t.rightBoxContainer).css("padding", "0px 5px"),
                                        $(t.rightBoxContainer).css("border", "1px solid #ccc"),
                                        $(t.rightBox).append(t.rightBoxContainer)
                                },
                                t.createHandler = function() {
                                    t.handlerBox = document.createElement("div"),
                                        $(t.handlerBox).css("float", "left"),
                                        $(t.handlerBox).css("width", t.handlerWidth),
                                        $(t.handlerBox).css("height", t.height + 20),
                                        $(t.handlerBox).css("padding", "10px 0"),
                                        $(t.handlerBox).css("display", "table"),
                                        $(t.handlerBox).css("text-align", "center"),
                                        $(t.container).append(t.handlerBox),
                                        t.handlerBoxContainer = document.createElement("div"),
                                        $(t.handlerBoxContainer).css("width", t.handlerWidth),
                                        $(t.handlerBoxContainer).css("vertical-align", "middle"),
                                        $(t.handlerBoxContainer).css("display", "table-cell"),
                                        base.form.button({
                                            container: t.handlerBoxContainer,
                                            icon: "fa fa-angle-right",
                                            iconStyle: "font-size:22px",
                                            style: "margin-bottom:10px",
                                            attr: [{
                                                name: "title",
                                                value: "添加"
                                            }],
                                            clickEvent: function() {
                                                t.add()
                                            }
                                        }),
                                        base.form.button({
                                            container: t.handlerBoxContainer,
                                            icon: "fa fa-angle-left",
                                            iconStyle: "font-size:22px",
                                            attr: [{
                                                name: "title",
                                                value: "移除"
                                            }],
                                            style: "margin-bottom:10px",
                                            clickEvent: function() {
                                                t.remove()
                                            }
                                        }),
                                        $(t.handlerBox).append(t.handlerBoxContainer)
                                },
                                t.getData = function() {
                                    return t.resultData
                                },
                                t.createResultItem = function() {
                                    if (!t.treeNode) return base.alert("请选择添加项"),
                                        !1;
                                    if (t.checkRepeat()) base.alert("不能重复添加“<span style='padding:0 5px;color:#00a7ed'>" + t.treeNode.name + "</span>”！");
                                    else {
                                        var e = document.createElement("span");
                                        $(e).html(t.treeNode.name),
                                            $(e).css("cursor", "pointer"),
                                            $(e).css("background", "#f2f2f2"),
                                            $(e).css("padding", "5px 15px"),
                                            $(e).css("border", "1px solid #ddd"),
                                            $(e).css("margin", "5px 5px 5px 0"),
                                            $(e).css("float", "left"),
                                            $(e).attr("treeId", t.treeNode.id),
                                            $(e).on("click",
                                                function() {
                                                    $(t.rightBoxContainer).children().css("background", "#f2f2f2"),
                                                        $(t.rightBoxContainer).children().css("border", "1px solid #ddd"),
                                                        $(t.rightBoxContainer).children().removeClass("active"),
                                                        $(this).addClass("active"),
                                                        $(this).css("background", "#c9f2fe"),
                                                        $(this).css("border", "1px solid #63c9e7")
                                                }),
                                            $(e).on("mouseover",
                                                function() {}),
                                            $(e).on("mouseout",
                                                function() {}),
                                            $(t.rightBoxContainer).append(e),
                                            t.resultData.push(t.treeNode)
                                    }
                                },
                                t.checkRepeat = function() {
                                    var e = !1;
                                    return $(t.resultData).each(function(a, n) {
                                        if (t.treeNode.id == n.id) return e = !0,
                                            !1
                                    }),
                                        e
                                },
                                t.deleteNodeData = function(e) {
                                    var a = $(e).attr("treeId");
                                    $(t.resultData).each(function(e, n) {
                                        if (a == n.id) return t.resultData.splice(e, 1),
                                            !1
                                    })
                                },
                                t.add = function() {
                                    t.createResultItem()
                                },
                                t.remove = function() {
                                    var e = $(t.rightBoxContainer).children(".active");
                                    return 0 == e.length ? (base.alert("请选择删除项"), !1) : (t.deleteNodeData(e), void e.remove())
                                },
                                t.create(),
                                t
                        },
                        base.form.checkboxSkin = function(e) {
                            var t = {};
                            return t.checkbox = e.checkbox ? e.checkbox: null,
                                t.iconSize = e.iconSize ? e.iconSize: 18,
                                t.icon = e.skinIcon ? e.skinIcon: "fa fa-square-o",
                                t.activeIcon = e.activeIcon ? e.activeIcon: "fa fa-check-square",
                                t.create = function() {
                                    $(t.checkbox).each(function(e, a) {
                                        if ($(a).hide(), "checkboxicon" != $(a).next().attr("type")) if ($(a).is(":checked")) {
                                            var n = "<i type='checkboxicon' style='color:" + base.checkboxColor[0] + ";cursor:pointer;font-size:" + t.iconSize + "px' val='" + $(a).val() + "' icon='" + t.icon + "' activeicon='" + t.activeIcon + "' class='" + t.activeIcon + "'></i>";
                                            $(a).after(n)
                                        } else $(a).after("<i type='checkboxicon' style='color:" + base.checkboxColor[1] + ";cursor:pointer;font-size:" + t.iconSize + "px' val='" + $(a).val() + "' icon='" + t.icon + "' activeicon='" + t.activeIcon + "' class='" + t.icon + "'></i>");
                                        else {
                                            var r = $(a).next();
                                            $(a).is(":checked") ? (r.attr("class", r.attr("activeicon")), r.css("color", base.checkboxColor[0])) : (r.attr("class", r.attr("icon")), r.css("color", base.checkboxColor[1]))
                                        }
                                    })
                                },
                                t.create(),
                                t
                        },
                        base.form.element = function(e) {
                            var t = {};
                            return t.container = e.container ? e.container: null,
                                t.type = e.type ? e.type: "text",
                                t.name = e.name ? e.name: null,
                                t.id = e.id ? e.id: null,
                                t.role = e.role ? e.role: null,
                                t.readonly = 1 == e.readonly,
                                t.disabled = 1 == e.disabled,
                                t.data = e ? e: null,
                                t.keyDefs = e.keyDefs ? e.keyDefs: null,
                                t.element = null,
                                t.create = function() {
                                    return t.createElement(),
                                        t
                                },
                                t.createElement = function(e) {
                                    var a = t.data,
                                        n = "key",
                                        r = "value";
                                    switch (t.keyDefs && t.keyDefs.key && (n = t.keyDefs.key), t.keyDefs && t.keyDefs.value && (r = t.keyDefs.value), t.type) {
                                        case "text":
                                            t.element = document.createElement("input"),
                                                $(t.element).addClass("form-control"),
                                                base.setProperty(t.element, a),
                                                $(t.element).attr("type", t.type),
                                            a[r] && $(t.element).val(a[r]);
                                            break;
                                        case "hidden":
                                            t.element = document.createElement("input"),
                                                base.setProperty(t.element, a),
                                                $(t.element).attr("type", t.type),
                                            a[r] && $(t.element).val(a[r]);
                                            break;
                                        case "file":
                                            t.element = document.createElement("input"),
                                                base.setProperty(t.element, a),
                                                $(t.element).attr("type", "file"),
                                                $(t.element).css("display", "none");
                                            var o = base.form.button({
                                                container: t.container,
                                                label: a.label ? a.label: "文件",
                                                attr: [{
                                                    name: "onclick",
                                                    value: "return false;"
                                                }],
                                                clickEvent: function() {
                                                    return $(t.element).click(),
                                                        !1
                                                }
                                            });
                                            t.readonly && $(t.element).attr("readonly", !0),
                                            t.disabled && ($(t.element).attr("disabled", !0), $(o.element).attr("disabled", !0)),
                                                t.element.addEventListener("change",
                                                    function() {
                                                        $(t.element).replaceWith("<input type='file' id='" + t.id + "' name='" + t.name + "' style='display:none;'/>")
                                                    });
                                            break;
                                        case "date":
                                            t.element = document.createElement("input"),
                                                base.setProperty(t.element, a),
                                                $(t.element).attr("type", "text"),
                                                $(t.element).addClass("form-control"),
                                                $(t.element).attr("readonly", !0),
                                                base.form.date({
                                                    element: t.element,
                                                    isTime: 1 == a.isTime,
                                                    dateOption: a.dateOption ? a.dateOption: null
                                                }),
                                            a[r] && $(t.element).val(a[r]);
                                            break;
                                        case "select":
                                            t.element = document.createElement("select"),
                                                base.setProperty(t.element, a),
                                                $(t.element).addClass("form-control"),
                                                $(t.element).append("<option value='*'>*请选择*</option>");
                                            var l = function(e, a) {
                                                $(e).each(function(e, a) {
                                                    $(t.element).append("<option value='" + a[r] + "'>" + a[n] + "</option>"),
                                                    a.selected && $(t.element).val(a[r])
                                                }),
                                                a.changeEvent && $(t.element).on("change",
                                                    function() {
                                                        a.changeEvent(t)
                                                    })
                                            };
                                            a.data && a.data.length > 0 ? l(a.data, a) : a.ajax && base.ajax({
                                                url: a.ajax.url,
                                                params: a.ajax.params ? a.ajax.params: null,
                                                type: a.ajax.type ? a.ajax.type: "get",
                                                success: function(e) {
                                                    e && e.length > 0 && l(e, a),
                                                    e.data && e.data.length > 0 && l(e.data, a)
                                                }
                                            });
                                            break;
                                        case "textarea":
                                            t.element = document.createElement("textarea"),
                                                base.setProperty(t.element, a),
                                                $(t.element).addClass("form-control"),
                                            a[r] && $(t.element).val(a[r]);
                                            break;
                                        case "radio":
                                            var l = function(e, a) {
                                                var o = null;
                                                a.role && (o = " role='" + JSON.stringify(t.role).replace(/"/g, "") + "'"),
                                                    $(e).each(function(l, i) {
                                                        var c = $("<input type='radio' style='margin-right:4px;' name='" + a.name + "' value='" + i[r] + "'" + o + "/>");
                                                        $(t.container).append(c),
                                                            $(t.container).append(i[n]),
                                                            base.setProperty(c, e),
                                                        i.selected && $(c).prop("checked", !0),
                                                        t.readonly && $(c).attr("readonly", !0),
                                                        t.disabled && $(c).attr("disabled", !0)
                                                    }),
                                                a.clickEvent && $(container).find("input[type='radio']").on("click",
                                                    function() {
                                                        a.clickEvent(t)
                                                    })
                                            };
                                            a.data && a.data.length > 0 ? l(a.data, a) : a.ajax && base.ajax({
                                                url: a.ajax.url,
                                                params: a.ajax.params ? a.ajax.params: null,
                                                type: a.ajax.type ? a.ajax.type: "get",
                                                success: function(e) {
                                                    e && e.length > 0 && l(e, a)
                                                }
                                            });
                                            break;
                                        case "checkbox":
                                            var l = function(e, a) {
                                                var o = null;
                                                a.role && (o = " role='" + JSON.stringify(t.role).replace(/"/g, "") + "'"),
                                                    $(e).each(function(l, i) {
                                                        var c = $("<input type='checkbox' style='margin-right:3px;' name='" + a.name + "' value='" + i[r] + "'" + o + "/>");
                                                        base.setProperty(c, e),
                                                            $(t.container).append(c),
                                                            $(t.container).append("<span style='margin-right:20px;'>" + i[n] + "</span>"),
                                                        i.selected && $(c).prop("checked", !0),
                                                        t.readonly && $(c).attr("readonly", !0),
                                                        t.disabled && $(c).attr("disabled", !0)
                                                    }),
                                                a.clickEvent && $(container).find("input[type='radio']").on("click",
                                                    function() {
                                                        a.clickEvent(t)
                                                    })
                                            };
                                            a.data && a.data.length > 0 ? l(a.data, a) : a.ajax && base.ajax({
                                                url: a.ajax.url,
                                                params: a.ajax.params ? a.ajax.params: null,
                                                type: a.ajax.type ? a.ajax.type: "get",
                                                success: function(e) {
                                                    e && e.length > 0 && l(e, a),
                                                    e.data && e.data.length > 0 && l(e.data, a)
                                                }
                                            });
                                            break;
                                        case "button":
                                            ;
                                            t.data.container = t.container,
                                                t.element = base.form.button(t.data).element;
                                            break;
                                        case "view":
                                            $(t.container).text(a[r])
                                    }
                                    t.element && (t.role && $(t.element).attr("role", JSON.stringify(t.role).replace(/"/g, "")), t.readonly && $(t.element).attr("readonly", !0), t.disabled && $(t.element).attr("disabled", !0), $(t.container).append(t.element))
                                },
                                t.create(),
                                t
                        },
                        base.form.fileUpload = function(e) {
                            var t = {};
                            t.url = e.url ? e.url: null,
                                t.success = e.success ? e.success: null,
                                t.error = e.error ? e.error: null,
                                t.callback = e.callback ? e.callback: null,
                                t.id = e.id ? e.id: null,
                                t.params = e.params ? e.params: null,
                                t.create = function() {
                                    t.url && t.id && require(["fileUpload"],
                                        function() {
                                            var e = "jUploadForm" + t.id,
                                                a = $("#" + e);
                                            a.length > 0 && a.remove(),
                                                jQuery.ajaxFileUpload({
                                                    url: t.url,
                                                    secureuri: !1,
                                                    fileElementId: t.id,
                                                    dataType: "json",
                                                    data: t.params,
                                                    success: function(e, a) {
                                                        t.success && t.success(e, a),
                                                            t.clear()
                                                    },
                                                    error: function(e, a, n) {
                                                        t.callback && t.callback(e.status, n),
                                                        t.error && t.error(e, a, n),
                                                            t.clear()
                                                    }
                                                })
                                        })
                                },
                                t.clear = function() {
                                    var e = $(t.id);
                                    e.after(e.clone().val("")),
                                        e.remove()
                                },
                                t.create()
                        },
                        base.form.paramsToString = function(e) {
                            var t = "?",
                                a = 0;
                            for (var n in e) t += 0 == a ? n + "=" + e[n] : "&" + n + "=" + e[n],
                                a++;
                            return t
                        },
                        base.form.download = function(e) {
                            var t = {};
                            return t.url = e.url ? e.url: null,
                                t.params = e.url ? e.params: null,
                                t.download = function() {
                                    $.ajax({
                                        url: t.url + base.form.paramsToString(t.params),
                                        type: "post",
                                        data: t.params,
                                        dataType: "json",
                                        contentType: "application/json;charset=UTF-8",
                                        success: function(e) {}
                                    })
                                },
                                t.download(),
                                t
                        },
                        base.form.getParams = function(e, t) {
                            var a = null;
                            a = t ? "": {};
                            var n = {};
                            if (n.form = e ? e: null, n.form && $(n.form)[0]) for (var r = $(n.form)[0].elements, o = 0, l = r.length; o < l; o++) {
                                var i = r[o],
                                    c = $(i).attr("name");
                                if (c) if ("input" == i.tagName.toLowerCase()) if ($(i).attr("type")) if ("checkbox" == $(i).attr("type").toLowerCase() || "radio" == $(i).attr("type").toLowerCase()) {
                                    if (a[c]) continue;
                                    var s = "";
                                    $(n.form).find("input[name='" + c + "']").each(function(e, t) {
                                        $(t).is(":checked") && (s += $(t).val() + ",")
                                    }),
                                    "" != s && (s = base.clearLastCharacter(s), t ? a += "" == a ? c + "=" + s: "&" + c + "=" + s: a[c] = s)
                                } else {
                                    if ("button" == $(i).attr("type").toLowerCase()) continue;
                                    $(i).val() && (t ? a += "" == a ? c + "=" + encodeURIComponent($(i).val()) : "&" + c + "=" + encodeURIComponent($(i).val()) : a[c] = $(i).val())
                                } else $(i).val() && (t ? a += "" == a ? c + "=" + encodeURIComponent($(i).val()) : "&" + c + "=" + encodeURIComponent($(i).val()) : a[c] = $(i).val());
                                else {
                                    if ("select" == i.tagName.toLowerCase() && "*" == $(i).val()) continue;
                                    if ("button" == i.tagName.toLowerCase()) continue;
                                    t ? a += "" == a ? c + "=" + encodeURIComponent($(i).val()) : "&" + c + "=" + encodeURIComponent($(i).val()) : a[c] = $(i).val()
                                }
                            }
                            return a
                        },
                        base.form.validate = function(option) {
                            var self = {};
                            return self.form = option.form ? option.form: null,
                                self.roles = option.roles ? option.roles: null,
                                self.promptType = option.promptType ? option.promptType: "follow",
                                self.checkAll = 1 == option.checkAll,
                                self.errorMsg = [],
                                self.isPass = !0,
                                self.tipPosition = option.tipPosition ? option.tipPosition: "bottom",
                                self.passCallback = option.passCallback ? option.passCallback: null,
                                self.notPassCallback = option.notPassCallback ? option.notPassCallback: null,
                                self.error = function(e, t, a) {
                                    switch (self.promptType) {
                                        case "top":
                                            $(a).attr("type") ? "checkbox" == $(a).attr("type").toLowerCase() || "radio" == $(a).attr("type").toLowerCase() || $(a).addClass("errorStyle") : $(a).addClass("errorStyle");
                                            break;
                                        case "tip":
                                            $(a).attr("type") && ("checkbox" == $(a).attr("type").toLowerCase() || "radio" == $(a).attr("type").toLowerCase()) ? ($(a).parent().attr("data-toggle", "tooltip"), $(a).parent().attr("data-placement", self.tipPosition), $(a).parent().attr("data-trigger", "manual"), $(a).parent().attr("title", t)) : ($(a).attr("data-toggle", "tooltip"), $(a).attr("data-placement", self.tipPosition), $(a).attr("data-trigger", "manual"), $(a).attr("title", t), $(a).addClass("errorStyle"));
                                            break;
                                        case "follow":
                                            $(a).parent().find(".ui-form-error").remove(),
                                                $(a).parent().append("<div class='ui-form-error'>" + t + "</div>"),
                                            "checkbox" != $(a).attr("type") && "radio" != $(a).attr("type") && $(a).addClass("errorStyle")
                                    }
                                    return self.errorMsg.push(t + "<br>"),
                                        !0
                                },
                                self.verify = function(obj, role) {
                                    var errorText = "",
                                        hasError = !1,
                                        iname = role.text ? role.text: $(obj).attr("name");
                                    if (!$(obj).attr("type") || "hidden" == $(obj).attr("type").toLowerCase() || !$(obj).is(":hidden")) {
                                        for (var key in role) switch (key) {
                                            case "required":
                                                if (role[key]) switch ($(obj)[0].tagName.toLowerCase()) {
                                                    case "select":
                                                        var val = $(obj).val();
                                                        val && "*" != val || (errorText = role.errorText ? role.errorText: "必选项", hasError = self.error(role, errorText, obj));
                                                        break;
                                                    case "textarea":
                                                        var val = $(obj).val();
                                                        val || (errorText = role.errorText ? role.errorText: "必填项", hasError = self.error(role, errorText, obj));
                                                        break;
                                                    case "input":
                                                        switch ($(obj).attr("type")) {
                                                            case "checkbox":
                                                            case "radio":
                                                                0 == base.getChecks($(obj).attr("name")).val.length && (errorText = role.errorText ? role.errorText: "必选项", hasError = self.error(role, errorText, obj));
                                                                break;
                                                            default:
                                                                var val = $(obj).val();
                                                                if (!val) {
                                                                    errorText = role.errorText ? role.errorText: "必填项";
                                                                    var tsi = $(obj).parent().children("input[mt='treeSelectInput']");
                                                                    hasError = tsi.length > 0 ? self.error(role, errorText, tsi[0]) : self.error(role, errorText, obj)
                                                                }
                                                        }
                                                }
                                                break;
                                            case "int":
                                            case "float":
                                            case "number":
                                                var val = $(obj).val();
                                                if (!val || "" == val) return;
                                                var ex = /^\d+$/,
                                                    ds = "整数";
                                                if ("float" == key ? (ex = /^\d+(\.\d+)?$/, ds = "小数") : "number" == key && (ds = "数字"), isNaN(Number(val))) errorText = role.errorText ? role.errorText: "必须是" + ds,
                                                    hasError = self.error(role, errorText, obj);
                                                else if (ex.test(val) || "number" == key) switch ((typeof role[key]).toLowerCase()) {
                                                    case "number":
                                                        Number(val) > role[key] && (errorText = role.errorText ? role.errorText: "数字不能大于" + role[key], hasError = self.error(role, errorText, obj));
                                                        break;
                                                    default:
                                                        jQuery.isArray(role[key]) && role[key].length >= 2 && (val < role[key][0] ? (errorText = role.errorText ? role.errorText: "不能小于" + role[key][0], hasError = self.error(role, errorText, obj)) : val > role[key][1] && (errorText = role.errorText ? role.errorText: "不能大于" + role[key][1], hasError = self.error(role, errorText, obj)))
                                                } else errorText = role.errorText ? role.errorText: "必须是" + ds,
                                                    hasError = self.error(role, errorText, obj);
                                                break;
                                            case "length":
                                                var val = $(obj).val();
                                                if (!val || "" == val) return;
                                                if (jQuery.isArray(role[key])) {
                                                    if (1 == role[key].length) base.getByteLen(val) < role[key][0] && (errorText = role.errorText ? role.errorText: "不能小于" + role[key][0] + "个字符", hasError = self.error(role, errorText, obj));
                                                    else if (2 == role[key].length) {
                                                        if (base.getByteLen(val) < role[key][0]) return errorText = role.errorText ? role.errorText: "不能小于" + role[key][0] + "个字符",
                                                            void(hasError = self.error(role, errorText, obj));
                                                        if (base.getByteLen(val) > role[key][1]) return errorText = role.errorText ? role.errorText: "不能超过" + role[key][1] + "个字符",
                                                            void(hasError = self.error(role, errorText, obj))
                                                    }
                                                } else base.getByteLen(val) > role[key] && (errorText = role.errorText ? role.errorText: "不能超过" + role[key] + "个字符", hasError = self.error(role, errorText, obj));
                                                break;
                                            case "identityCard":
                                                errorText = role.errorText ? role.errorText: "身份证号不正确";
                                                var ex = /(^\d{15}$)|(^\d{17}(\d|X)$)/,
                                                    val = $(obj).val();
                                                if (!val || "" == val) return;
                                                ex.test(val) || (hasError = self.error(role, errorText, obj));
                                                break;
                                            case "en":
                                                errorText = role.errorText ? role.errorText: "必须是英文";
                                                var ex = /^[a-z]*|[A-Z]*$/,
                                                    val = $(obj).val();
                                                if (!val || "" == val) return;
                                                ex.test(val) || (hasError = self.error(role, errorText, obj));
                                                break;
                                            case "ip":
                                                errorText = role.errorText ? role.errorText: "IP地址不正确";
                                                var ex = /^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;
                                                var ipReg = /^(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)$/;
                                                val = $(obj).val();
                                                if (!val || "" == val) return;
                                                //等于4 ，包含/的是验证是否是ip地址段 等于4 不包含/的验证是否是有效ip，其他的情况均直接返回错误---废弃
                                                //例如192.168.20.1或者192.168.20.*
                                                var len = val.split(".").length;
                                                if(len==4){
                                                    var lastLocation = val.split(".")[3];
                                                    if(lastLocation!="*"){
                                                        ex.test(val) || (hasError = self.error(role, errorText, obj));
                                                        return
                                                    }
                                                    // if(val.indexOf("/")==-1){ //不包含/
                                                    //     ex.test(val) || (hasError = self.error(role, errorText, obj));
                                                    //     return ;
                                                    // }else{//包含/
                                                    //     var ip = val.split("/")[0];
                                                    //     var num = val.split("/")[1];
                                                    //     var lastLocation = ip.split(".")[3];
                                                    //     if(!ex.test(ip)){
                                                    //         hasError = self.error(role, errorText, obj);
                                                    //         return ;
                                                    //     }
                                                    //     if(!ipReg.test(num)){
                                                    //         hasError = self.error(role, errorText, obj);
                                                    //         return ;
                                                    //     }
                                                    //     if(Number(lastLocation)>=Number(num)){
                                                    //         hasError = self.error(role, errorText, obj);
                                                    //         return ;
                                                    //     }
                                                    // }
                                                }else{
                                                    hasError = self.error(role, errorText, obj)
                                                }

                                                break;
                                            case "moreIp":
                                                errorText = role.errorText ? role.errorText: "IP地址不正确";
                                                val = $(obj).val();
                                                if (!val || "" == val) return;

                                                $(val.split(",")).each(function(i,v){
                                                    var len = v.split(".").length;
                                                    var ex;
                                                    switch (len){
                                                        case 2:
                                                            ex = /^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;
                                                            break;
                                                        case 3:
                                                            ex = /^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;
                                                            break;
                                                        case 4:
                                                            ex = /^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;
                                                            break;
                                                        default:
                                                            hasError = self.error(role, errorText, obj);
                                                            return ;
                                                            break;
                                                    }
                                                    if(!ex.test($.trim(v))){
                                                        (hasError = self.error(role, errorText, obj));
                                                    }
                                                    return ex.test($.trim(v))
                                                })
                                                break;
                                            case "ips":
                                                errorText = role.errorText ? role.errorText: "IP地址不正确";
                                                var ex = /^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,
                                                 val = $(obj).val();
                                                if (!val || "" == val) return;
                                                $(val.split(",")).each(function(e, t) {
                                                    if(!ex.test($.trim(t))){
                                                        (hasError = self.error(role, errorText, obj));
                                                    }
                                                    return ex.test($.trim(t))

                                                })
                                                break;
                                            case "ips_port":
                                                errorText = role.errorText ? role.errorText: "IP地址不正确";
                                                var ipEx = /^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,
                                                    portEx = /^([0-9]|[1-9]\d|[1-9]\d{2}|[1-9]\d{3}|[1-5]\d{4}|6[0-4]\d{3}|65[0-4]\d{2}|655[0-2]\d|6553[0-5])$/,
                                                    val = $(obj).val();
                                                if (!val || "" == val) return;
                                                var myError = !1;
                                                $(val.split(";")).each(function(e, t) {
                                                    if (!t || "" == t) return myError = !0,
                                                        !1;
                                                    var a = null,
                                                        n = null;
                                                    return t.split(":")[0] && (a = t.split(":")[0]),
                                                    t.split(":")[1] && (n = t.split(":")[1]),
                                                        a && "" != $.trim(a) && ipEx.test(a) && n && "" != $.trim(n) && portEx.test(n) ? void 0 : (myError = !0, !1)
                                                }),
                                                myError && (hasError = self.error(role, errorText, obj));
                                                break;
                                            case "port":
                                                errorText = role.errorText ? role.errorText: "端口不正确";
                                                var ex = /^([0-9]|[1-9]\d|[1-9]\d{2}|[1-9]\d{3}|[1-5]\d{4}|6[0-4]\d{3}|65[0-4]\d{2}|655[0-2]\d|6553[0-5])$/,
                                                    val = $(obj).val();
                                                if (!val || "" == val) return;
                                                ex.test(val) || (hasError = self.error(role, errorText, obj));
                                                break;
                                            case "money":
                                                var ex = /^\d+.?\d{0,2}$/,
                                                    val = $(obj).val();
                                                if (!val || "" == val) return;
                                                isNaN(val) ? (errorText = role.errorText ? role.errorText: "格式不正确", hasError = self.error(role, errorText, obj)) : (val = Number(val), ex.test(val) || (errorText = role.errorText ? role.errorText: "格式不正确", hasError = self.error(role, errorText, obj)));
                                                break;
                                            case "mobile_telephone":
                                                errorText = role.errorText ? role.errorText: "电话号码不正确";
                                                var ex = /^[1][3,4,5,7,8][0-9]{9}$/,
                                                    ex2 = /^0\d{2,3}-?\d{7,8}$/,
                                                    val = $(obj).val();
                                                if (!val || "" == val) return;
                                                ex.test(val) || ex2.test(val) || (hasError = self.error(role, errorText, obj));
                                                break;
                                            case "mobile":
                                                errorText = role.errorText ? role.errorText: "手机号码不正确";
                                                var ex = /^[1][3,4,5,7,8][0-9]{9}$/,
                                                    val = $(obj).val();
                                                if (!val || "" == val) return;
                                                ex.test(val) || (hasError = self.error(role, errorText, obj));
                                                break;
                                            case "telephone":
                                                errorText = role.errorText ? role.errorText: "电话号码不正确";
                                                var ex = /^0\d{2,3}-?\d{7,8}$/,
                                                    val = $(obj).val();
                                                if (!val || "" == val) return;
                                                ex.test(val) || (hasError = self.error(role, errorText, obj));
                                                break;
                                            case "email":
                                                errorText = role.errorText ? role.errorText: "邮箱地址不正确";
                                                var ex = /^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/,
                                                    val = $(obj).val();
                                                if (!val || "" == val) return;
                                                ex.test(val) || (hasError = self.error(role, errorText, obj));
                                                break;
                                            case "filter":
                                                var ex = /^\w+$/,
                                                    val = $(obj).val();
                                                if (!val || "" == val) return;
                                                ex.test(val) || (errorText = role.errorText ? role.errorText: "只允许字母、数字、下划线", hasError = self.error(role, errorText, obj));
                                                break;
                                            case "filterCN":
                                                var ex = /^[\u4E00-\u9FA5a-zA-Z0-9_]+$/,
                                                    val = $(obj).val();
                                                if (!val || "" == val) return;
                                                ex.test(val) || (errorText = role.errorText ? role.errorText: "只允许中英文、数字、下划线", hasError = self.error(role, errorText, obj));
                                                break;
                                            case "first":
                                                var fs = role[key],
                                                    l = fs.length,
                                                    val = $(obj).val();
                                                if (!val || "" == val) return;
                                                val.slice(0, l) != fs && (errorText = role.errorText ? role.errorText: "必须以" + fs + "开头", hasError = self.error(role, errorText, obj));
                                                break;
                                            case "website":
                                                var strRegex = "^[^s]+",
                                                    ex = new RegExp(strRegex),
                                                    val = $(obj).val();
                                                if (!val || "" == val) return;
                                                ex.test(val) || (errorText = role.errorText ? role.errorText: "网络地址不正确", hasError = self.error(role, errorText, obj));
                                                break;
                                            case "en_number":
                                                errorText = role.errorText ? role.errorText: "必须是英文或数字";
                                                var ex = /^[0-9a-zA-Z]+$/,
                                                    val = $(obj).val();
                                                val && "" != val || (hasError = self.error(role, errorText, obj)),
                                                ex.test(val) || (hasError = self.error(role, errorText, obj));
                                                break;
                                            case "file_type_catalog":
                                                val = $(obj).val();
                                                if (!val || "" == val) return;
                                                errorText="文件目录需以/开头"
                                                if(val.substr(0,1)!="/"){
                                                    hasError = self.error(role, errorText, obj)
                                                }
                                                break;
                                            case "fileSize":
                                                errorText = role.errorText ? role.errorText: "文件大小不能超过" + role[key] + "kb";
                                                var val = $(obj).val();
                                                if (!val || "" == val) return;
                                                base.form.validateFileSize($(obj), Number(role[key])) || (hasError = self.error(role, errorText, obj));
                                                break;
                                            case "fileName":
                                                errorText = role.errorText ? role.errorText: "必须是" + role[key] + "的文件";
                                                var val = $(obj).val();
                                                if (!val || "" == val) return;
                                                base.form.validateFileExtname($(obj), role[key]) || (hasError = self.error(role, errorText, obj));
                                                break;
                                            case "password":
                                                errorText = role.errorText ? role.errorText: "密码格式不正确，至少1个字母和数字且6-18个字符";
                                                var val = $(obj).val(),
                                                    ex = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,18}$/;
                                                if (!val || "" == val) return;
                                                ex.test(val) || (hasError = self.error(role, errorText, obj));
                                                break;
                                            case "custom":
                                                var ex = null,
                                                    errorText = null,
                                                    val = $(obj).val();
                                                if (role.custom) {
                                                    if (ex = eval(role.custom), errorText = role.errorText ? role.errorText: "内容不正确", !val || "" == val) return;
                                                    ex.test(val) || (hasError = self.error(role, errorText, obj))
                                                }
                                                break;
                                            case "strongPassword":
                                                errorText = role.errorText ? role.errorText: "需包含字母、数字、特殊字符，长度为8-20位";
                                                var val = $(obj).val(),
                                                    ex = /^(?=.*\d)(?=.*[a-zA-Z])(?=.*[~!@#$%^&*])[\da-zA-Z~!@#$%^&*]{8,20}$/;
                                                if (!val || "" == val) return;
                                                ex.test(val) || (hasError = self.error(role, errorText, obj))
                                        }
                                        return hasError
                                    }
                                },
                                self.init = function() {
                                    self.errorMsg = [],
                                        self.isPass = !0,
                                        $(self.form).find(".alert").remove(),
                                        $(self.form).find("[data-toggle='tooltip']").tooltip("destroy"),
                                        $(self.form).find("[data-toggle='tooltip']").removeAttr("title"),
                                        $(self.form).find("[data-toggle='tooltip']").removeAttr("data-toggle"),
                                        $(".errorStyle").removeClass("errorStyle"),
                                        $(".ui-form-error").remove(),
                                    0 == $("#errorStyle").length && $("head").append("<style id='errorStyle'>.errorStyle{border:1px solid red !important;}</style>")
                                },
                                self.scan = function() {
                                    if (self.init(), self.form) {
                                        if (self.roles) {
                                            var i = 0;
                                            for (var name in self.roles) {
                                                var role = self.roles[name],
                                                    obj = $(self.form).find("[name='" + name + "']");
                                                if (role && obj.length > 0) if (self.checkAll) self.verify(obj, role);
                                                else if (self.verify(obj, role)) break;
                                                i++
                                            }
                                        } else {
                                            var tmp = {};
                                            if (0 == $(self.form).length) return;
                                            for (var eles = $(self.form)[0].elements, i = 0, j = eles.length; i < j; i++) {
                                                var o = $(eles[i]),
                                                    role = o.attr("role");
                                                if (role) {
                                                    var roleData = eval("(" + role + ")"),
                                                        name = o.attr("name");
                                                    if (self.checkAll) if ("checkbox" == o.attr("type") || "radio" == o.attr("type")) {
                                                        if (tmp[name]) continue
                                                    } else self.verify(o, roleData),
                                                        tmp[name] = !0;
                                                    else if ("checkbox" == o.attr("type") || "radio" == o.attr("type")) {
                                                        if (tmp[name]) continue
                                                    } else if (self.verify(o, roleData)) break
                                                }
                                            }
                                        }
                                        if (self.errorMsg.length > 0) {
                                            switch (self.promptType) {
                                                case "tip":
                                                    self.checkAll ? $(self.form).find("[data-toggle='tooltip']").tooltip("show") : $(self.form).find("[data-toggle='tooltip']:eq(0)").tooltip("show");
                                                    break;
                                                case "top":
                                                    var alertDialog = document.createElement("div");
                                                    $(alertDialog).addClass("alert alert-danger"),
                                                        $(self.form).prepend(alertDialog),
                                                        self.checkAll ? $(self.errorMsg).each(function(e, t) {
                                                            $(alertDialog).append(e + 1 + "." + t)
                                                        }) : $(alertDialog).append(self.errorMsg[0])
                                            }
                                            self.isPass = !1
                                        }
                                    } else self.isPass = !1;
                                    return self.isPass ? self.passCallback && self.passCallback(self) : self.notPassCallback && self.notPassCallback(self),
                                        self.isPass
                                },
                                self.scan(),
                                self.isPass
                        },
                        base.form.reset = function(e, t) {
                            for (var a = $(e)[0].elements, n = 0, r = a.length; n < r; n++) if (1 != $(a[n]).prop("disabled") && a[n] && a[n].tagName) {
                                var o = a[n].tagName.toLowerCase();
                                switch (o) {
                                    case "select":
                                        $(a[n]).find("option:first").prop("selected", "selected");
                                        break;
                                    case "hidden":
                                        break;
                                    case "checkbox":
                                    case "radio":
                                        $(a[n]).prop("checked", !1);
                                        break;
                                    default:
                                        $(a[n]).val("")
                                }
                            }
                            t && t()
                        },
                        base.form.button = function(e) {
                            var t = {};
                            return t.label = e.label ? e.label: "确定",
                                t.disabled = !!e.disabled && e.disabled,
                                t.container = e.container ? e.container: $("body"),
                                t.element = null,
                                t.clickEvent = e.clickEvent ? e.clickEvent: null,
                                t.id = e.id ? e.id: null,
                                t.cls = e.cls ? e.cls: null,
                                t.style = e.style ? e.style: null,
                                t.icon = e.icon ? e.icon: null,
                                t.iconStyle = e.iconStyle ? e.iconStyle: "",
                                t.imgIcon = e.imgIcon ? e.imgIcon: null,
                                t.attr = e.attr ? e.attr: null,
                                t.iconPosition = e.iconPosition ? e.iconPosition: "first",
                                t.create = function() {
                                    if (t.element = document.createElement("button"), t.cls ? $(t.element).addClass(e.cls.replace(/,/g, " ")) : $(t.element).addClass("btn btn-primary"), t.style && $(t.element).attr("style", e.style.replace(/,/g, ";")), t.attr && $(t.attr).each(function(e, a) {
                                            $(t.element).attr(a.name, a.value)
                                        }), t.id && $(t.element).attr("id", t.id), t.disabled ? $(t.element).addClass("disabled") : t.clickEvent && $(t.element).unbind("click").on("click",
                                            function() {
                                                t.clickEvent(t, this)
                                            }), t.label && $(t.element).append("<span>" + t.label + "</span>"), t.icon) if (t.iconStyle) switch (t.iconPosition) {
                                        case "last":
                                            $(t.element).append("<i class='" + t.icon + "' style='" + t.iconStyle + "'></i>");
                                            break;
                                        default:
                                            $(t.element).prepend("<i class='" + t.icon + "' style='" + t.iconStyle + "'></i>")
                                    } else switch (t.iconPosition) {
                                        case "last":
                                            $(t.element).append("<i class='" + t.icon + "'></i>");
                                            break;
                                        default:
                                            $(t.element).prepend("<i class='" + t.icon + "'></i>")
                                    }
                                    t.imgIcon && $(t.element).html("<img src='" + t.imgIcon + "' style='border:0'/>"),
                                        $(t.element).attr("onclick", "return false;"),
                                        $(t.container).append(t.element)
                                },
                                t.create(),
                                t
                        },
                        base.form.date = function(e) {
                            var t = {};
                            if (t.dateOption = e.dateOption ? e.dateOption: {},
                                    t.element = e.element ? e.element: null, e.type && (t.dateOption.type = e.type ? e.type: null), e.dateOption && e.dateOption.type && (t.dateOption.type = e.dateOption.type ? e.dateOption.type: null), e.range && (t.dateOption.range = "~"), e.dateOption && e.dateOption.range && (t.dateOption.range = "~"), t.theme = "#01a9c2", e.theme) switch (e.theme) {
                                case "weilan":
                                    t.theme = "#029dd0";
                                    break;
                                case "molv":
                                    t.theme = "#03bf4e";
                                    break;
                                case "red":
                                    t.theme = "#f60505";
                                    break;
                                case "orange":
                                    t.theme = "#fda917";
                                    break;
                                default:
                                    t.theme = e.theme
                            }
                            t.dateOption.theme = t.theme,
                            e.isTime && (t.dateOption.type = "datetime"),
                                t.create = function() {
                                    if ($(t.element).length > 0) {
                                        t.element.tagName;
                                        require(["date5.0"],
                                            function(e) {
                                                $(t.element).length > 1 ? $(t.element).each(function() {
                                                    t.readonly(this),
                                                        t.dateOption.elem = this,
                                                        e.render(t.dateOption)
                                                }) : (t.readonly($(t.element)[0]), t.dateOption.elem = $(t.element)[0], e.render(t.dateOption))
                                            })
                                    }
                                },
                                t.readonly = function(e) {
                                    var t = $(e)[0].tagName;
                                    if (t) switch (t.toLowerCase()) {
                                        case "input":
                                        case "select":
                                        case "textarea":
                                            $(e).attr("readonly", !0)
                                    }
                                },
                                t.create()
                        },
                        base.form.dateRange = function(e) {
                            var t = {};
                            t.dateOption = e.dateOption ? e.dateOption: {
                                format: "YYYY-MM-DD"
                            },
                                t.dataOption.language = "cn",
                                t.element = e.element ? e.element: null,
                                t.create = function() {
                                    t.element && (0 == $("head").find("#dateRangeCSS").length && $("head").append("<link id='dateRangeCSS' href='" + $.base + "/css/daterangepicker.min.css' rel='stylesheet' type='text/css'>"), require(["dateRange"],
                                        function() {
                                            $(t.element).dateRangePicker(t.dateOption)
                                        }))
                                },
                                t.create()
                        },
                        base.form.autoSelect = function(e) {
                            var t = {};
                            return t.container = e.container ? e.container: null,
                                t.data = e.data ? e.data: null,
                                t.url = e.url ? e.url: null,
                                t.params = e.params ? e.params: {},
                                t.size = e.size ? e.size: 10,
                                t.highLight = !e.highLight || e.highLight,
                                t.autoSelectObj = null,
                                t.type = e.type ? e.type: "get",
                                t.ajaxSettings = e.ajaxSettings ? e.ajaxSettings: {},
                                t.dropContainer = e.dropContainer ? e.dropContainer: null,
                                t.clickCallback = e.clickCallback ? e.clickCallback: null,
                                t.width = e.width ? e.width: "auto",
                                t.create = function() {
                                    return t.container && require(["autoSelect"],
                                        function() {
                                            t.data ? t.autoSelectObj = $(t.container).autoSelect({
                                                lookup: t.data,
                                                dropContainer: t.dropContainer,
                                                clickCallback: t.clickCallback,
                                                width: t.width,
                                                onSelect: function(e) {}
                                            }) : t.url && (t.autoSelectObj = $(t.container).autoSelect({
                                                serviceUrl: t.url,
                                                params: t.params,
                                                type: t.type,
                                                dropContainer: t.dropContainer,
                                                ajaxSettings: t.ajaxSettings,
                                                clickCallback: t.clickCallback,
                                                width: t.width,
                                                lookupFilter: function(e, t, a) {},
                                                onSelect: function(e) {}
                                            }))
                                        }),
                                        t
                                },
                                t.disable = function() {
                                    t.autocompleteObj.disable()
                                },
                                t.create(),
                                t
                        },
                        base.form.treeSelect = function(e) {
                            var t = {};
                            return t.container = e.container ? e.container: null,
                                t.parentContainer = e.parentContainer ? e.parentContainer: $("body"),
                                t.data = e.data ? e.data: null,
                                t.url = e.url ? e.url: null,
                                t.params = e.params ? e.params: {},
                                t.treeContainer = null,
                                t.type = e.type ? e.type: "get",
                                t.clickCallback = e.clickCallback ? e.clickCallback: null,
                                t.checkCallback = e.checkCallback ? e.checkCallback: null,
                                t.id = e.id ? e.id: base.getRandom(1e3, 9999),
                                t.selectNodeId = e.selectNodeId ? e.selectNodeId: null,
                                t.treeObj = null,
                                t.deviationLeft = e.deviationLeft ? e.deviationLeft: 0,
                                t.deviationTop = e.deviationTop ? e.deviationTop: 0,
                                t.scrollObj = e.scrollObj ? e.scrollObj: null,
                                t.position = e.position ? e.position: "bottom",
                                t.height = e.maxHeight ? e.maxHeight: 180,
                                t.width = e.width ? e.width: null,
                                t.checkboxType = e.checkboxType ? e.checkboxType: null,
                                t.setting = {},
                                t.clickCallback ? (t.clickEvent = function(e, a, n) {
                                    var r = null;
                                    t.clickCallback && (r = t.clickCallback(e, a, n)),
                                    "break" != r && ($(t.container).val(n.name), $(t.container).attr("tid", n.id), t.hide())
                                },
                                    t.setting = {
                                        data: {
                                            simpleData: {
                                                enable: !0
                                            }
                                        },
                                        callback: {
                                            onClick: t.clickEvent
                                        }
                                    }) : t.checkCallback && (t.setting = {
                                    data: {
                                        simpleData: {
                                            enable: !0
                                        }
                                    },
                                    check: {
                                        enable: !0
                                    },
                                    callback: {
                                        onCheck: function(e, a, n) {
                                            var r = t.treeObj.treeObj.getCheckedNodes(!0),
                                                o = "",
                                                l = "";
                                            $(r).each(function(e, t) {
                                                e == r.length - 1 ? (o += t.name, l += t.id) : (o += t.name + ",", l += t.id + ",")
                                            }),
                                                $(t.container).val(o),
                                                $(t.container).attr("ids", l),
                                            t.checkCallback && t.checkCallback(e, a, n, r)
                                        }
                                    }
                                }),
                            t.checkboxType && (t.setting.check = {
                                enable: !0,
                                chkStyle: "checkbox",
                                chkboxType: t.checkboxType
                            }),
                                t.create = function() {
                                    $(t.container).length > 0 && ($(t.container).attr("readonly", !0), $(t.container).attr("mt", "treeSelectInput"), $(t.container).css("cursor", "pointer"), $(t.container).on("click",
                                        function(e) {
                                            $(this).hasClass("active") || (t.createTree(), $(this).addClass("active"))
                                        }), $(document).on("click",
                                        function(e) {
                                            var a = e.target;
                                            $(a).is($(t.container)) || $(a).parents("[type='treeSelect']").length > 0 || "treeSelect" != $(a).attr("type") && t.hide(e)
                                        }))
                                },
                                t.setPosition = function() {
                                    var e = 0,
                                        a = 0;
                                    switch (t.position) {
                                        case "top":
                                            if (t.scrollObj) {
                                                var n = $(t.scrollObj.container).find(".mCSB_container").css("top");
                                                n = n ? n: "0px",
                                                    n = Number(n.replace(/px/g, "")),
                                                    e = $(t.container).offset().left - t.deviationLeft,
                                                    a = $(t.container).offset().top - t.deviationTop - t.height - n
                                            } else e = $(t.container).offset().left - t.deviationLeft,
                                                a = $(t.container).offset().top - t.deviationTop - t.height;
                                            $(t.treeContainer).css("left", e),
                                                $(t.treeContainer).css("top", a);
                                            break;
                                        case "bottom":
                                            if (t.scrollObj) {
                                                var n = $(t.scrollObj.container).find(".mCSB_container").css("top");
                                                n = Number(n.replace(/px/g, "")),
                                                    e = $(t.container).offset().left - t.deviationLeft,
                                                    a = $(t.container).offset().top + $(t.container).height() - t.deviationTop - n
                                            } else e = $(t.container).offset().left - t.deviationLeft,
                                                a = $(t.container).offset().top + $(t.container).height() - t.deviationTop;
                                            $(t.treeContainer).css("left", e),
                                                $(t.treeContainer).css("top", a)
                                    }
                                },
                                t.createTree = function() {
                                    return t.treeContainer ? (t.setPosition(), void $(t.treeContainer).show()) : (t.treeContainer = document.createElement("div"), $(t.treeContainer).attr("type", "treeSelect"), $(t.treeContainer).attr("id", t.id), $(t.treeContainer).css("position", "absolute"), $(t.treeContainer).css("z-index", "10000"), $(t.treeContainer).css("width", t.width ? t.width: $(t.container).outerWidth()), t.cls || t.style ? base.setProperty(t.element, e) : ($(t.treeContainer).css("border", "1px solid #109bdc"), $(t.treeContainer).css("background-color", "#fff"), $(t.treeContainer).css("height", t.height), $(t.treeContainer).css("overflow", "auto"), $(t.treeContainer).css("box-shadow", "0 0 5px #aaa")), $(t.treeContainer).css("padding", "10px 0"), $(t.treeContainer).addClass("ztree"), t.setPosition(), $(t.parentContainer).append(t.treeContainer), void(t.data ? t.treeObj = base.tree({
                                        container: $(t.treeContainer),
                                        data: t.data,
                                        setting: t.setting
                                    }) : t.url && base.ajax({
                                        url: t.url,
                                        type: t.type,
                                        params: t.params,
                                        async: !1,
                                        success: function(e) {
                                            t.treeObj = base.tree({
                                                container: $(t.treeContainer),
                                                data: e,
                                                setting: t.setting
                                            })
                                        }
                                    })))
                                },
                                t.hide = function(e) {
                                    $(t.container).removeClass("active"),
                                        $(t.treeContainer).hide()
                                },
                                t.create(),
                                t
                        },
                        base.form.linkSelect = function(e) {
                            var t = {};
                            return t.container = e.container ? e.container: null,
                                t.changeEvent = e.changeEvent ? e.changeEvent: null,
                                t.ajax = e.ajax ? e.ajax: null,
                                t.data = e.data ? e.data: null,
                                t.rootId = e.rootId ? e.rootId: null,
                                t.create = function() {
                                    t.run(t.rootId)
                                },
                                t.run = function(e, a) {
                                    if (t.data) {
                                        var n = t.findNode(e);
                                        n && t.createNodeSelect(n, a)
                                    } else t.ajax && base.ajax({
                                        url: t.ajax.url ? t.ajax.url: null,
                                        params: t.ajax.params ? t.ajax.params: null,
                                        type: t.ajax.type ? t.ajax.type: "get",
                                        success: function(e) {
                                            t.createNodeSelect(e)
                                        }
                                    })
                                },
                                t.createNodeSelect = function(e, a) {
                                    var n = e;
                                    n.container = t.container,
                                        n.type = "select",
                                        n.changeEvent = function(a) {
                                            $(a.element).nextAll().remove(),
                                                t.run(e.id, a.element),
                                            t.changeEvent && t.changeEvent(n, a)
                                        },
                                        base.form.element(n)
                                },
                                t.findNode = function(e) {
                                    var a = function(t) {
                                        for (var n = t.items,
                                                 r = 0,
                                                 o = n.length; r < o; r++) {
                                            if (n[r].id == e) return n[r].items && n[r].items.length > 0 ? n[r] : null;
                                            n[r].items && a(n[r])
                                        }
                                    };
                                    a(t.data)
                                },
                                t.create(),
                                t
                        },
                        base.form.cakeSelect = function(e) {
                            var t = {};
                            return t.hasFirstSelect = 0 != e.hasFirstSelect,
                                t.isMulti = 1 == e.isMulti,
                                t.itemColor = e.itemColor ? e.itemColor: "#aaa",
                                t.activeItemColor = e.activeItemColor ? e.activeItemColor: "#333",
                                t.data = e.data ? e.data: null,
                                t.clickEvent = e.clickEvent ? e.clickEvent: null,
                                t.callback = e.callback ? e.callback: null,
                                t.container = null,
                                t.input = e.input ? e.input: null,
                                t.value = $(t.input).val() ? $(t.input).val() : null,
                                t.create = function() {
                                    t.input && t.data && t.data.length > 0 && (t.setValue($(t.input).val()), t.createBox(), $(t.input).on("change",
                                        function() {
                                            t.change($(this).val())
                                        }))
                                },
                                t.createBox = function() {
                                    t.container = document.createElement("ul"),
                                        $(t.container).addClass("ui-form-cakeSelect"),
                                        $(t.input).parent().append(t.container),
                                        t.draw()
                                },
                                t.createItem = function(e, a) {
                                    var n = document.createElement("li");
                                    $(t.container).append(n),
                                        $(n).html(e.name),
                                        $(n).attr("val", e.value),
                                        $(n).on("click",
                                            function() {
                                                if (t.isMulti || ($(t.container).children("li").removeAttr("class"), $(t.input).val($(this).attr("val"))), $(this).hasClass("active") ? $(this).removeAttr("class") : $(this).addClass("active"), t.isMulti) {
                                                    var e = "",
                                                        a = $(t.container).children(".active");
                                                    $(a).each(function(t, n) {
                                                        e += t == a.length - 1 ? $(n).attr("val") : $(n).attr("val") + ","
                                                    }),
                                                        $(t.input).val(e)
                                                }
                                            }),
                                    a && $(n).addClass("active")
                                },
                                t.change = function(e) {
                                    e && t.setValue(e);
                                    var a = $(t.container).children("li");
                                    $(a).removeClass("active"),
                                        $(a).each(function(e, a) {
                                            var n = t.value.split(",");
                                            $(n).each(function(e, t) {
                                                if (t == $(a).val()) return $(a).addClass("active"),
                                                    !1
                                            })
                                        })
                                },
                                t.draw = function(e) {
                                    $(t.container).html(""),
                                    e && t.setValue(e),
                                        $(t.data).each(function(e, a) {
                                            var n = !1,
                                                r = t.value.split(",");
                                            $(r).each(function(e, t) {
                                                if (t == a.value) return n = !0,
                                                    !1
                                            }),
                                                t.createItem(a, n)
                                        })
                                },
                                t.changeValue = function() {},
                                t.setValue = function(e) {
                                    t.isMulti ? t.value = e: t.hasFirstSelect && !e ? t.value = t.data[0].value: t.value = e,
                                        t.value = t.value.toString()
                                },
                                t.create(),
                                t
                        },
                        base.form.areaSelect = function(e) {
                            var t = {};
                            return t.container = e.container ? e.container: null,
                                t.option = e.option ? e.option: null,
                                t.callback = e.callback ? e.callback: null,
                                t.cls = e.cls ? e.cls: null,
                            e.name && (t.option.name = e.name),
                            e.id && (t.option.id = e.id),
                                t.create = function() {
                                    t.container && (t.cls && $("head").append("<link rel='stylesheet' href='" + t.cls + "'>"), require(["areaSelect"],
                                        function() {
                                            $(t.container).pickArea(t.option),
                                            t.callback && t.callback(t)
                                        }))
                                },
                                t.create(),
                                t
                        },
                        base.form.editor = function(e) {
                            var t = {};
                            t.name = e.name ? e.name: null,
                                t.editorOption = e.editorOption ? e.editorOption: null,
                                t.editorEntity = null,
                                t.create = function() {},
                                t.create()
                        },
                        base.echarts = function(e) {
                            var t = {};
                            return t.container = e.container ? e.container: $("body"),
                                t.chartOption = e.chartOption ? e.chartOption: null,
                                t.chart = null,
                                t.echarts = e.echarts ? e.echarts: null,
                                t.drawCallback = e.drawCallback ? e.drawCallback: null,
                                t.create = function() {
                                    if (t.echarts) return t.chartOption && (t.beforeEvent && t.beforeEvent(t)(), t.chart = t.echarts.init($(t.container)[0]), t.chartOption.length > 0 ? $(t.chartOption).each(function(e, a) {
                                        t.chart.setOption(a)
                                    }) : t.chart.setOption(t.chartOption), t.drawCallback && t.drawCallback(t), $(window).on("resize",
                                        function() {
                                            t.chart.resize()
                                        })),
                                        t
                                },
                                t.refresh = function(e) {
                                    t.chartOption = e,
                                        t.chart.setOption(t.chartOption)
                                },
                                t.create(),
                                t
                        },
                        base.earthRollMap = function(e) {
                            var t = {};
                            t.rippleImg = "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pg0KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiANCiJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPg0KPHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiPiAgICANCiAgICA8Y2lyY2xlIGN4PSIyNSIgY3k9IjI1IiByPSI1IiAgc3Ryb2tlPSJyZ2IoNCwxOTgsMjU0KSIgbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjMiIGZpbGwtb3BhY2l0eT0iMSIgZmlsbD0icmdiYSgwLDAsMCwwKSIgc3Ryb2tlLW9wYWNpdHk9IjAuMiI+DQogICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZVR5cGU9InhtbCIgIGF0dHJpYnV0ZU5hbWU9InIiIGZyb209IjAiIHRvPSIyMCIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZT4NCiAgICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ib3BhY2l0eSIgZnJvbT0iMSIgdG89IjAiIGJlZ2luPSIwcyIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIC8+DQogICAgPC9jaXJjbGU+DQo8L3N2Zz4=",
                                t.container = e.container ? e.container: $("body"),
                                t.data = e.data ? e.data: null,
                                t.mapOption = {
                                    backgroundColor: "rgba(0,0,0,0)",
                                    globe: {
                                        baseTexture: "/service/images/earth-specbetter.jpg",
                                        shading: "color",
                                        light: {
                                            ambient: {
                                                intensity: .4
                                            },
                                            main: {
                                                intensity: .4
                                            }
                                        },
                                        viewControl: {
                                            autoRotate: !0
                                        },
                                        FXAA: {
                                            enable: !0
                                        }
                                    },
                                    series: t.data
                                },
                                t.create = function() {
                                    require(["echarts", "echartsGl"],
                                        function(e) {
                                            base.echarts({
                                                container: t.container,
                                                chartOption: t.mapOption,
                                                echarts: e
                                            })
                                        })
                                },
                                t.create()
                        },
                        base.geoRollMap = function(e) {
                            var t = {};
                            t.container = e.container ? e.container: $("body"),
                                t.data = e.data ? e.data: null,
                                t.mapEntity = null,
                                t.pointsMapEntity = null,
                                t.mapName = e.mapName ? e.mapName: "world",
                                t.mapOption = {
                                    geo3D: {
                                        map: t.mapName,
                                        shading: "color",
                                        regionHeight: 6,
                                        silent: !0,
                                        groundPlane: {
                                            show: !1
                                        },
                                        light: {
                                            main: {
                                                intensity: 0
                                            },
                                            ambient: {
                                                intensity: 0
                                            }
                                        },
                                        viewControl: {
                                            distance: 50,
                                            center: [116.405285, 39.904989]
                                        },
                                        itemStyle: {
                                            areaColor: "#111"
                                        },
                                        boxHeight: .5
                                    },
                                    series: t.data
                                },
                                t.create = function() {
                                    require(["echarts"],
                                        function(e) {
                                            base.ajax({
                                                type: "get",
                                                url: "/service/map/" + t.mapName + ".json",
                                                success: function(a) {
                                                    e.registerMap(t.mapName, a),
                                                        require(["echartsGl"],
                                                            function() {
                                                                t.mapEntity = base.echarts({
                                                                    container: t.container,
                                                                    option: [{
                                                                        series: [{
                                                                            type: "map",
                                                                            map: t.mapName
                                                                        }]
                                                                    },
                                                                        t.mapOption]
                                                                })
                                                            })
                                                }
                                            })
                                        })
                                },
                                t.create()
                        },
                        base.isBoolean = function(e) {
                            return "boolean" == typeof e.toLowerCase()
                        },
                        base.loadPage = function(e) {
                            var t = {};
                            t.url = e.url ? e.url: null,
                                t.container = e.container ? e.container: null,
                                t.params = e.params ? e.params: null,
                                t.callback = e.callback ? e.callback: null,
                                t.scrolls = e.scrolls ? e.scrolls: null,
                                t.load = function() {
                                    t.container && t.url && base.ajax({
                                        type: "get",
                                        url: t.url,
                                        dataType: "text",
                                        params: t.params,
                                        success: function(e) {
                                            $(t.container).html(e),
                                            t.callback && t.callback(t),
                                            t.scrolls && $(t.scrolls.split(",")).each(function(e, t) {
                                                $(t).length > 0 && base.scroll({
                                                    container: $(t)
                                                })
                                            })
                                        },
                                        beforeSend: function() {
                                            base.loading($(t.container))
                                        },
                                        error: function() {
                                            $(t.container).html("加载错误")
                                        }
                                    })
                                },
                                t.load()
                        },
                        base.require = function(e, t) {
                            require([e],
                                function() {
                                    t && t()
                                })
                        },
                        base.datatables = function(e) {
                            var t = {};
                            return t.option = e.option ? e.option: null,
                                t.container = e.container ? e.container: null,
                                t.grid = null,
                                t.inputRedirect = 0 != e.inputRedirect,
                                t.filter = e.filter ? e.filter: null,
                                t.callback = e.callback ? e.callback: null,
                                t.nodataIcon = e.nodataIcon ? e.nodataIcon: null,
                                t.selectType = e.selectType ? e.selectType: null,
                                t.selectAttribute = e.selectAttribute ? e.selectAttribute: null,
                                t.hasCheckboxSkin = 0 != e.hasCheckboxSkin,
                                t.tempOption = {},
                                t.nodataString = "<span style='color:#ccc'>暂无相关数据</span>",
                                t.pageRedirect = (1 == e.pageRedirect, !0),
                                t.pageRedirectContainer = null,
                                t.checkColumnWidth = e.checkColumnWidth ? e.checkColumnWidth: "5%",
                                t.idDef = e.idDef ? e.idDef: "id",
                            t.nodataIcon && (t.nodataString = t.nodataIcon + "<br/><br/>" + t.nodataString),
                                t.language = {
                                    sProcessing: "<i class='fa fa-spinner fa-pulse fa-3x fa-fw' style='margin-right:4px;font-size:20px;'></i>加载中...",
                                    sLengthMenu: "显示 _MENU_ 条记录",
                                    sZeroRecords: t.nodataString,
                                    sInfo: "第 _START_ 至 _END_ 条记录，共 _TOTAL_ 条",
                                    sInfoEmpty: "显示第 0 至 0 条记录，共 0 条",
                                    sInfoFiltered: "(由 _MAX_ 条记录过滤)",
                                    sInfoPostFix: "",
                                    sSearch: "搜索:",
                                    sUrl: "",
                                    sEmptyTable: t.nodataString,
                                    sLoadingRecords: "载入中...",
                                    sInfoThousands: ",",
                                    oPaginate: {
                                        sFirst: "<i style='font-size:15px;' class='fa fa-angle-double-left'></i>",
                                        sPrevious: "<i style='font-size:15px;' class='fa fa-angle-left'></i>",
                                        sNext: "<i style='font-size:15px;' class='fa fa-angle-right'></i>",
                                        sLast: "<i style='font-size:15px;' class='fa fa-angle-double-right'></i>"
                                    },
                                    oAria: {
                                        sSortAscending: ": 以升序排列此列",
                                        sSortDescending: ": 以降序排列此列"
                                    }
                                },
                                t.create = function() {
                                    if (t.container && t.option) {
                                        t.option.language = t.language,
                                            $.fn.dataTable.ext.errMode = "none",
                                        t.filter && t.option.ajax && (t.option.ajax.dataFilter = t.filter),
                                        t.option.ajax && (t.option.ajax.xhrFields = {
                                            withCredentials: !0
                                        });
                                        for (var e in t.option) switch (e) {
                                            case "drawCallback":
                                                t.tempOption.drawCallback = function(e) {
                                                    if (t.option.drawCallback(e), t.callback && t.callback(e), t.selectType && "checkbox" == t.selectType) {
                                                        var a = $(t.container).find("thead input[name='cball']"),
                                                            n = $(t.container).find("input[name='cb']");
                                                        t.hasCheckboxSkin && base.form.checkboxSkin({
                                                            checkbox: $(t.container).find("input[type='checkbox']")
                                                        }),
                                                            base.selectAll(a, n, null, !0)
                                                    }
                                                };
                                                break;
                                            case "columns":
                                                t.tempOption.columns = [],
                                                    $(t.option.columns).each(function(e, a) {
                                                        t.tempOption.columns.push(a)
                                                    }),
                                                t.selectType && t.tempOption.columns.unshift({
                                                    data: "id",
                                                    sWidth: t.checkColumnWidth,
                                                    type: "checkbox"
                                                });
                                                break;
                                            case "columnDefs":
                                                t.tempOption.columnDefs = [],
                                                    $(t.option.columnDefs).each(function(e, a) {
                                                        var n = {};
                                                        for (var r in a) if ("targets" == r) {
                                                            var o = a[r];
                                                            t.selectType ? "checkbox" != t.selectType && "radio" != t.selectType || (n[r] = o + 1) : n[r] = o
                                                        } else n[r] = a[r];
                                                        t.tempOption.columnDefs.push(n)
                                                    }),
                                                t.selectType && ("checkbox" != t.selectType && "radio" != t.selectType || t.tempOption.columnDefs.push({
                                                    render: function(e, a, n, r) {
                                                        var o = "";
                                                        return t.selectAttribute && $(t.selectAttribute.split(",")).each(function(e, t) {
                                                            o += " " + t + "='" + n[t] + "'"
                                                        }),
                                                        "<input  type='" + t.selectType + "' name='cb' value='" + n[t.idDef] + "' " + o + "/>"
                                                    },
                                                    targets: 0
                                                }));
                                                break;
                                            default:
                                                t.tempOption[e] = t.option[e]
                                        }
                                        if (t.selectType) switch (t.selectType) {
                                            case "checkbox":
                                                0 == $(t.container).find("thead input[name='cball']").length ? $(t.container).find("thead tr").prepend("<th><input type='checkbox' name='cball'/></th>") : $(t.container).find("thead input[name='cball']").prop("checked", !1);
                                                break;
                                            case "radio":
                                        }
                                        t.grid = $(t.container).DataTable(t.tempOption)
                                    }
                                },
                                t.reload = function() {
                                    $(t.container).find("thead input[type='checkbox']").prop("checked", !1),
                                        t.grid.ajax.reload()
                                },
                                t.addRow = function(e) {
                                    t.grid.row.add(e).draw(!1)
                                },
                                t.deleteRow = function(e) {
                                    $(t.container).find("tbody tr").removeClass("selected"),
                                        $(e).parents("tr").addClass("selected"),
                                        t.grid.row(".selected").remove().draw(!1)
                                },
                                t.destroy = function() {
                                    t.grid.destroy()
                                },
                                t.jumpPage = function(e) {
                                    t.grid.page(e).draw(!1)
                                },
                                t.refresh = function() {
                                    t.jumpPage(t.getPageNumber())
                                },
                                t.getPageNumber = function() {
                                    return t.grid.page()
                                },
                                t.create(),
                                t
                        },
                        base.requestTip = function(e) {
                            var t = {};
                            return t.container = null,
                            e || (e = {}),
                                t.width = e.width ? e.width: "auto",
                                t.height = e.height ? e.height: 40,
                                t.color = e.color ? e.color: "#555",
                                t.bg = e.bg ? e.bg: "#f2f2f2",
                                t.position = e.position ? e.position: "top",
                                t.timeout = e.timeout <= 0 ? e.timeout: 15e3,
                                t.waitWord = e.waitWord ? e.waitWord: "正在提交...",
                                t.successWord = e.successWord ? e.successWord: "提交成功",
                                t.errorWord = e.errorWord ? e.errorWord: "提交错误",
                                t.create = function() {
                                    switch (t.removeAll(), t.container = document.createElement("div"), $(t.container).addClass("ui-requestTip"), $(t.container).css("position", "absolute"), $(t.container).css("z-index", "2000"), $(t.container).css("padding", "0 10px"), t.position) {
                                        case "top":
                                            $(t.container).css("top", 5);
                                            break;
                                        case "center":
                                            $(t.container).css("top", "50%"),
                                                $(t.container).css("bottom", "50%")
                                    }
                                    t.center(),
                                        $(t.container).css("text-align", "center"),
                                        $(t.container).css("border", "1px solid #aaa"),
                                        $(t.container).css("background", t.bg),
                                        $(t.container).css("overflow", "auto"),
                                        $(t.container).css("width", t.width),
                                        $(t.container).css("height", t.height),
                                        $(t.container).css("margin", "auto"),
                                        $(t.container).css("color", "#333"),
                                        $(t.container).css("display", "none"),
                                        $(t.container).css("line-height", t.height - 2 + "px"),
                                        $(t.container).css("border-radius", 5),
                                        $("body").append(t.container)
                                },
                                t.center = function() {
                                    var e = ($(document).width() - $(t.container).width()) / 2;
                                    $(t.container).css("left", e)
                                },
                                t.wait = function(e) {
                                    t.waitWord = e ? e: t.waitWord,
                                    t.container || t.create(),
                                        $(t.container).show(),
                                        $(t.container).html("<i class='fa fa-spinner fa-pulse fa-3x fa-fw' style='color:#aaa;margin-right:4px;font-size:14px;'></i>" + t.waitWord),
                                    t.timeout > 0 && window.setTimeout(function() {
                                            $(t.container).fadeOut(function() {
                                                $(t.container).remove()
                                            })
                                        },
                                        t.timeout)
                                },
                                t.success = function(e) {
                                    t.successWord = e ? e: t.successWord,
                                    t.container || t.create(),
                                        $(t.container).html("<i class='fa fa-check-circle' style='color:#01b617;margin-right:4px;font-size:18px;'></i>" + t.successWord),
                                        t.center(),
                                        $(t.container).show(),
                                        window.setTimeout(function() {
                                                $(t.container).fadeOut(function() {
                                                    $(t.container).remove()
                                                })
                                            },
                                            3e3)
                                },
                                t.error = function(e) {
                                    t.errorWord = e ? e: t.errorWord,
                                    t.container || t.create(),
                                        $(t.container).html("<i class='fa fa-times-circle' style='color:red;margin-right:4px;font-size:18px;'></i>" + t.errorWord),
                                        t.center(),
                                        $(t.container).show(),
                                        window.setTimeout(function() {
                                                $(t.container).fadeOut(function() {
                                                    $(t.container).remove()
                                                })
                                            },
                                            3e3)
                                },
                                t.remove = function() {
                                    $(t.container).fadeOut(function() {
                                        $(t.container).remove()
                                    })
                                },
                                t.removeAll = function() {
                                    $(".ui-requestTip").remove()
                                },
                                t
                        },
                        base.arrayToMap = function(e, t, a) {
                            var n = {};
                            if (n.data = e ? e: null, n.pid = t ? t: null, n.map = {},
                                n.data && n.data.length > 0 && n.pid) {
                                var r = 0;
                                n.transform = function(e) {
                                    var t = 0;
                                    $(n.data).each(function(o, l) {
                                        l.pid != e && l.pId != e || (n.map[l.id] = l, e == n.pid && r++, t++, a && 1 == t && 1 == r && (n.map[l.id].active = !0), n.transform(l.id))
                                    })
                                },
                                    n.transform(n.pid)
                            }
                            return n.map
                        },
                        base.mapToArray = function(e, t) {
                            var a = {};
                            return a.data = e ? e: null,
                                a.array = [],
                                a.pid = t ? t: null,
                            a.data && a.pid && (a.thansform = function(e, t) {
                                for (var n in a.data) {
                                    var r = a.data[n];
                                    r.pid == e && (t ? (t.items || (t.items = []), t.items.push(r), a.thansform(r.id, r)) : (a.array.push(r), a.thansform(r.id, r)))
                                }
                            },
                                a.thansform(t)),
                                a.array
                        },
                        base.confirm = function(e) {
                            var t = {};
                            return t.label = e.label ? e.label: "提示",
                                t.text = e.text ? e.text: "是否删除?",
                                t.confirmCallback = e.confirmCallback ? e.confirmCallback: null,
                                t.cancelCallback = e.cancelCallback ? e.cancelCallback: null,
                                t.width = e.width?e.width:200,
                                t.height = e.height?e.height:30,
                                t.contentStyle = e.contentStyle?e.contentStyle:"overflow:hidden,padding:20px 0",
                                t.create = function() {
                                    var e = base.modal({
                                        label: t.label,
                                        context: "<div style='text-align:center;font-size:13px;'>" + t.text + "</div>",
                                        width: t.width,
                                        height: t.height,
                                        contentStyle: t.contentStyle,
                                        buttons: [{
                                            label: "确定",
                                            cls: "btn btn-info",
                                            clickEvent: function() {
                                                t.confirmCallback && t.confirmCallback(),
                                                    e.hide()
                                            }
                                        },
                                            {
                                                label: "取消",
                                                cls: "btn btn-warning",
                                                clickEvent: function() {
                                                    t.cancelCallback && t.cancelCallback(),
                                                        e.hide()
                                                }
                                            }]
                                    })
                                },
                                t.create(),
                                t
                        },
                        base.tip = function(e) {
                            var t = {};
                            return t.text = e.text ? e.text: "",
                                t.label = e.label ? e.label: "提示",
                                t.icon = e.icon ? e.icon: "fa fa-commenting-o",
                                t.width = e.width ? e.width: 200,
                                t.height = e.height ? e.height: 30,
                                t.create = function() {
                                    var e = base.modal({
                                        label: "<i class='" + t.icon + "' style='margin-right:4px;font-size:20px;'></i>" + t.label,
                                        context: "<div style='text-align:center;font-size:13px;padding:5px;'>" + t.text + "</div>",
                                        width: t.width,
                                        height: t.height,
                                        contentStyle: "overflow:auto,padding:20px 0",
                                        labelStyle: "font-size:14px",
                                        buttons: [{
                                            label: "关闭",
                                            cls: "btn btn-info",
                                            clickEvent: function() {
                                                e.hide()
                                            }
                                        }]
                                    })
                                },
                                t.create(),
                                t
                        },
                        base.alert = function(e, t) {
                            var a = {};
                            return a.text = e ? e: "",
                                a.width = 200,
                                a.height = 30,
                                a.callback = t ? t: null,
                                a.create = function() {
                                    var e = base.modal({
                                        label: "<i class='fa fa-exclamation-circle' style='margin-right:4px;color:red;font-size:20px;'></i>提示",
                                        context: "<div style='text-align:center;font-size:13px;'>" + a.text + "</div>",
                                        width: a.width,
                                        height: a.height,
                                        contentStyle: "overflow:hidden,padding:20px 0",
                                        labelStyle: "font-size:14px",
                                        buttons: [{
                                            label: "关闭",
                                            cls: "btn btn-info",
                                            clickEvent: function() {
                                                a.callback && a.callback(),
                                                    e.hide()
                                            }
                                        }]
                                    })
                                },
                                a.create(),
                                a
                        },
                        base.findParentToArray = function(e, t) {
                            var a = {};
                            a.data = e ? e: null,
                                a.id = t ? t: null;
                            var n = [];
                            return a.data && a.id && (a.find = function(e) {
                                a.data[e] && (n.push(a.data[e]), a.find(a.data[e].pid))
                            },
                                a.find(a.id)),
                                n.reverse()
                        },
                        base.tree = function(e) {
                            var t = {};
                            return t.container = e.container ? e.container: null,
                                t.setting = e.setting ? e.setting: null,
                                t.data = e.data ? e.data: null,
                                t.treeObj = null,
                                t.drawCallback = e.drawCallback ? e.drawCallback: null,
                                t.selectNodeId = e.selectNodeId ? e.selectNodeId: null,
                                t.expandAll = 0 != e.expandAll,
                                t.selectNode = function(e, a) {
                                    $(e).each(function(e, a) {
                                        return a.id == t.selectNodeId ? (t.treeObj.selectNode(a), t.treeObj.setting.callback.onClick(null, a.tId, a), !1) : void(a.children && a.children.length > 0 && t.selectNode(a.children))
                                    })
                                },
                                t.create = function() {
                                    if ($.fn.zTree.init(t.container, t.setting, t.data), t.treeObj = $.fn.zTree.getZTreeObj($(t.container).attr("id")), t.treeObj.expandAll(t.expandAll), t.drawCallback && t.drawCallback(t.treeObj), t.selectNodeId) {
                                        var e = t.selectNode(t.treeObj.getNodeByParam(t.selectNodeId), t.treeObj);
                                        t.treeObj.expandNode(e, !0, !1)
                                    }
                                },
                                t.destroy = function() {
                                    t.treeObj.destroy(),
                                        t.treeObj = null
                                },
                                t.create(),
                                t
                        },
                        base.steps = function(e) {
                            var t = {};
                            return t.data = e.data ? e.data: null,
                                t.container = e.container ? e.container: null,
                                t.width = 0,
                                t.height = e.height ? e.height: 300,
                            $(t.container).parents(".modal-body").length > 0 && (t.height = $(t.container).parents(".modal-body").innerHeight() - 50),
                            t.height <= 0 && (t.height = 300),
                                t.header = {},
                                t.body = {},
                                t.footer = {},
                                t.buttonbar = null,
                                t.animate = 0 != e.animate,
                                t.tipSize = e.tipSize ? e.tipSize: 30,
                                t.color = e.color ? e.color: "#039bda",
                                t.showNumber = 0 != e.showNumber,
                                t.buttons = e.buttons ? e.buttons: null,
                                t.lineHeight = e.lineHeight ? e.lineHeight: 10,
                                t.buttonGroupToggle = e.buttonGroupToggle ? e.buttonGroupToggle: null,
                                t.headerHeight = 90,
                            t.container && (t.width = $(t.container).width()),
                                t.currentStep = e.currentStep ? e.currentStep: 0,
                            t.currentStep > t.data.length && (t.currentStep = t.data.length),
                                t.create = function() {
                                    $(t.container).html(""),
                                    t.data && t.data.length > 0 && (t.setHeader(), t.setBody(), t.setFooter())
                                },
                                t.setHeader = function(e) {
                                    t.header.element = document.createElement("div"),
                                        $(t.header.element).addClass("ui-steps-header"),
                                        $(t.header.element).css("height", t.headerHeight),
                                        $(t.container).append(t.header.element),
                                        t.header.createStepbar = function() {
                                            t.header.stepbar = document.createElement("ul"),
                                                $(t.header.stepbar).addClass("ui-steps-stepbar"),
                                                $(t.header.element).append(t.header.stepbar),
                                                t.header.createItem = function(e, a) {
                                                    var n = document.createElement("li");
                                                    $(t.header.stepbar).append(n),
                                                        $(n).css("width", t.width / t.data.length);
                                                    var r = document.createElement("div");
                                                    $(r).attr("type", "label"),
                                                        $(r).html(e.label),
                                                        $(n).append(r);
                                                    var o = document.createElement("div");
                                                    $(o).attr("type", "tip"),
                                                        $(o).css("width", t.tipSize),
                                                        $(o).css("height", t.tipSize),
                                                    t.showNumber && $(o).html(a + 1),
                                                        $(o).css("line-height", t.tipSize + "px"),
                                                        $(o).css("font-size", t.tipSize / 3 * 2),
                                                        $(n).append(o)
                                                },
                                                $(t.data).each(function(e, a) {
                                                    t.header.createItem(a, e)
                                                })
                                        },
                                        t.header.createLinebar = function() {
                                            t.header.linebar = document.createElement("div"),
                                                $(t.header.linebar).addClass("ui-steps-linebar"),
                                                $(t.header.linebar).css("width", t.width / t.data.length * (t.data.length - 1)),
                                                $(t.header.linebar).css("margin-left", t.width / t.data.length / 2),
                                                $(t.header.linebar).css("margin-right", t.width / t.data.length / 2),
                                                $(t.header.linebar).css("height", t.lineHeight),
                                                $(t.header.element).append(t.header.linebar),
                                                $(t.header.linebar).css("top", -t.tipSize + t.lineHeight),
                                                t.header.line = document.createElement("div"),
                                                $(t.header.line).addClass("ui-steps-line"),
                                                $(t.header.linebar).append(t.header.line)
                                        },
                                        t.header.step = function(e) {
                                            var a = $(t.header.linebar).width() / (t.data.length - 1) * t.currentStep;
                                            t.animate ? $(t.header.line).animate({
                                                width: a
                                            }) : $(t.header.line).css("width", a),
                                                $(t.header.stepbar).find("li").removeClass("active"),
                                                $(t.header.stepbar).find("li").slice(0, t.currentStep + 1).addClass("active")
                                        },
                                        t.header.back = function() {
                                            t.currentStep <= 0 || (t.currentStep = t.currentStep - 1, t.header.step(!0))
                                        },
                                        t.header.forward = function() {
                                            t.currentStep != t.data.length - 1 && (t.currentStep = t.currentStep + 1, t.header.step(!1))
                                        },
                                        t.header.createStepbar(),
                                        t.header.createLinebar(),
                                        t.header.step()
                                },
                                t.getStep = function() {
                                    return t.currentStep
                                },
                                t.getStepCount = function() {
                                    return t.data.length
                                },
                                t.toStep = function(e) {
                                    e < 0 && (e = 0),
                                    e > t.data.length - 1 && (e = t.data.length - 1),
                                    e != t.currentStep && (e < t.currentStep ? (t.currentStep = e, t.header.step(), t.body.step(), t.footer.check()) : (t.currentStep = e, t.header.step(), t.body.step(), t.footer.check()))
                                },
                                t.setBody = function() {
                                    t.body.element = document.createElement("div"),
                                        $(t.body.element).addClass("ui-steps-body"),
                                        $(t.container).append(t.body.element),
                                        t.body.createCarousel = function() {
                                            t.body.carouselbar = document.createElement("ul"),
                                                $(t.body.carouselbar).addClass("ui-steps-carouselbar"),
                                                $(t.body.element).append(t.body.carouselbar),
                                                $(t.body.carouselbar).css("width", $(t.container).width() * t.data.length),
                                                $(t.data).each(function(e, a) {
                                                    t.body.createCarouselItem(a, e)
                                                })
                                        },
                                        t.body.createCarouselItem = function(e, a) {
                                            var n = document.createElement("li");
                                            $(t.body.carouselbar).append(n),
                                                $(n).html(e.content),
                                                $(n).css("width", $(t.container).width()),
                                                $(n).css("height", t.height - t.headerHeight),
                                                base.scroll({
                                                    container: n
                                                }),
                                            a == t.currentStep && $(n).addClass("active"),
                                            e.contentToggle && ($(n).html($(e.contentToggle).children().clone()), $(e.contentToggle).remove(), $(n).find("*").on("keydown",
                                                function(e) {
                                                    var t = e.keyCode || e.which;
                                                    if (9 === t) {
                                                        var a = this.selectionStart,
                                                            n = this.selectionEnd;
                                                        this.value = this.value.substring(0, a) + "\t" + this.value.substring(n),
                                                            this.selectionStart = this.selectionEnd = a + 1,
                                                            e.preventDefault()
                                                    }
                                                })),
                                            e.contentUrl && base.loadPage({
                                                container: n,
                                                url: e.contentUrl,
                                                callback: o.callback ? o.callback: null
                                            }),
                                            e.content && $(n).html(e.content),
                                            e.callback && e.callback(t)
                                        },
                                        t.body.step = function(e) {
                                            var a = -t.width * t.currentStep;
                                            $(t.body.carouselbar).children("li").show(),
                                                t.animate ? $(t.body.carouselbar).animate({
                                                        marginLeft: a
                                                    },
                                                    function() {
                                                        $(t.body.carouselbar).children("li").removeClass("active"),
                                                            $(t.body.carouselbar).children("li:eq(" + t.currentStep + ")").addClass("active")
                                                    }) : ($(t.body.carouselbar).css("margin-left", a), $(t.body.carouselbar).children("li").removeClass("active"), $(t.body.carouselbar).children("li:eq(" + t.currentStep + ")").addClass("active"))
                                        },
                                        t.body.back = function() {
                                            t.currentStep < 0 || t.body.step(!0)
                                        },
                                        t.body.forward = function() {
                                            t.currentStep != t.data.length && t.body.step(!1)
                                        },
                                        t.body.createCarousel(),
                                        t.body.step()
                                },
                                t.back = function(e) {
                                    e && !e(t) || (t.header.back(), t.body.back(), t.footer.check())
                                },
                                t.forward = function(e) {
                                    e && !e(t) || (t.header.forward(), t.body.forward(), t.footer.check())
                                },
                                t.setFooter = function() {
                                    t.buttonGroupToggle ? t.footer.element = $(t.buttonGroupToggle) : (t.footer.element = document.createElement("div"), $(t.footer.element).addClass("ui-steps-footer"), $(t.container).append(t.footer.element)),
                                        t.footer.createButton = function() {
                                            t.buttons && t.buttons.length > 0 && $(t.buttons).each(function(e, a) {
                                                var n = null,
                                                    r = a.type;
                                                "back" == r && (r = "prev"),
                                                "forward" == r && (r = "next");
                                                var o = a.cls ? a.cls + " " + r: "btn btn-info " + r,
                                                    l = null,
                                                    i = a.icon ? a.icon: null,
                                                    c = a.iconPosition ? a.iconPosition: "first";
                                                switch (r) {
                                                    case "prev":
                                                        n = a.label ? a.label: "上一步",
                                                            l = function(e) {
                                                                var n = a.callback ? a.callback: null;
                                                                t.back(n)
                                                            };
                                                        break;
                                                    case "next":
                                                        n = a.label ? a.label: "下一步",
                                                            l = function(e) {
                                                                var n = a.callback ? a.callback: null;
                                                                t.forward(n)
                                                            };
                                                        break;
                                                    case "confirm":
                                                        n = a.label ? a.label: "确定",
                                                            l = function(e) {
                                                                a.callback && !a.callback(e, t)
                                                            };
                                                        break;
                                                    default:
                                                        n = a.label ? a.label: null,
                                                            l = function(e) {
                                                                a.callback && !a.callback(e, t)
                                                            }
                                                }
                                                base.form.button({
                                                    container: t.footer.element,
                                                    label: n,
                                                    icon: i,
                                                    cls: o,
                                                    iconPosition: c,
                                                    clickEvent: l
                                                })
                                            })
                                        },
                                        t.footer.check = function(e) {
                                            var a = t.getStepCount();
                                            0 == t.currentStep ? ($(t.footer.element).find(".back").addClass("disabled"), $(t.footer.element).find(".back").hide(), $(t.footer.element).find(".forward").removeClass("disabled"), $(t.footer.element).find(".forward").show(), $(t.footer.element).find(".prev").addClass("disabled"), $(t.footer.element).find(".prev").hide(), $(t.footer.element).find(".next").removeClass("disabled"), $(t.footer.element).find(".next").show(), $(t.footer.element).find(".confirm").addClass("disabled"), $(t.footer.element).find(".confirm").hide()) : t.currentStep == a - 1 ? ($(t.footer.element).find(".back").removeClass("disabled"), $(t.footer.element).find(".back").show(), $(t.footer.element).find(".forward").addClass("disabled"), $(t.footer.element).find(".forward").hide(), $(t.footer.element).find(".prev").removeClass("disabled"), $(t.footer.element).find(".prev").show(), $(t.footer.element).find(".next").addClass("disabled"), $(t.footer.element).find(".next").hide(), $(t.footer.element).find(".confirm").removeClass("disabled"), $(t.footer.element).find(".confirm").show()) : ($(t.footer.element).find(".back").removeClass("disabled"), $(t.footer.element).find(".back").show(), $(t.footer.element).find(".forward").removeClass("disabled"), $(t.footer.element).find(".forward").show(), $(t.footer.element).find(".prev").removeClass("disabled"), $(t.footer.element).find(".prev").show(), $(t.footer.element).find(".next").removeClass("disabled"), $(t.footer.element).find(".next").show(), $(t.footer.element).find(".confirm").addClass("disabled"), $(t.footer.element).find(".confirm").hide())
                                        },
                                        t.footer.createButton(),
                                        t.footer.check()
                                },
                                t.create(),
                                t
                        },
                        base.pull = function(e) {
                            var t = {};
                            return t.container = e.container ? e.container: null,
                                t.pull = null,
                                t.width = e.width ? e.width: 8,
                                t.height = e.height ? e.height: 50,
                                t.bg = e.bg ? e.bg: "#fff",
                                t.hoverBg = e.hoverBg ? e.hoverBg: "#eee",
                                t.show = !e.show || e.show,
                                t.callback = e.callback ? e.callback: null,
                                t.target = e.target ? e.target: null,
                                t.animate = !e.animate || e.animate,
                                t.color = e.color ? e.color: "#333",
                                t.border = e.border ? e.border: "#aaa",
                                t.pullbtn = e.pullbtn ? e.pullbtn: null,
                                t.create = function() {
                                    t.pull = document.createElement("div"),
                                        $(t.pull).css("float", "left"),
                                        $(t.pull).css("width", t.width),
                                        $(t.pull).css("height", t.height),
                                        $(t.pull).css("position", "absolute"),
                                        $(t.pull).css("text-align", "center"),
                                        $(t.pull).css("cursor", "pointer"),
                                        $(t.pull).css("font-size", "12px"),
                                        $(t.pull).css("padding-top", t.height / 4 + 2),
                                        t.pullbtn ? ($(t.pull).css("background-image", "url('" + t.pullbtn + "')"), $(t.pull).css("background-position", "0px 0px")) : ($(t.pull).css("background-color", t.bg), $(t.pull).css("border", "1px solid " + t.border)),
                                        $(t.pull).css("color", t.color),
                                        $(t.pull).attr("type", "pull"),
                                        t.setPosition(),
                                        $(t.pull).hover(function() {
                                                t.pullbtn ? $(this).css("background-position", "-8px 0px") : $(this).css("background-color", t.hoverBg)
                                            },
                                            function() {
                                                t.pullbtn ? $(this).css("background-position", "0px 0px") : $(this).css("background-color", t.bg)
                                            }),
                                        $(t.pull).css("z-index", "1000"),
                                        $(t.container).parent().parent().append(t.pull),
                                        t.toggle(),
                                        $(t.pull).on("click",
                                            function() {
                                                t.show = !t.show,
                                                    t.toggle()
                                            }),
                                        $(window).on("resize",
                                            function() {
                                                t.setPosition()
                                            })
                                },
                                t.setPosition = function() {
                                    $(t.pull).css("top", $(t.container).height() / 2 - t.height / 2 + "px"),
                                        $(t.pull).css("left", 11 - t.width)
                                },
                                t.toggle = function() {
                                    $(t.container).length > 0 && (t.show ? ($(t.pull).html("<i class='fa fa-caret-left'></i>"), t.target && (t.animate ? $(t.target).animate({
                                        left: $(t.container).outerWidth()
                                    }) : $(t.target).css("left", $(t.container).outerWidth())), $(t.container).show()) : ($(t.pull).html("<i class='fa fa-caret-right'></i>"), t.target && (t.animate ? $(t.target).animate({
                                        left: 0
                                    }) : $(t.target).css("left", 0)), $(t.container).hide()), t.callback && t.callback(t))
                                },
                                t.create(),
                                t
                        },
                        base.msg = function(e) {
                            var t = {};
                            return t.content = e.content ? e.content: "",
                                t.position = e.position ? e.position: "rightBottom",
                                t.label = e.label ? e.label: "消息",
                                t.create = function() {
                                    t.createHeader(),
                                        t.crreateBody()
                                },
                                t.createHeader = function() {},
                                t.crreateBody = function() {},
                                t.create(),
                                t
                        },
                        base.getUrlParam = function(e) {
                            var t = new RegExp("(^|&)" + e + "=([^&]*)(&|$)"),
                                a = window.location.search.substr(1).match(t);
                            return null != a ? unescape(a[2]) : null
                        },
                        base.cookie = function(e) {
                            var t = {};
                            t.path = e.path ? e.path: "/",
                                t.name = e.name ? e.name: null,
                                t.value = e.value ? e.value: null,
                                t.days = e.days ? e.days: null,
                                t.option = {},
                            t.days && (t.option.expires = t.days),
                            t.path && (t.option.path = t.path),
                                t.create = function() {
                                    t.name && t.setCookie()
                                },
                                t.setCookie = function() {
                                    $.cookie(t.name, t.value, t.option)
                                },
                                t.getCookie = function(e) {
                                    $.cookie(t.name)
                                },
                                t.create()
                        },
                        base.treeTable = function(e) {
                            var t = {};
                            t.setting = e.setting ? e.setting: null,
                                t.container = e.container ? e.container: null,
                                t.expandAll = 1 == e.expandAll,
                                t.create = function() {
                                    require(["treeTable"],
                                        function() {
                                            $(t.container).removeClass("treetable"),
                                                $(t.container).treetable(t.setting),
                                            t.expandAll && t.expandAllCallback()
                                        })
                                },
                                t.create(),
                                t.expandAllCallback = function() {
                                    $(t.container).treetable("expandAll")
                                }
                        },
                        base.getDate = function(e) {
                            e || (e = (new Date).format("yyyy-MM-dd HH:mm:ss"));
                            var t = null,
                                a = null,
                                n = null,
                                r = 0,
                                o = 0,
                                l = 0,
                                i = null,
                                c = null,
                                s = e.split(" ");
                            return s.length > 0 && (i = s[0].split("-"), i[0] && (t = i[0]), i[1] && (a = i[1] - 1), i[2] && (n = i[2])),
                            2 == s.length && (c = s[1].split(":"), c[0] && (r = c[0]), c[1] && (o = c[1]), c[2] && (l = c[2])),
                                new Date(t, a, n, r, o, l)
                        },
                        base.xmlHttpRequest = function() {
                            var e;
                            try {
                                e = new XMLHttpRequest
                            } catch(t) {
                                try {
                                    e = new ActiveXObject("Msxml2.XMLHTTP")
                                } catch(t) {
                                    try {
                                        e = new ActiveXObject("Microsoft.XMLHTTP")
                                    } catch(e) {}
                                }
                            }
                            return e
                        },
                        base.getByteLen = function(e) {
                            for (var t = 0,
                                     a = 0; a < e.length; a++) {
                                var n = new RegExp(/[^\x00-\xff]/gi),
                                    r = e[a];
                                t += n.test(r) ? 2 : 1
                            }
                            return t
                        },
                        base.dragPickBox = function(e) {
                            var t = {};
                            return t.items = e.items ? e.items: null,
                                t.boxes = e.boxes ? e.boxes: null,
                                t.mouseX = 0,
                                t.mouseY = 0,
                                t.name = "dragPick",
                                t.dragElement = null,
                                t.factor = base.getRandom(1e3, 9999),
                                t.boxRange = [],
                                t.multiple = 1 == e.multiple,
                                t.actveBox = null,
                                t.hasRemoveTools = 0 != e.removeTools,
                                t.removeToolsSize = e.removeToolsSize ? e.removeToolsSize: 14,
                                t.clickEvent = e.clickEvent ? e.clickEvent: null,
                                t.destory = function() {
                                    $(document).unbind("mousedown"),
                                        $(document).unbind("mouseup"),
                                        $(document).unbind("mousemove")
                                },
                                t.create = function() {
                                    t.destory(),
                                        t.setItems(),
                                        t.setBoxes(),
                                        document.body.onselectstart = function() {
                                            return ! 1
                                        },
                                        t.init(),
                                        t.setMouseMove(),
                                        t.setMouseDown(),
                                        t.setMouseUp()
                                },
                                t.setItems = function() {
                                    $(t.items).addClass(t.factor + t.name + "Item"),
                                        base.unselect(t.items)
                                },
                                t.setBoxes = function() {
                                    $(t.boxes).addClass(t.factor + t.name + "Box"),
                                        $(t.boxes).css("overflow", "auto"),
                                        base.unselect(t.boxes),
                                        t.empty(t.boxes)
                                },
                                t.setMouseDown = function() {
                                    $(document).on("mousedown",
                                        function(e) {
                                            var e = e || window.event,
                                                a = e.target || e.srcElement,
                                                n = null,
                                                r = $(a).parents("." + t.factor + t.name + "Item");
                                            r.length > 0 ? n = r[0] : $(a).hasClass(t.factor + t.name + "Item") && (n = a),
                                            n && (t.createDragElement(n), t.clickEvent && t.clickEvent(n))
                                        })
                                },
                                t.setMouseMove = function() {
                                    $(document).on("mousemove",
                                        function(e) {
                                            e = e || window.event,
                                                t.mouseX = e.clientX,
                                                t.mouseY = e.clientY,
                                            t.dragElement && (t.setDragPosition(), t.touchEvent(e))
                                        })
                                },
                                t.removeDragElement = function() {
                                    $(t.dragElement).remove(),
                                        t.dragElement = null
                                },
                                t.setMouseUp = function() {
                                    $(document).on("mouseup",
                                        function(e) {
                                            t.pick(),
                                                t.clearActiveBox(),
                                                t.removeDragElement()
                                        })
                                },
                                t.empty = function(e) {
                                    $(e).each(function(e, a) {
                                        var n = "float:left;width:100%;color:#ddd;text-align:center;font-size:" + t.removeToolsSize + "px;padding-top:" + ($(a).innerHeight() / 2 - 2 - t.removeToolsSize / 2) + "px";
                                        $(a).html("<div style='" + n + "'>暂无</div>")
                                    })
                                },
                                t.pick = function() {
                                    if (t.activeBox) {
                                        var e = $(t.dragElement).attr("uid");
                                        if (t.checkRepeat(e)) return void base.alert("不能重复添加");
                                        if (t.hasRemoveTools && t.createRemoveTools(t.activeBox), t.multiple) $(t.activeBox).append("<div uid ='" + e + "' style='padding:5px;float:left;width:100%;text-align:center;'>" + $(t.dragElement).html() + "</div>");
                                        else {
                                            var a = "float:left;width:100%;text-align:center;font-size:" + t.removeToolsSize + "px;padding-top:" + ($(t.activeBox).innerHeight() / 2 - 2 - t.removeToolsSize - 4 - t.removeToolsSize / 2) + "px";
                                            $(t.activeBox).children("div").remove(),
                                                $(t.activeBox).append("<div uid ='" + e + "' style='" + a + "'>" + $(t.dragElement).html() + "</div>")
                                        }
                                    }
                                },
                                t.checkRepeat = function(e) {
                                    return $(t.activeBox).children("div[uid='" + e + "']").length > 0
                                },
                                t.createRemoveTools = function(e) {
                                    var a = document.createElement("i");
                                    $(a).addClass("fa fa-trash-o");
                                    var n = "font-size:" + t.removeToolsSize + "px;cursor:pointer;float:right;margin:2px;";
                                    $(a).attr("style", n),
                                        $(a).attr("title", "移除"),
                                        $(a).addClass("remove" + t.name + "Tools"),
                                        $(e).find(".remove" + t.name + "Tools").remove(),
                                        $(e).append(a),
                                        $(a).on("click",
                                            function() {
                                                t.empty(e)
                                            })
                                },
                                t.touchEvent = function(e) {
                                    e = e || window.event,
                                        $(t.boxRange).each(function(e, a) {
                                            var n = t.mouseX - $(t.dragElement).outerWidth() / 2,
                                                r = t.mouseX + $(t.dragElement).outerWidth() / 2,
                                                o = t.mouseY - $(t.dragElement).outerHeight() / 2,
                                                l = t.mouseY + $(t.dragElement).outerHeight() / 2,
                                                i = !1;
                                            return n <= a.x2 && r >= a.x1 && o <= a.y2 && l >= a.y1 ? (i = !0, t.setActiveBox(a.element), !1) : void(i || t.clearActiveBox())
                                        })
                                },
                                t.setActiveBox = function(e) {
                                    t.clearActiveBox(),
                                        $(e).css("border", "1px solid #0000ff"),
                                        t.activeBox = e
                                },
                                t.clearActiveBox = function() {
                                    $(t.boxes).css("border", "1px solid #ddd"),
                                        t.activeBox = null
                                },
                                t.init = function(e) {
                                    t.boxRange = [],
                                    e && (t.boxes = e),
                                        $(t.boxes).each(function(e, a) {
                                            t.boxRange.push({
                                                x1: $(a).offset().left,
                                                x2: $(a).offset().left + $(a).outerWidth(),
                                                y1: $(a).offset().top,
                                                y2: $(a).offset().top + $(a).outerHeight(),
                                                index: e,
                                                element: a
                                            })
                                        }),
                                        $(e).each(function(e, a) {
                                            $(a).find(".removedragPickTools").on("click",
                                                function() {
                                                    t.empty(a)
                                                })
                                        })
                                },
                                t.setDragPosition = function() {
                                    $(t.dragElement).css("left", t.mouseX - $(t.dragElement).outerWidth() / 2),
                                        $(t.dragElement).css("top", t.mouseY - $(t.dragElement).outerHeight() / 2)
                                },
                                t.createDragElement = function(e) {
                                    t.dragElement = null,
                                        t.dragElement = document.createElement("div"),
                                        $(t.dragElement).css("position", "absolute"),
                                        $(t.dragElement).css("z-index", 1e4),
                                        $(t.dragElement).css("padding", "5px 10px"),
                                        base.unselect(t.dragElement),
                                        $(t.dragElement).css("background", "#f2f2f2"),
                                        $(t.dragElement).css("cursor", "move"),
                                        $(t.dragElement).css("border", "1px solid #ddd"),
                                        $(t.dragElement).attr("uid", $(e).attr("uid")),
                                        $(t.dragElement).addClass(t.factor + t.name + "Drag"),
                                        base.unselect(t.dragElement),
                                        $(t.dragElement).html($(e).attr("uv")),
                                        $("body").append(t.dragElement),
                                        t.setDragPosition(),
                                        $(t.dragElement).focus()
                                },
                                t.getData = function() {},
                                t.create(),
                                t
                        },
                        base.unselect = function(e) {
                            $(e).css("-moz-user-select", "none"),
                                $(e).css("-khtml-user-select", "none"),
                                $(e).css("user-select", "none"),
                                $(e).attr("unselectable", "on"),
                                $(e).attr("onselectstart", "return false")
                        },
                        base.findData = function(e, t, a) {
                            var n = null;
                            return $(a).each(function(a, r) {
                                if (r[e] == t) return n = r,
                                    !1
                            }),
                                n
                        },
                        base.changeData = function(e) {
                            var t = {};
                            return t.data = e.data ? e.data: null,
                                t.key = e.key ? e.key: null,
                                t.value = e.value ? e.value: null,
                                t.newData = e.newData ? e.newData: null,
                                $(t.data).each(function(e, a) {
                                    if (a[t.key] == t.value) {
                                        for (var n in t.newData) a[n] = t.newData[n];
                                        return ! 1
                                    }
                                }),
                                t.data
                        },
                        base.getNowDate = function(e, t) {
                            var a = null;
                            return a = e ? t ? (new Date).Format("yyyy年M月d日") : (new Date).Format("yyyy年MM月dd日") : t ? (new Date).Format("yyyy-M-d") : (new Date).Format("yyyy-MM-dd")
                        },
                        base.getNowTime = function(e, t) {
                            var a = null;
                            return a = e ? t ? (new Date).Format("yyyy年M月d日 h:m:s") : (new Date).Format("yyyy年MM月dd日 hh:mm:ss") : t ? (new Date).Format("yyyy-M-d h:m:s") : (new Date).Format("yyyy-MM-dd hh:mm:ss")
                        },
                        base.getDateByMonth = function(e, t) {
                            var a = new Date;
                            return t ? new Date(a.getFullYear(), a.getMonth() + e, a.getDate(), a.getHours(), a.getMinutes(), a.getSeconds()).Format("yyyy-MM-dd hh:mm:ss") : new Date(a.getFullYear(), a.getMonth() + e, a.getDate()).Format("yyyy-MM-dd")
                        },
                        base.getDateByDay = function(e, t) {
                            var a = new Date;
                            return t ? new Date(a.getFullYear(), a.getMonth(), a.getDate() + e, a.getHours(), a.getMinutes(), a.getSeconds()).Format("yyyy-MM-dd hh:mm:ss") : new Date(a.getFullYear(), a.getMonth(), a.getDate() + e).Format("yyyy-MM-dd")
                        },
                        base.tabs = function(e) {
                            var t = {};
                            t.container = e.container ? e.container: null,
                                t.addEnable = 1 == e.addEnable,
                                t.closeEnable = 1 == e.closeEnable,
                                t.data = e.data ? e.data: null,
                                t.tabContainer = null,
                                t.id = e.id ? e.id: base.getRandom(1e3, 9999) + "tab",
                                t.create = function() {
                                    return t
                                },
                                t.init = function() {
                                    t.tabContainer = document.createElement("ul"),
                                        $(t.tabContainer).attr("id", t.id),
                                        $(t.tabContainer).addClass("nav nav-tabs"),
                                        $(t.data).each(function(e, a) {
                                            t.add(a)
                                        })
                                },
                                t.add = function(e) {
                                    var a = document.createElement("li");
                                    e || ($(a).append("<a href='###' data-toggle='tab'><i class='fa fa-plus'></i></a>"), t.tabContainer.append(a))
                                },
                                t.close = function() {},
                                t.create()
                        },
                        base.calendar = function(e) {
                            var t = {};
                            return t.calendarOption = e.calendarOption ? e.calendarOption: {},
                                t.container = e.container ? e.container: null,
                                t.data = e.data ? e.data: null,
                                t.calendarOption.locale = "zh-cn",
                                t.setData = function(e) {
                                    t.calendarOption.events = e,
                                        t.data = e
                                },
                            t.data && t.setData(t.data),
                            t.calendarOption.header || (t.calendarOption.header = {
                                left: "prev,next today",
                                center: "title",
                                right: "month,agendaWeek,agendaDay,listMonth"
                            }),
                                t.calendarOption.buttonIcons = !0,
                                t.calendarOption.defaultDate = e.date ? e.date: base.getNowDate(),
                                t.calendarOption.navLinks = !0,
                                t.calendarOption.editable = !0,
                                t.calendarOption.eventLimit = !0,
                            e.clickEvent && (t.calendarOption.eventClick = function(t, a) {
                                e.clickEvent(t)
                            }),
                                t.create = function() {
                                    return t.container && t.draw(),
                                        t
                                },
                                t.draw = function() {
                                    require(["moment", "calendarLocale"],
                                        function(e) {
                                            e.createFromInputFallback = function(e) {
                                                e._d = new Date(e._i)
                                            },
                                                $(t.container).fullCalendar(t.calendarOption)
                                        })
                                },
                                t.destroy = function() {
                                    $(t.container).fullCalendar("destroy")
                                },
                                t.reDraw = function(e, a) {
                                    t.destroy(),
                                        t.setData(e),
                                        t.container = a,
                                        t.draw()
                                },
                                t.findData = function(e) {
                                    var a = null;
                                    return e && $(t.data).each(function(t, n) {
                                        if (n.id == e) return a = n,
                                            !1
                                    }),
                                        a
                                },
                                t.create(),
                                t
                        },
                        base.pageEntity = function() {
                            var e = this;
                            e.init = function(e, t) {}
                        },
                        base.page = new base.pageEntity,
                        base.page.load = function(e) {
                            var t = {};
                            return t.container = e.container ? e.container: $(".ui-article"),
                                t.url = e.url ? e.url: null,
                                t.otherUrl = e.url ? e.otherUrl: null,
                                t.params = e.params ? e.params: null,
                                t.context = e.context ? e.context: null,
                                t.beforeCallback = e.beforeCallback ? e.beforeCallback: null,
                                t.callback = e.callback ? e.callback: null,
                                t.pageItem = null,
                                t.isUnique = 1 == e.isUnique,
                                t.pageGroup = null,
                                t.load = function() {
                                    t.container.length > 0 && (0 == $(t.container).children(".ui-page-group").length ? (t.pageGroup = document.createElement("div"), $(t.pageGroup).addClass("ui-page-group"), $(t.container).append(t.pageGroup)) : t.pageGroup = $(t.container).children(".ui-page-group")[0], t.pageItem = document.createElement("div"), $(t.pageItem).addClass("ui-page-item"), $(t.pageGroup).find(".ui-page-item").removeClass("active"), $(t.pageItem).addClass("active"), t.context ? (t.beforeCallback && t.beforeCallback(t), t.isUnique && $(t.pageGroup).children().remove(), $(t.pageItem).attr("pageLevel", $(t.pageGroup).find(".ui-page-item").length), $(t.pageItem).html(t.context), $(t.pageGroup).append(t.pageItem), t.callback && t.callback(t)) : t.url && base.ajax({
                                        type: "get",
                                        url: t.url,
                                        dataType: "text",
                                        params: t.params,
                                        success: function(e) {
                                            //如果含有title说明需要跳转到一个完整的页面
                                            var flag = true;
                                            $.each($(e),function(index,item){
                                                if($(item).is("title")){
                                                    flag=false;
                                                    window.open(t.otherUrl,"_self")
                                                }
                                            })
                                            if(flag){
                                                t.beforeCallback && t.beforeCallback(t),
                                                t.isUnique && $(t.pageGroup).children().remove(),
                                                $(t.pageItem).attr("pageLevel", $(t.pageGroup).find(".ui-page-item").length),
                                                $(t.pageItem).html(e),
                                                $(t.pageGroup).append(t.pageItem),
                                                t.callback && t.callback(t);
                                            }

                                        },
                                        beforeSend: function() {
                                            base.loading($(t.pageItem))
                                        },
                                        error: function() {
                                            $(t.pageItem).html("加载错误")
                                        }
                                    }))
                                },
                                t.load(),
                                t
                        },
                        base.page.back = function(e) {
                            var t = {};
                            return e || (e = {}),
                                t.pageItem = null,
                                t.pageLevel = null,
                                t.container = e.container ? e.container: $(".ui-page-group"),
                                t.beforeCallback = e.beforeCallback ? e.beforeCallback: null,
                                t.callback = e.callback ? e.callback: null,
                                t.back = function() {
                                    if (t.container.length > 0) {
                                        t.beforeCallback && t.beforeCallback(t),
                                            t.pageItem = $(t.container).children(".active");
                                        var e = t.pageItem.prev();
                                        e.length > 0 && (t.pageItem.siblings().removeClass("active"), e.addClass("active"), t.pageItem.remove()),
                                        t.callback && t.callback(t)
                                    }
                                },
                                t.back(),
                                t
                        },
                        base.page.crumbs = function(e) {
                            var t = {};
                            return t.create = function() {},
                                t.create(),
                                t
                        },
                        base.page.clearBack = function() {
                            $(document).ready(function(e) {
                                window.history && window.history.pushState && $(window).on("popstate",
                                    function() {
                                        window.history.pushState("forward", null, "#"),
                                            window.history.forward(1)
                                    }),
                                    "pushState" in history ? (window.history.pushState("forward", null, "#"), window.history.forward(1)) : (History.pushState("forward", null, "?state=2"), window.history.forward(1)),
                                    window.onhashchange = function() {
                                        History.pushState("forward", null, "?state=1")
                                    }
                            })
                        },
                        base.pillTabs = function(e) {
                            var t = {};
                            return t.container = e.container ? e.container: null,
                                t.cls = e.cls ? e.cls: null,
                                t.id = e.id ? e.id: null,
                                t.data = e.data ? e.data: null,
                                t.tabBar = null,
                                t.tabContainer = null,
                                t.tab = null,
                                t.leftArrowHandle = null,
                                t.rightArrowHandle = null,
                                t.activeIndex = e.activeIndex ? e.activeIndex: 0,
                                t.size = e.size ? e.size: 6,
                                t.itemHeight = e.itemHeight ? e.itemHeight: 30,
                                t.currentPageNumber = (t.activeIndex - t.activeIndex % t.size) / t.size,
                                t.pageNumberCount = (t.data.length - t.data.length % t.size) / t.size,
                                t.level = 0,
                                t.clickEvent = e.clickEvent ? e.clickEvent: null,
                                t.margin = 2,
                                t.isPageActive = 0 != e.isPageActive,
                                t.maxWidth = 150,
                                t.itemWidth = ($(t.container).width() - 80 - t.margin * t.size) / t.size,
                            t.itemWidth > t.maxWidth && (t.itemWidth = t.maxWidth),
                                t.create = function() {
                                    t.data && t.data.length > 0 && t.init()
                                },
                                t.init = function() {
                                    t.createTabBar(),
                                        t.createTabContainer(),
                                        t.createTab(),
                                        t.createHandle()
                                },
                                t.createTabBar = function() {
                                    t.tabBar = document.createElement("div"),
                                        $(t.tabBar).addClass("ui-tabBar"),
                                        $(t.container).append(t.tabBar)
                                },
                                t.createTabContainer = function() {
                                    t.tabContainer = document.createElement("div"),
                                        $(t.tabContainer).addClass("ui-tabContainer"),
                                        $(t.tabBar).append(t.tabContainer)
                                },
                                t.createTab = function() {
                                    t.tab = document.createElement("ul"),
                                        $(t.tab).addClass("ui-pillTabs"),
                                        base.setProperty(t.tab, e),
                                        $(t.tabContainer).append(t.tab),
                                        $(t.data).each(function(e, a) {
                                            t.createTabItem(a, e)
                                        })
                                },
                                t.createHandle = function() {
                                    t.data.length > t.size && ($(t.tabContainer).css("width", (t.itemWidth + t.margin) * t.size), $(t.tabContainer).css("overflow", "hidden"), $(t.tabContainer).css("float", "left"), t.leftArrowHandle = document.createElement("div"), $(t.leftArrowHandle).html("<i  style='font-size:18px' class='fa fa-angle-left'></i>"), $(t.tabBar).prepend(t.leftArrowHandle), t.rightArrowHandle = document.createElement("div"), $(t.leftArrowHandle).addClass("ui-pillTabs-handle"), $(t.rightArrowHandle).addClass("ui-pillTabs-handle"), $(t.leftArrowHandle).css("cursor", "pointer"), $(t.rightArrowHandle).css("cursor", "pointer"), $(t.rightArrowHandle).css("padding", 0), $(t.rightArrowHandle).html("<i style='font-size:18px' class='fa fa-angle-right'></i>"), $(t.tabBar).append(t.rightArrowHandle), $(t.tab).css("width", t.data.length * (t.itemWidth + t.margin) + "px"), $(t.leftArrowHandle).css("text-align", "center"), $(t.rightArrowHandle).css("text-align", "center"), $(t.leftArrowHandle).css("float", "left"), $(t.rightArrowHandle).css("float", "left"), $(t.leftArrowHandle).css("width", "40px"), $(t.rightArrowHandle).css("width", "40px"), $(t.leftArrowHandle).on("click",
                                        function() {
                                            t.isPageActive ? t.currentPageNumber > 0 && t.setPageActive(t.currentPageNumber--) : t.activeIndex > 0 && (t.activeIndex--, t.setItemActive())
                                        }), $(t.rightArrowHandle).on("click",
                                        function() {
                                            t.isPageActive ? t.currentPageNumber < t.pageNumberCount && t.setPageActive(t.currentPageNumber++) : t.activeIndex < t.data.length - 1 && (t.activeIndex++, t.setItemActive())
                                        }))
                                },
                                t.setPageActive = function() {
                                    var e = (t.itemWidth + t.margin) * t.size * t.currentPageNumber;
                                    $(t.tab).animate({
                                        marginLeft: -e
                                    })
                                },
                                t.setItemActive = function() {
                                    $(t.tab).children("li").removeClass("active");
                                    var e = $(t.tab).children("li:eq(" + t.activeIndex + ")");
                                    $(e).addClass("active");
                                    var a = t.data[t.activeIndex];
                                    if (a.clickEvent ? a.clickEvent(e, a, t) : t.clickEvent && t.clickEvent(e, a, t), !t.isPageActive) {
                                        var n = (t.activeIndex - t.activeIndex % t.size) / t.size;
                                        if (n != t.level) {
                                            var r = n * (t.itemWidth + t.margin) * t.size;
                                            $(t.tab).animate({
                                                marginLeft: -r
                                            }),
                                                t.level = n
                                        }
                                    }
                                },
                                t.createTabItem = function(e, a) {
                                    if (e) {
                                        var n = document.createElement("li");
                                        $(n).attr("title", e.name),
                                            $(n).css("width", t.itemWidth),
                                            $(n).css("margin-right", t.margin + "px"),
                                        e.imageIcon && $(n).append("<img src='" + e.imageIcon + "'/>"),
                                        e.icon && $(n).append("<i class='" + e.icon + "'></i>"),
                                        e.name && $(n).append("<span>" + e.name + "</span>"),
                                        e.value && $(n).attr("val", e.value),
                                            $(t.tab).append(n),
                                            $(n).on("click",
                                                function() {
                                                    t.activeIndex = a,
                                                        t.setItemActive()
                                                }),
                                        a == t.activeIndex && t.setItemActive()
                                    }
                                },
                                t.create(),
                                t
                        },
                        base.accordion = function(e) {
                            var t = {};
                            return t.container = e.container ? e.container: null,
                                t.accordion = null,
                                t.data = e.data ? e.data: null,
                                t.id = e.id ? e.id: "accordion" + base.getRandom(1e3, 9999),
                                t.name = e.name ? e.name: base.getRandomString(8),
                                t.fixed = 0 != e.fixed,
                                t.currentIndex = 0,
                                t.firstIn = 0 != e.firstIn,
                                t.create = function() {
                                    t.container && t.data && t.data.length > 0 && t.createAccordion()
                                },
                                t.createAccordion = function() {
                                    t.accordion = document.createElement("div"),
                                        $(t.accordion).addClass("panel-group"),
                                        $(t.container).append(t.accordion),
                                        e.id = t.id,
                                        base.setProperty(t.accordion, e),
                                        t.createAccordionItem()
                                },
                                t.createAccordionItem = function() {
                                    $(t.data).each(function(e, a) {
                                        var n = document.createElement("div");
                                        $(n).addClass("panel panel-default"),
                                            $(t.accordion).append(n),
                                            t.createAccordionItemHeader(n, a, e),
                                            t.createAccordionItemBody(n, a, e)
                                    }),
                                        t.setEvent()
                                },
                                t.createAccordionItemHeader = function(e, a, n) {
                                    var r = document.createElement("div");
                                    $(r).addClass("panel-heading"),
                                        $(e).append(r);
                                    var o = document.createElement("h4");
                                    $(r).append(o),
                                        $(o).addClass("panel-title");
                                    var l = document.createElement("a");
                                    $(o).append(l),
                                    a.icon && $(l).append("<i class='" + a.icon + "'></i>"),
                                    a.label && $(l).append("<span>" + a.label + "</span>"),
                                        $(l).attr("data-toggle", "collapse"),
                                        $(l).attr("data-parent", "#" + t.id),
                                        $(l).addClass("collapsed"),
                                        $(l).attr("href", "#" + t.name + n),
                                        $(l).attr("aria-expanded", "false")
                                },
                                t.createAccordionItemBody = function(a, n, r) {
                                    var o = document.createElement("div");
                                    $(a).append(o),
                                        $(o).attr("index", r),
                                        $(o).attr("id", t.name + r),
                                        $(o).addClass("panel-collapse collapse"),
                                    t.firstIn && 0 == r && $(o).addClass("in"),
                                        $(o).attr("aria-expanded", "false");
                                    var l = document.createElement("div");
                                    if ($(l).addClass("panel-body"), $(l).attr("id", base.getRandomString(10) + r), $(o).append(l), n.context && $(l).html(n.context), n.callback ? n.callback(l, n, t) : e.callback && n.callback(l, t.data), t.fixed) {
                                        var i = $(t.container).innerHeight() - $(a).find(".panel-heading").outerHeight() * t.data.length;
                                        $(l).css("height", i),
                                            base.scroll({
                                                container: $(l)
                                            })
                                    }
                                },
                                t.setEvent = function() {
                                    t.show(),
                                        t.shown(),
                                        t.hide(),
                                        t.hidden()
                                },
                                t.show = function() {
                                    $(t.accordion).on("show.bs.collapse",
                                        function(e) {
                                            t.currentIndex = $(e.target).attr("index"),
                                            t.showEvent && t.showEvent()
                                        })
                                },
                                t.shown = function() {
                                    $(t.accordion).on("shown.bs.collapse",
                                        function(e) {
                                            t.shownEvent && t.shownEvent()
                                        })
                                },
                                t.hide = function() {
                                    $(t.accordion).on("hide.bs.collapse",
                                        function(e) {
                                            t.hideEvent && t.hideEvent()
                                        })
                                },
                                t.hidden = function() {
                                    $(t.accordion).on("hidden.bs.collapse",
                                        function(e) {
                                            t.hiddenEvent && t.hiddenEvent()
                                        })
                                },
                                t.create(),
                                t
                        },
                        base.utf16to8 = function(e) {
                            var t, a, n, r;
                            for (t = "", n = e.length, a = 0; a < n; a++) r = e.charCodeAt(a),
                                r >= 1 && r <= 127 ? t += e.charAt(a) : r > 2047 ? (t += String.fromCharCode(224 | r >> 12 & 15), t += String.fromCharCode(128 | r >> 6 & 63), t += String.fromCharCode(128 | r >> 0 & 63)) : (t += String.fromCharCode(192 | r >> 6 & 31), t += String.fromCharCode(128 | r >> 0 & 63));
                            return t
                        },
                        base.qrcode = function(e) {
                            var t = {};
                            return t.container = e.container ? e.container: null,
                                t.text = e.text ? e.text: null,
                                t.callback = e.callback ? e.callback: null,
                                t.width = e.width ? e.width: 100,
                                t.height = e.height ? e.height: 100,
                                t.foreground = e.foreground ? e.foreground: "#000",
                                t.background = e.background ? e.background: "#fff",
                                t.option = {
                                    width: t.width,
                                    height: t.height,
                                    text: t.text,
                                    render: t.container,
                                    foreground: t.foreground,
                                    background: t.background
                                },
                                t.create = function() {
                                    require(["qrcode"],
                                        function() {
                                            t.container && t.text && (t.option.text = base.utf16to8(t.option.text), $(t.container).qrcode(t.option), t.callback && t.callback(t))
                                        })
                                },
                                t.create(),
                                t
                        },
                        base.wrap = function(e, t) {
                            var a = e.replace(/>\s/g, ">\n"),
                                n = "<pre><xmp>";
                            n += a,
                                n += "</xmp></pre>",
                                $(t).html(n)
                        },
                        base.handleTabKey = function(e) {
                            document.onkeydown = function(e) {
                                var t, a, n = !!document.all;
                                n ? (t = window.event.keyCode, a = window.event) : (t = e.which, a = e),
                                9 == t && (n ? (a.keyCode = 0, a.returnValue = !1) : (a.which = 0, a.preventDefault()))
                            }
                        },
                        base.barrage = function(e) {
                            var t = {};
                            t.container = e.container ? e.container: null,
                                t.colors = e.colors ? e.colors: ["#00ffea"],
                                t.images = e.images ? e.images: null,
                                t.data = e.data ? e.data: null,
                                t.drawCallback = e.drawCallback ? e.drawCallback: null,
                                t.timeRange = e.timeRange ? e.timeRange: [5, 10],
                                t.fontRange = e.fontRange ? e.fontRange: [12, 16],
                                t.repeat = 0 != e.repeat,
                                t.repeatNum = e.repeatNum ? e.repeatNum: 2,
                                t.width = e.width ? e.width: 140,
                                t.timeGroup = [],
                                t.init = function() {
                                    t.container && ($(t.container).css("width", "100%"), $(t.container).css("height", "100%"), $(t.container).css("position", "relative"), $(t.container).css("overflow", "hidden"), t.empty())
                                },
                                t.create = function() {
                                    t.init(),
                                        t.draw()
                                },
                                t.draw = function() {
                                    this.run = function() {
                                        if (t.data && t.data.length > 0) for (var e = 0,
                                                                                  a = t.data.length; e < a; e++) for (var n = 0; n < t.repeatNum; n++) t.createItem(t.data[e])
                                    },
                                        this.run()
                                },
                                t.createItem = function(e) {
                                    var e = e ? e: "",
                                        a = document.createElement("div");
                                    $(a).css("position", "absolute"),
                                        $(a).css("width", t.width);
                                    var n = base.getRandom(t.fontRange[0], t.fontRange[1]);
                                    $(a).css("text-align", "center"),
                                        $(a).css("font-size", n),
                                        $(a).html(e),
                                        t.setPosition(a),
                                        $(t.container).append(a),
                                        t.animate(a)
                                },
                                t.animate = function(e) {
                                    $(e).animate({
                                            left: -$(e).width()
                                        },
                                        1e3 * base.getRandom(t.timeRange[0], t.timeRange[1]),
                                        function() {
                                            t.repeat && (t.setPosition(e), t.animate(e))
                                        })
                                },
                                t.setTheme = function(e) {
                                    if (t.colors && t.colors.length > 0) {
                                        var a = base.getRandom(0, t.colors.length - 1);
                                        color = t.colors[a] ? t.colors[a] : t.colors[0],
                                            $(e).css("color", color),
                                        t.images && t.images.length > 0 && (image = t.images[a] ? t.images[a] : t.images[0], $(e).css("background", "url('" + image + "')"), $(e).css("background-repeat", "repeat-y"))
                                    }
                                },
                                t.setPosition = function(e) {
                                    var a = $(t.container).height(),
                                        n = base.getRandom(0, a - 20),
                                        r = $(t.container).width();
                                    $(e).css("left", r + base.getRandom(0, 60)),
                                        $(e).css("top", n),
                                        t.setTheme(e)
                                },
                                t.empty = function() {
                                    $(t.container).html("");
                                    for (var e = 0,
                                             a = t.timeGroup.length; e < a; e++) window.clearInterval(t.timeGroup[e])
                                },
                                t.reDraw = function(e) {
                                    e && (t.data = e, t.remove()),
                                        t.draw()
                                },
                                t.create()
                        },
                        base.rollBrand = function(e) {
                            var t = {};
                            t.container = e.container ? e.container: null,
                                t.autoAnimate = 0 != e.autoAnimate,
                                t.data = e.data ? e.data: null,
                                t.element = null,
                                t.hasTheme = 1 == e.hasTheme,
                                t.gap = e.gap ? e.gap: 27,
                                t.bg = e.bg ? e.bg: "#004c69",
                                t.color = e.color ? e.color: "#97e5ff",
                                t.radius = e.radius ? e.radius: 0,
                                t.size = e.size ? e.size: 5,
                                t.zIndex = e.zIndex ? e.zIndex: 1e3,
                                t.brandItemNum = 0,
                                t.activeNumber = e.activeNumber ? e.activeNumber: 0,
                                t.activeArrowUrl = e.activeArrowUrl ? e.activeArrowUrl: null,
                                t.arrow = null,
                                t.arrowOffset = e.arrowOffset ? e.arrowOffset: [2, -4],
                                t.rollCallback = e.rollCallback ? e.rollCallback: null,
                                t.time = e.time ? e.time: 2e3,
                                t.create = function() {
                                    t.container && t.data && 0 != t.data.length && ($(t.container).html(""), $(t.container).css("overflow", "hidden"), t.createBrand())
                                },
                                t.createBrand = function() {
                                    t.element = document.createElement("ul"),
                                        $(t.element).addClass("ui-rollBrand"),
                                        $(t.container).append(t.element),
                                        t.data.length % t.size > 0 ? t.brandItemNum = (t.data.length - t.data.length % t.size) / t.size + 1 : t.brandItemNum = (t.data.length - t.data.length % t.size) / t.size;
                                    for (var e = 0; e < t.brandItemNum; e++) t.createBrandItem(e);
                                    t.activeArrowUrl && t.createArrow(),
                                        t.animate(),
                                    t.rollCallback && t.rollCallback(0, t)
                                },
                                t.createArrow = function() {
                                    t.arrow = document.createElement("img"),
                                        $(t.arrow).attr("src", t.activeArrowUrl),
                                        $(t.arrow).css("position", "absolute"),
                                        $(t.arrow).css("z-index", t.zIndex),
                                        t.setArrowPosition(0),
                                        $("body").append(t.arrow)
                                },
                                t.setArrowPosition = function(e) {
                                    var a = $(t.element).find(".ui-brandItemChild:eq(" + e + ")"),
                                        n = $(a).offset().top + t.arrowOffset[1],
                                        r = $(a).offset().left + $(a).width() + t.arrowOffset[0];
                                    $(t.arrow).css("left", r),
                                        $(t.arrow).css("top", n)
                                },
                                t.createBrandItem = function(e) {
                                    var a = document.createElement("li");
                                    e == t.activeNumber && $(a).addClass("active"),
                                        $(t.element).append(a);
                                    var n = null;
                                    n = e == t.brandItemNum - 1 ? t.data.slice(e * t.size, t.data.length) : t.data.slice(e * t.size, (e + 1) * t.size),
                                        $(n).each(function(e, n) {
                                            0 == e ? t.createBrandItemChild(n, a, !0) : t.createBrandItemChild(n, a)
                                        })
                                },
                                t.createBrandItemChild = function(e, t, a) {
                                    var n = document.createElement("div");
                                    $(n).addClass("ui-brandItemChild"),
                                        $(n).css("text-align", "center"),
                                    a && $(n).addClass("active"),
                                        $(n).text(e.name),
                                        $(n).attr("val", e.value),
                                        $(t).append(n)
                                },
                                t.animate = function() {
                                    var e = 0,
                                        a = null;
                                    window.setInterval(function() {
                                            e == t.data.length - 1 ? e = 0 : e++,
                                                $(t.element).find(".ui-brandItemChild").removeClass("active"),
                                                a = $(t.element).find(".ui-brandItemChild:eq(" + e + ")"),
                                                $(a).addClass("active"),
                                            e % t.size == 0 && ($(t.element).children("li").removeClass("active"), $(a).parent().addClass("active")),
                                                t.setArrowPosition(e),
                                            t.rollCallback && t.rollCallback(e, t)
                                        },
                                        t.time)
                                },
                                t.reDraw = function(e) {
                                    t.data = e,
                                        t.create()
                                },
                                t.create()
                        },
                        base.animateEntity = function() {
                            var e = this;
                            e.init = function() {}
                        },
                        base.animate = new base.animateEntity,
                        base.animate.digital = function(e) {
                            var t = {};
                            t.container = e.container ? e.container: null,
                                t.value = e.value ? e.value: null,
                                t.type = e.type ? e.type: "asc",
                                t.speed = e.speed ? e.speed: 2,
                                t.create = function() {
                                    if (t.container && t.value && !(t.value < 0)) {
                                        switch (t.type) {
                                            case "asc":
                                                $(t.container).html("0");
                                                break;
                                            case "desc":
                                                $(t.container).html(t.value)
                                        }
                                        t.animate()
                                    }
                                },
                                t.animate = function() {
                                    var e = null;
                                    switch (t.type) {
                                        case "asc":
                                            var a = 0;
                                            e = window.setInterval(function() {
                                                    a >= t.value ? (window.clearInterval(e), a = t.value) : a += base.getRandom(0, t.value / (10 * t.speed)),
                                                        $(t.container).html(a)
                                                },
                                                10 * t.speed);
                                            break;
                                        case "desc":
                                            var a = t.value;
                                            e = window.setInterval(function() {
                                                    a -= base.getRandom(0, t.value / (10 * t.speed)),
                                                    a < 0 && (a = 0, window.clearInterval(e)),
                                                        $(t.container).html(a)
                                                },
                                                10 * t.speed)
                                    }
                                },
                                t.create()
                        },
                        base.beehive = function(e) {
                            var t = {};
                            t.container = e.container ? e.container: null,
                                t.data = e.data ? e.data: null,
                                t.size = e.size ? e.size: 50,
                                t.beehive = null,
                                t.clickEvent = null,
                                t.colors = e.colors;
                                t.create = function() {
                                    t.createBeehive(),
                                        $(t.data).each(function(e, a) {
                                            t.createBeehiveItem(e, a)
                                        })
                                },
                                t.createBeehive = function() {
                                    t.beehive = document.createElement("ui"),
                                        $(t.beehive).addClass("ui-beehive"),
                                        $(t.container).append(t.beehive)
                                },
                                t.createBeehiveItem = function(e, a) {
                                    var n = document.createElement("li");
                                    $(n).addClass("ui-beehive-item");
                                    var r = "<a class='ui-beehive-item-in' val='" + a.id + "' index='" + e + "' href='#'>" +
                                        "<img src='../images/indexImg/"+a.id+".png' style='z-index:9999'><div>" +//t.colors[Math.round(Math.random()*24)]
                                        "<div class='hover' style='background:#ff0000'></div><div class='ui-beehive-item-text'><div style='background:"+t.colors[a.id-40]+"'>" +a.itemName+ "</div></div></div></a>";
                                    $(n).html(r),
                                        $(t.beehive).append(n),
                                    t.clickEvent && $(n).find("a").on("click",
                                        function() {
                                            t.clickEvent(this, a)
                                        })
                                },
                                t.create()
                        },
                        base.checkDomain = function(e, t, a) {
                            for (var n = e.split("."), r = t.split("."), a = 0 != a, o = !0, l = 0, i = n.length; l < i; l++) switch (l) {
                                case 0:
                                case 1:
                                case 2:
                                    if (n[l] != r[l]) {
                                        o = !1;
                                        break
                                    }
                                    break;
                                case 3:
                                    if (a && Number(n[3]) > Number(r[3])) {
                                        o = !1;
                                        break
                                    }
                            }
                            return o
                        },
                        base
                }),
                global.fb = exports
        } ({},
            function() {
                return this
            } ())
    } ();